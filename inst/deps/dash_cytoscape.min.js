/*! For license information please see dash_cytoscape.min.js.LICENSE.txt */
(()=>{var t={686:()=>{!function(){"use strict";var t=function(t,e){var n=function(t){for(var e=0,n=t.length;e<n;e++)r(t[e])},r=function(t){var e=t.target,n=t.attributeName,r=t.oldValue;e.attributeChangedCallback(n,r,e.getAttribute(n))};return function(i,a){var o=i.constructor.observedAttributes;return o&&t(a).then((function(){new e(n).observe(i,{attributes:!0,attributeOldValue:!0,attributeFilter:o});for(var t=0,a=o.length;t<a;t++)i.hasAttribute(o[t])&&r({target:i,attributeName:o[t],oldValue:null})})),i}};function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function n(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw o}}}}var r=!0,i=!1,a="querySelectorAll",o="querySelectorAll",s=self,u=s.document,l=s.Element,h=s.MutationObserver,c=s.Set,d=s.WeakMap,f=function(t){return o in t},p=[].filter,v=function(t){var e=new d,s=function(n,r){var i;if(r)for(var a,o=function(t){return t.matches||t.webkitMatchesSelector||t.msMatchesSelector}(n),s=0,u=g.length;s<u;s++)o.call(n,a=g[s])&&(e.has(n)||e.set(n,new c),(i=e.get(n)).has(a)||(i.add(a),t.handle(n,r,a)));else e.has(n)&&(i=e.get(n),e.delete(n),i.forEach((function(e){t.handle(n,r,e)})))},v=function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,r=t.length;n<r;n++)s(t[n],e)},g=t.query,y=t.root||u,m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:MutationObserver,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["*"],u=function e(i,o,s,u,l,h){var c,d=n(i);try{for(d.s();!(c=d.n()).done;){var f=c.value;(h||a in f)&&(l?s.has(f)||(s.add(f),u.delete(f),t(f,l)):u.has(f)||(u.add(f),s.delete(f),t(f,l)),h||e(f[a](o),o,s,u,l,r))}}catch(t){d.e(t)}finally{d.f()}},l=new o((function(t){if(s.length){var e,a=s.join(","),o=new Set,l=new Set,h=n(t);try{for(h.s();!(e=h.n()).done;){var c=e.value,d=c.addedNodes,f=c.removedNodes;u(f,a,o,l,i,i),u(d,a,o,l,r,i)}}catch(t){h.e(t)}finally{h.f()}}})),h=l.observe;return(l.observe=function(t){return h.call(l,t,{subtree:r,childList:r})})(e),l}(s,y,h,g),b=l.prototype.attachShadow;return b&&(l.prototype.attachShadow=function(t){var e=b.call(this,t);return m.observe(e),e}),g.length&&v(y[o](g)),{drop:function(t){for(var n=0,r=t.length;n<r;n++)e.delete(t[n])},flush:function(){for(var t=m.takeRecords(),e=0,n=t.length;e<n;e++)v(p.call(t[e].removedNodes,f),!1),v(p.call(t[e].addedNodes,f),!0)},observer:m,parse:v}},g=self,y=g.document,m=g.Map,b=g.MutationObserver,x=g.Object,w=g.Set,_=g.WeakMap,M=g.Element,E=g.HTMLElement,k=g.Node,C=g.Error,S=g.TypeError,P=g.Reflect,T=x.defineProperty,D=x.keys,I=x.getOwnPropertyNames,B=x.setPrototypeOf,N=!self.customElements,O=function(t){for(var e=D(t),n=[],r=new w,i=e.length,a=0;a<i;a++){n[a]=t[e[a]];try{delete t[e[a]]}catch(t){r.add(a)}}return function(){for(var a=0;a<i;a++)r.has(a)||(t[e[a]]=n[a])}};if(N){var A=function(){var t=this.constructor;if(!L.has(t))throw new S("Illegal constructor");var e=L.get(t);if(W)return X(W,e);var n=z.call(y,e);return X(B(n,t.prototype),e)},z=y.createElement,L=new m,R=new m,j=new m,q=new m,F=[],V=v({query:F,handle:function(t,e,n){var r=j.get(n);if(e&&!r.isPrototypeOf(t)){var i=O(t);W=B(t,r);try{new r.constructor}finally{W=null,i()}}var a="".concat(e?"":"dis","connectedCallback");a in r&&t[a]()}}).parse,W=null,G=function(t){if(!R.has(t)){var e,n=new Promise((function(t){e=t}));R.set(t,{$:n,_:e})}return R.get(t).$},X=t(G,b);self.customElements={define:function(t,e){if(q.has(t))throw new C('the name "'.concat(t,'" has already been used with this registry'));L.set(e,t),j.set(t,e.prototype),q.set(t,e),F.push(t),G(t).then((function(){V(y.querySelectorAll(t))})),R.get(t)._(e)},get:function(t){return q.get(t)},whenDefined:G},T(A.prototype=E.prototype,"constructor",{value:A}),self.HTMLElement=A,y.createElement=function(t,e){var n=e&&e.is,r=n?q.get(n):q.get(t);return r?new r:z.call(y,t)},"isConnected"in k.prototype||T(k.prototype,"isConnected",{configurable:!0,get:function(){return!(this.ownerDocument.compareDocumentPosition(this)&this.DOCUMENT_POSITION_DISCONNECTED)}})}else if(N=!self.customElements.get("extends-br"))try{var Y=function t(){return self.Reflect.construct(HTMLBRElement,[],t)};Y.prototype=HTMLLIElement.prototype;var U="extends-br";self.customElements.define("extends-br",Y,{extends:"br"}),N=y.createElement("br",{is:U}).outerHTML.indexOf(U)<0;var H=self.customElements,Z=H.get,K=H.whenDefined;self.customElements.whenDefined=function(t){var e=this;return K.call(this,t).then((function(n){return n||Z.call(e,t)}))}}catch(t){}if(N){var $=function(t){var e=at.get(t);pt(e.querySelectorAll(this),t.isConnected)},Q=self.customElements,J=y.createElement,tt=Q.define,et=Q.get,nt=Q.upgrade,rt=P||{construct:function(t){return t.call(this)}},it=rt.construct,at=new _,ot=new w,st=new m,ut=new m,lt=new m,ht=new m,ct=[],dt=[],ft=function(t){return ht.get(t)||et.call(Q,t)},pt=v({query:dt,handle:function(t,e,n){var r=lt.get(n);if(e&&!r.isPrototypeOf(t)){var i=O(t);bt=B(t,r);try{new r.constructor}finally{bt=null,i()}}var a="".concat(e?"":"dis","connectedCallback");a in r&&t[a]()}}).parse,vt=v({query:ct,handle:function(t,e){at.has(t)&&(e?ot.add(t):ot.delete(t),dt.length&&$.call(dt,t))}}).parse,gt=M.prototype.attachShadow;gt&&(M.prototype.attachShadow=function(t){var e=gt.call(this,t);return at.set(this,e),e});var yt=function(t){if(!ut.has(t)){var e,n=new Promise((function(t){e=t}));ut.set(t,{$:n,_:e})}return ut.get(t).$},mt=t(yt,b),bt=null;I(self).filter((function(t){return/^HTML.*Element$/.test(t)})).forEach((function(t){var e=self[t];function n(){var t=this.constructor;if(!st.has(t))throw new S("Illegal constructor");var n=st.get(t),r=n.is,i=n.tag;if(r){if(bt)return mt(bt,r);var a=J.call(y,i);return a.setAttribute("is",r),mt(B(a,t.prototype),r)}return it.call(this,e,[],t)}T(n.prototype=e.prototype,"constructor",{value:n}),T(self,t,{value:n})})),y.createElement=function(t,e){var n=e&&e.is;if(n){var r=ht.get(n);if(r&&st.get(r).tag===t)return new r}var i=J.call(y,t);return n&&i.setAttribute("is",n),i},Q.get=ft,Q.whenDefined=yt,Q.upgrade=function(t){var e=t.getAttribute("is");if(e){var n=ht.get(e);if(n)return void mt(B(t,n.prototype),e)}nt.call(Q,t)},Q.define=function(t,e,n){if(ft(t))throw new C("'".concat(t,"' has already been defined as a custom element"));var r,i=n&&n.extends;st.set(e,i?{is:t,tag:i}:{is:"",tag:t}),i?(r="".concat(i,'[is="').concat(t,'"]'),lt.set(r,e.prototype),ht.set(t,e),dt.push(r)):(tt.apply(Q,arguments),ct.push(r=t)),yt(t).then((function(){i?(pt(y.querySelectorAll(r)),ot.forEach($,[r])):vt(y.querySelectorAll(r))})),ut.get(t)._(e)}}}()},372:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(81),i=n.n(r),a=n(645),o=n.n(a)()(i());o.push([t.id,".cytoscape-reference p {\n    display: inline;\n}\n\n.custom-menu-item {\n    background-color: rgb(241, 241, 241);\n    font-weight: bold !important;\n    width: 170px;\n    display: inline-block;\n    height: 38px;\n    padding: 0 30px;\n    color: #555;\n    text-align: center;\n    font-size: 11px;\n    font-weight: 600;\n    line-height: 38px;\n    letter-spacing: 0.1rem;\n    text-decoration: none;\n    white-space: nowrap;\n    border-radius: 4px;\n    border: 1px solid #bbb;\n    cursor: pointer;\n    box-sizing: border-box;\n}\n.custom-menu-item:hover {\n    color: rgb(104, 104, 104);\n    border-color: rgb(97, 97, 97);\n    outline: 0;\n}\n\n.cy-context-menus-cxt-menu {\n    display: none;\n}\n",""]);const s=o},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,a){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(o[u]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);r&&o[h[0]]||(void 0!==a&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),e.push(h))}},e}},81:t=>{"use strict";t.exports=function(t){return t[1]}},474:t=>{self,t.exports=(()=>{var t={621:(t,e,n)=>{"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){for(var e="",n=0;n<t.length;n++)e+=t[n],n!==t.length-1&&(e+=" ");return e}function a(t,e,n){n?t.setAttribute(e,""):t.removeAttribute(e)}function o(t,e,n){void 0===customElements.get(t)&&customElements.define(t,e,{extends:n})}n.r(e),n.d(e,{contextMenus:()=>T});var s="cy-context-menus-divider",u={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}function g(t){var e=w();return function(){var n,r=M(t);if(e){var i=M(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?y(t):e}(this,n)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function b(t){var e="function"==typeof Map?new Map:void 0;return(b=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return x(t,arguments,M(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_(r,t)})(t)}function x(t,e,n){return(x=w()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&_(i,n.prototype),i}).apply(null,arguments)}function w(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function E(t){t.preventDefault(),t.stopPropagation()}var k=function(t){v(n,t);var e=g(n);function n(t,r,i){var o,s,u,l,h,c,f,p,v,g;d(this,n),m((s=y(g=e.call(this)),M(n.prototype)),"setAttribute",s).call(s,"id",t.id);var b=g._getMenuItemClassStr(i.cxtMenuItemClasses,t.hasTrailingDivider);if(m((u=y(g),M(n.prototype)),"setAttribute",u).call(u,"class",b),m((l=y(g),M(n.prototype)),"setAttribute",l).call(l,"title",null!==(o=t.tooltipText)&&void 0!==o?o:""),t.disabled&&a(y(g),"disabled",!0),t.image){var x=document.createElement("img");x.src=t.image.src,x.width=t.image.width,x.height=t.image.height,x.style.position="absolute",x.style.top=t.image.y+"px",x.style.left=t.image.x+"px",m((h=y(g),M(n.prototype)),"appendChild",h).call(h,x)}if(g.innerHTML+=t.content,g.onMenuItemClick=r,g.data={},g.clickFns=[],g.selector=t.selector,g.hasTrailingDivider=t.hasTrailingDivider,g.show=void 0===t.show||t.show,g.coreAsWell=t.coreAsWell||!1,g.scratchpad=i,void 0===t.onClickFunction&&void 0===t.submenu)throw new Error("A menu item must either have click function or a submenu or both");return g.onClickFunction=t.onClickFunction,t.submenu instanceof Array&&g._createSubmenu(t.submenu),m((c=y(g),M(n.prototype)),"addEventListener",c).call(c,"mousedown",E),m((f=y(g),M(n.prototype)),"addEventListener",f).call(f,"mouseup",E),m((p=y(g),M(n.prototype)),"addEventListener",p).call(p,"touchstart",E),m((v=y(g),M(n.prototype)),"addEventListener",v).call(v,"touchend",E),g}return p(n,[{key:"bindOnClickFunction",value:function(t){this.clickFns.push(t),m(M(n.prototype),"addEventListener",this).call(this,"click",t)}},{key:"unbindOnClickFunctions",value:function(){var t,e=h(this.clickFns);try{for(e.s();!(t=e.n()).done;){var r=t.value;m(M(n.prototype),"removeEventListener",this).call(this,"click",r)}}catch(t){e.e(t)}finally{e.f()}this.clickFns=[]}},{key:"enable",value:function(){a(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){a(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(t){this.hasTrailingDivider=t}},{key:"hasSubmenu",value:function(){return this.submenu instanceof C}},{key:"appendSubmenuItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(t,e)}},{key:"isClickable",value:function(){return void 0!==this.onClickFunction}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return!0===this.show&&"none"!==this.style.display}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(t){var e=this.getBoundingClientRect(),r=function(t){t.style.opacity="0",t.style.display="block";var e=t.getBoundingClientRect();return t.style.opacity="1",t.style.display="none",e}(this.submenu),i=e.right+r.width>window.innerWidth,a=e.top+r.height>window.innerHeight;i||a?i&&!a?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):i&&a?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var o=Array.from(this.submenu.children).filter((function(t){if(t instanceof n)return t.isVisible()})),u=o.length;o.forEach((function(t,e){t instanceof n&&(e<u-1&&t.getHasTrailingDivider()?t.classList.add(s):t.getHasTrailingDivider()&&t.classList.remove(s))}))}},{key:"_onMouseLeave",value:function(t){var e,n,r,i,a;e={x:t.clientX,y:t.clientY},n=this.submenu,i=e.y,(r=e.x)>=(a=n.getBoundingClientRect()).left&&r<=a.right&&i>=a.top&&i<=a.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new C(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var e,r=h(t);try{for(r.s();!(e=r.n()).done;){var i=new n(e.value,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(i)}}catch(t){r.e(t)}finally{r.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(t,e){return e?t+" "+s:t}}],[{key:"define",value:function(){o("ctx-menu-item",n,"button")}}]),n}(b(HTMLButtonElement)),C=function(t){v(n,t);var e=g(n);function n(t,r){var i,a;return d(this,n),m((i=y(a=e.call(this)),M(n.prototype)),"setAttribute",i).call(i,"class",r.cxtMenuClasses),a.style.position="absolute",a.onMenuItemClick=t,a.scratchpad=r,a}return p(n,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return"none"!==this.style.display}},{key:"hideMenuItems",value:function(){var t,e=h(this.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;n instanceof HTMLElement?n.style.display="none":console.warn("".concat(n," is not a HTMLElement"))}}catch(t){e.e(t)}finally{e.f()}}},{key:"hideSubmenus",value:function(){var t,e=h(this.children);try{for(e.s();!(t=e.n()).done;){var n=t.value;n instanceof k&&n.submenu&&n.submenu.hide()}}catch(t){e.e(t)}finally{e.f()}}},{key:"appendMenuItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==e){if(e.parentNode!==this)throw new Error("The item with id='".concat(e.id,"' is not a child of the context menu"));this.insertBefore(t,e)}else this.appendChild(t);t.isClickable()&&this._performBindings(t)}},{key:"moveBefore",value:function(t,e){if(t.parentNode!==this)throw new Error("The item with id='".concat(t.id,"' is not a child of context menu"));if(e.parentNode!==this)throw new Error("The item with id='".concat(e.id,"' is not a child of context menu"));this.removeChild(t),this.insertBefore(t,e)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var t=this.lastChild;t instanceof k?this._removeImmediateMenuItem(t):(console.warn("Found non menu item in the context menu: ",t),this.removeChild(t))}}},{key:"_removeImmediateMenuItem",value:function(t){if(!this._detachImmediateMenuItem(t))throw new Error("menu item(id=".concat(t.id,") is not in the context menu"));t.detachSubmenu(),t.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(t){if(t.parentNode===this){if(this.removeChild(t),this.children.length<=0){var e=this.parentNode;e instanceof k&&e.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(t){var e=this._bindOnClick(t.onClickFunction);t.bindOnClickFunction(e),t.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(t){var e=this;return function(){var n=e.scratchpad.currentCyEvent;t(n)}}}],[{key:"define",value:function(){o("menu-item-list",n,"div")}}]),n}(b(HTMLDivElement)),S=function(t){v(n,t);var e=g(n);function n(t,r){var i;return d(this,n),(i=e.call(this,t,r)).onMenuItemClick=function(e){E(e),i.hide(),t()},i}return p(n,[{key:"removeMenuItem",value:function(t){var e=t.parentElement;e instanceof C&&this.contains(e)&&e._removeImmediateMenuItem(t)}},{key:"appendMenuItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.ensureDoesntContain(t.id),m(M(n.prototype),"appendMenuItem",this).call(this,t,e)}},{key:"insertMenuItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.before,r=e.parent;if(this.ensureDoesntContain(t.id),void 0!==n){if(!this.contains(n))throw new Error("before(id=".concat(n.id,") is not in the context menu"));var i=n.parentNode;if(!(i instanceof C))throw new Error("Parent of before(id=".concat(n.id,") is not a submenu"));i.appendMenuItem(t,n)}else if(void 0!==r){if(!this.contains(r))throw new Error("parent(id=".concat(r.id,") is not a descendant of the context menu"));r.appendSubmenuItem(t)}else this.appendMenuItem(t)}},{key:"moveBefore",value:function(t,e){var n=t.parentElement;if(!this.contains(n))throw new Error("parent(id=".concat(n.id,") is not in the contex menu"));if(!this.contains(e))throw new Error("before(id=".concat(e.id,") is not in the context menu"));n.removeChild(t),this.insertMenuItem(t,{before:e})}},{key:"moveToSubmenu",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.parentElement;if(!(r instanceof C))throw new Error("current parent(id=".concat(r.id,") is not a submenu"));if(!this.contains(r))throw new Error("parent of the menu item(id=".concat(r.id,") is not in the context menu"));if(null!==e){if(!this.contains(e))throw new Error("parent(id=".concat(e.id,") is not in the context menu"));r._detachImmediateMenuItem(t),e.appendSubmenuItem(t)}else null!==n&&(t.selector=n.selector,t.coreAsWell=n.coreAsWell),r._detachImmediateMenuItem(t),this.appendMenuItem(t)}},{key:"ensureDoesntContain",value:function(t){var e=document.getElementById(t);if(void 0!==e&&this.contains(e))throw new Error("There is already an element with id=".concat(t," in the context menu"))}}],[{key:"define",value:function(){o("ctx-menu",n,"div")}}]),n}(C);function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(t){var e=this;e.scratch("cycontextmenus")||e.scratch("cycontextmenus",{});var n,a,o=function(t){return e.scratch("cycontextmenus")[t]},l=function(t,n){return e.scratch("cycontextmenus")[t]=n},h=o("options"),c=o("cxtMenu"),d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=p(t);if(void 0!==e){var r=g(e);c.insertMenuItem(n,{parent:r})}else c.insertMenuItem(n)},f=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=0;n<t.length;n++)d(t[n],e)},p=function(t){var n=e.scratch("cycontextmenus");return new k(t,c.onMenuItemClick,n)},v=function(){o("active")&&(c.removeAllMenuItems(),e.off("tapstart",o("eventCyTapStart")),e.off(h.evtType,o("onCxttap")),e.off("viewport",o("onViewport")),document.removeEventListener("mouseup",o("hideOnNonCyClick")),c.parentNode.removeChild(c),c=void 0,l("cxtMenu",void 0),l("active",!1),l("anyVisibleChild",!1),l("onCxttap",void 0),l("onViewport",void 0),l("hideOnNonCyClick",void 0))},g=function(t){var e=document.getElementById(t);if(e instanceof k)return e;throw new Error("The item with id=".concat(t," is not a menu item"))};if("get"!==t){k.define(),C.define(),S.define(),h=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var i in e)n[i]instanceof Array?n[i]=n[i].concat(e[i]):n[i]=e[i];return n}(u,t),l("options",h),o("active")&&v(),l("active",!0),l("submenuIndicatorGen",function(t){var e=document.createElement("img");return e.src=t.src,e.width=t.width,e.height=t.height,e.classList.add("cy-context-menus-submenu-indicator"),e}.bind(void 0,h.submenuIndicator));var y=i(h.contextMenuClasses);l("cxtMenuClasses",y);var m=e.scratch("cycontextmenus");c=new S((function(){return l("cxtMenuPosition",void 0)}),m),l("cxtMenu",c),e.container().appendChild(c),l("cxtMenuItemClasses",i(h.menuItemClasses));var b=h.menuItems;f(b),a=function(t){l("currentCyEvent",t),function(t){var n,r=e.container(),i=o("cxtMenuPosition"),a=t.position||t.cyPosition;if(i!=a){c.hideMenuItems(),l("anyVisibleChild",!1),l("cxtMenuPosition",a);var s={top:(n=r.getBoundingClientRect()).top,left:n.left},u=t.renderedPosition||t.cyRenderedPosition,h=getComputedStyle(r)["border-width"],d=parseInt(h.replace("px",""))||0;d>0&&(s.top+=d,s.left+=d);var f=r.clientHeight,p=r.clientWidth,v=f/2,g=p/2;u.y>v&&u.x<=g?(c.style.left=u.x+"px",c.style.bottom=f-u.y+"px",c.style.right="auto",c.style.top="auto"):u.y>v&&u.x>g?(c.style.right=p-u.x+"px",c.style.bottom=f-u.y+"px",c.style.left="auto",c.style.top="auto"):u.y<=v&&u.x<=g?(c.style.left=u.x+"px",c.style.top=u.y+"px",c.style.right="auto",c.style.bottom="auto"):(c.style.right=p-u.x+"px",c.style.top=u.y+"px",c.style.left="auto",c.style.bottom="auto")}}(t);var n,r=t.target||t.cyTarget,i=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(t,e):void 0}}(t))){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(c.children);try{for(i.s();!(n=i.n()).done;){var a=n.value;a instanceof k&&(r===e?a.coreAsWell:r.is(a.selector))&&a.show&&(c.display(),l("anyVisibleChild",!0),a.display())}}catch(t){i.e(t)}finally{i.f()}var u=Array.from(c.children).filter((function(t){if(t instanceof k)return t.isVisible()})),h=u.length;u.forEach((function(t,e){t instanceof k&&(e<h-1&&t.getHasTrailingDivider()?t.classList.add(s):t.getHasTrailingDivider()&&t.classList.remove(s))})),!o("anyVisibleChild")&&!function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||t.style&&t.style.display||getComputedStyle(t).display}(c)&&c.hide()},e.on(h.evtType,a),l("onCxttap",a),function(){var t=function(t){if(c.contains(t.originalEvent.target))return!1;c.hide(),l("cxtMenuPosition",void 0),l("currentCyEvent",void 0)};e.on("tapstart",t),l("eventCyTapStart",t);var n=function(){c.hide()};e.on("viewport",n),l("onViewport",n)}(),n=function(t){e.container().contains(t.target)||c.contains(t.target)||(c.hide(),l("cxtMenuPosition",void 0))},document.addEventListener("mouseup",n),l("hideOnNonCyClick",n),function(){var t,e=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t))){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(e.s();!(t=e.n()).done;)t.value.addEventListener("contextmenu",(function(t){return t.preventDefault()}))}catch(t){e.e(t)}finally{e.f()}}()}return function(t){return{isActive:function(){return o("active")},appendMenuItem:function(e){return d(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0),t},appendMenuItems:function(e){return f(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0),t},removeMenuItem:function(e){var n=g(e);return c.removeMenuItem(n),t},setTrailingDivider:function(e,n){var r=g(e);return r.setHasTrailingDivider(n),n?r.classList.add(s):r.classList.remove(s),t},insertBeforeMenuItem:function(e,n){var r=p(e),i=g(n);return c.insertMenuItem(r,{before:i}),t},moveToSubmenu:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=g(e);if(null===n)c.moveToSubmenu(r);else if("string"==typeof n){var i=g(n.toString());c.moveToSubmenu(r,i)}else void 0!==n.coreAsWell||void 0!==n.selector?c.moveToSubmenu(r,null,n):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return t},moveBeforeOtherMenuItem:function(e,n){var r=g(e),i=g(n);return c.moveBefore(r,i),t},disableMenuItem:function(e){return g(e).disable(),t},enableMenuItem:function(e){return g(e).enable(),t},hideMenuItem:function(e){return g(e).hide(),t},showMenuItem:function(e){return g(e).display(),t},destroy:function(){return v(),t}}}(this)}},579:(t,e,n)=>{var r=n(621).contextMenus,i=function(t){t&&t("core","contextMenus",r)};"undefined"!=typeof cytoscape&&i(cytoscape),t.exports=i}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}return n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n(579)})()},58:(t,e,n)=>{"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t.default:t}var i=r(n(296)),a=r(n(485));function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var d="undefined"==typeof window?null:window,f=d?d.navigator:null,p=(d&&d.document,o("")),v=o({}),g=o((function(){})),y="undefined"==typeof HTMLElement?"undefined":o(HTMLElement),m=function(t){return t&&t.instanceString&&x(t.instanceString)?t.instanceString():null},b=function(t){return null!=t&&o(t)==p},x=function(t){return null!=t&&o(t)===g},w=function(t){return Array.isArray?Array.isArray(t):null!=t&&t instanceof Array},_=function(t){return null!=t&&o(t)===v&&!w(t)&&t.constructor===Object},M=function(t){return null!=t&&o(t)===o(1)&&!isNaN(t)},E=function(t){return"undefined"===y?void 0:null!=t&&t instanceof HTMLElement},k=function(t){return C(t)||S(t)},C=function(t){return"collection"===m(t)&&t._private.single},S=function(t){return"collection"===m(t)&&!t._private.single},P=function(t){return"core"===m(t)},T=function(t){return"stylesheet"===m(t)},D=function(t){return null==t||!(""!==t&&!t.match(/^\s+$/))},I=function(t){return function(t){return null!=t&&o(t)===v}(t)&&x(t.then)},B=function(t,e){e||(e=function(){if(1===arguments.length)return arguments[0];if(0===arguments.length)return"undefined";for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);return t.join("$")});var n=function n(){var r,i=arguments,a=e.apply(this,i),o=n.cache;return(r=o[a])||(r=o[a]=t.apply(this,i)),r};return n.cache={},n},N=B((function(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))})),O=B((function(t){return t.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}))})),A=B((function(t,e){return t+e[0].toUpperCase()+e.substring(1)}),(function(t,e){return t+"$"+e})),z=function(t){return D(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},L="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",R="rgb[a]?\\(("+L+"[%]?)\\s*,\\s*("+L+"[%]?)\\s*,\\s*("+L+"[%]?)(?:\\s*,\\s*("+L+"))?\\)",j="rgb[a]?\\((?:"+L+"[%]?)\\s*,\\s*(?:"+L+"[%]?)\\s*,\\s*(?:"+L+"[%]?)(?:\\s*,\\s*(?:"+L+"))?\\)",q="hsl[a]?\\(("+L+")\\s*,\\s*("+L+"[%])\\s*,\\s*("+L+"[%])(?:\\s*,\\s*("+L+"))?\\)",F="hsl[a]?\\((?:"+L+")\\s*,\\s*(?:"+L+"[%])\\s*,\\s*(?:"+L+"[%])(?:\\s*,\\s*(?:"+L+"))?\\)",V=function(t,e){return t<e?-1:t>e?1:0},W=null!=Object.assign?Object.assign.bind(Object):function(t){for(var e=arguments,n=1;n<e.length;n++){var r=e[n];if(null!=r)for(var i=Object.keys(r),a=0;a<i.length;a++){var o=i[a];t[o]=r[o]}}return t},G={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},X=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(_(a))throw Error("Tried to set map with object key");i<n.length-1?(null==e[a]&&(e[a]={}),e=e[a]):e[a]=t.value}},Y=function(t){for(var e=t.map,n=t.keys,r=n.length,i=0;i<r;i++){var a=n[i];if(_(a))throw Error("Tried to get map with object key");if(null==(e=e[a]))return e}return e},U=d?d.performance:null,H=U&&U.now?function(){return U.now()}:function(){return Date.now()},Z=function(){if(d){if(d.requestAnimationFrame)return function(t){d.requestAnimationFrame(t)};if(d.mozRequestAnimationFrame)return function(t){d.mozRequestAnimationFrame(t)};if(d.webkitRequestAnimationFrame)return function(t){d.webkitRequestAnimationFrame(t)};if(d.msRequestAnimationFrame)return function(t){d.msRequestAnimationFrame(t)}}return function(t){t&&setTimeout((function(){t(H())}),1e3/60)}}(),K=function(t){return Z(t)},$=H,Q=9261,J=5381,tt=function(t){for(var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q;!(e=t.next()).done;)n=65599*n+e.value|0;return n},et=function(t){return 65599*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q)+t|0},nt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J;return(e<<5)+e+t|0},rt=function(t){return 2097152*t[0]+t[1]},it=function(t,e){return[et(t[0],e[0]),nt(t[1],e[1])]},at=function(t,e){var n={value:0,done:!1},r=0,i=t.length;return tt({next:function(){return r<i?n.value=t.charCodeAt(r++):n.done=!0,n}},e)},ot=function(){return st(arguments)},st=function(t){for(var e,n=0;n<t.length;n++){var r=t[n];e=0===n?at(r):at(r,e)}return e},ut=!0,lt=null!=console.warn,ht=null!=console.trace,ct=Number.MAX_SAFE_INTEGER||9007199254740991,dt=function(){return!0},ft=function(){return!1},pt=function(){return 0},vt=function(){},gt=function(t){throw new Error(t)},yt=function(t){if(void 0===t)return ut;ut=!!t},mt=function(t){yt()&&(lt?console.warn(t):(console.log(t),ht&&console.trace()))},bt=function(t){return null==t?t:w(t)?t.slice():_(t)?function(t){return W({},t)}(t):t},xt=function(t,e){for(e=t="";t++<36;e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-");return e},wt={},_t=function(){return wt},Mt=function(t){var e=Object.keys(t);return function(n){for(var r={},i=0;i<e.length;i++){var a=e[i],o=null==n?void 0:n[a];r[a]=void 0===o?t[a]:o}return r}},Et=function(t,e,n){for(var r=t.length;r>=0&&(t[r]!==e||(t.splice(r,1),n));r--);},kt=function(t){t.splice(0,t.length)},Ct=function(t,e,n){return n&&(e=A(n,e)),t[e]},St=function(t,e,n,r){n&&(e=A(n,e)),t[e]=r},Pt="undefined"!=typeof Map?Map:function(){function t(){s(this,t),this._obj={}}return l(t,[{key:"set",value:function(t,e){return this._obj[t]=e,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return void 0!==this._obj[t]}},{key:"get",value:function(t){return this._obj[t]}}]),t}(),Tt=function(){function t(e){if(s(this,t),this._obj=Object.create(null),this.size=0,null!=e){var n;n=null!=e.instanceString&&e.instanceString()===this.instanceString()?e.toArray():e;for(var r=0;r<n.length;r++)this.add(n[r])}}return l(t,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var e=this._obj;1!==e[t]&&(e[t]=1,this.size++)}},{key:"delete",value:function(t){var e=this._obj;1===e[t]&&(e[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return 1===this._obj[t]}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter((function(e){return t.has(e)}))}},{key:"forEach",value:function(t,e){return this.toArray().forEach(t,e)}}]),t}(),Dt="undefined"!==("undefined"==typeof Set?"undefined":o(Set))?Set:Tt,It=function(t,e,n){if(n=!(void 0!==n&&!n),void 0!==t&&void 0!==e&&P(t)){var r=e.group;if(null==r&&(r=e.data&&null!=e.data.source&&null!=e.data.target?"edges":"nodes"),"nodes"===r||"edges"===r){this.length=1,this[0]=this;var i=this._private={cy:t,single:!0,data:e.data||{},position:e.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!e.selected,selectable:void 0===e.selectable||!!e.selectable,locked:!!e.locked,grabbed:!1,grabbable:void 0===e.grabbable||!!e.grabbable,pannable:void 0===e.pannable?"edges"===r:!!e.pannable,active:!1,classes:new Dt,animation:{current:[],queue:[]},rscratch:{},scratch:e.scratch||{},edges:[],children:[],parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),e.renderedPosition){var a=e.renderedPosition,o=t.pan(),s=t.zoom();i.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}var u=[];w(e.classes)?u=e.classes:b(e.classes)&&(u=e.classes.split(/\s+/));for(var l=0,h=u.length;l<h;l++){var c=u[l];c&&""!==c&&i.classes.add(c)}this.createEmitter();var d=e.style||e.css;d&&(mt("Setting a `style` bypass at element creation is deprecated"),this.style(d)),(void 0===n||n)&&this.restore()}else gt("An element must be of type `nodes` or `edges`; you specified `"+r+"`")}else gt("An element must have a core reference and parameters set")},Bt=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(e,n,r){var i;_(e)&&!k(e)&&(e=(i=e).roots||i.root,n=i.visit,r=i.directed),r=2!==arguments.length||x(n)?r:n,n=x(n)?n:function(){};for(var a,o=this._private.cy,s=e=b(e)?this.filter(e):e,u=[],l=[],h={},c={},d={},f=0,p=this.byGroup(),v=p.nodes,g=p.edges,y=0;y<s.length;y++){var m=s[y],w=m.id();m.isNode()&&(u.unshift(m),t.bfs&&(d[w]=!0,l.push(m)),c[w]=0)}var M=function(){var e=t.bfs?u.shift():u.pop(),i=e.id();if(t.dfs){if(d[i])return"continue";d[i]=!0,l.push(e)}var o,s=c[i],p=h[i],y=null!=p?p.source():null,m=null!=p?p.target():null,b=null==p?void 0:e.same(y)?m[0]:y[0];if(!0===(o=n(e,p,b,f++,s)))return a=e,"break";if(!1===o)return"break";for(var x=e.connectedEdges().filter((function(t){return(!r||t.source().same(e))&&g.has(t)})),w=0;w<x.length;w++){var _=x[w],M=_.connectedNodes().filter((function(t){return!t.same(e)&&v.has(t)})),E=M.id();0===M.length||d[E]||(M=M[0],u.push(M),t.bfs&&(d[E]=!0,l.push(M)),h[E]=_,c[E]=c[i]+1)}};t:for(;0!==u.length;)switch(M()){case"continue":continue;case"break":break t}for(var E=o.collection(),C=0;C<l.length;C++){var S=l[C],P=h[S.id()];null!=P&&E.merge(P),E.merge(S)}return{path:o.collection(E),found:o.collection(a)}}},Nt={breadthFirstSearch:Bt({bfs:!0}),depthFirstSearch:Bt({dfs:!0})};Nt.bfs=Nt.breadthFirstSearch,Nt.dfs=Nt.depthFirstSearch;var Ot=Mt({root:null,weight:function(t){return 1},directed:!1}),At={dijkstra:function(t){if(!_(t)){var e=arguments;t={root:e[0],weight:e[1],directed:e[2]}}var n=Ot(t),r=n.root,i=n.weight,o=n.directed,s=this,u=i,l=b(r)?this.filter(r)[0]:r[0],h={},c={},d={},f=this.byGroup(),p=f.nodes,v=f.edges;v.unmergeBy((function(t){return t.isLoop()}));for(var g=function(t){return h[t.id()]},y=function(t,e){h[t.id()]=e,m.updateItem(t)},m=new a((function(t,e){return g(t)-g(e)})),x=0;x<p.length;x++){var w=p[x];h[w.id()]=w.same(l)?0:1/0,m.push(w)}for(var M=function(t,e){for(var n,r=(o?t.edgesTo(e):t.edgesWith(e)).intersect(v),i=1/0,a=0;a<r.length;a++){var s=r[a],l=u(s);(l<i||!n)&&(i=l,n=s)}return{edge:n,dist:i}};m.size()>0;){var E=m.pop(),k=g(E),C=E.id();if(d[C]=k,k!==1/0)for(var S=E.neighborhood().intersect(p),P=0;P<S.length;P++){var T=S[P],D=T.id(),I=M(E,T),B=k+I.dist;B<g(T)&&(y(T,B),c[D]={node:E,edge:I.edge})}}return{distanceTo:function(t){var e=b(t)?p.filter(t)[0]:t[0];return d[e.id()]},pathTo:function(t){var e=b(t)?p.filter(t)[0]:t[0],n=[],r=e,i=r.id();if(e.length>0)for(n.unshift(e);c[i];){var a=c[i];n.unshift(a.edge),n.unshift(a.node),i=(r=a.node).id()}return s.spawn(n)}}}},zt={kruskal:function(t){t=t||function(t){return 1};for(var e=this.byGroup(),n=e.nodes,r=e.edges,i=n.length,a=new Array(i),o=n,s=function(t){for(var e=0;e<a.length;e++)if(a[e].has(t))return e},u=0;u<i;u++)a[u]=this.spawn(n[u]);for(var l=r.sort((function(e,n){return t(e)-t(n)})),h=0;h<l.length;h++){var c=l[h],d=c.source()[0],f=c.target()[0],p=s(d),v=s(f),g=a[p],y=a[v];p!==v&&(o.merge(c),g.merge(y),a.splice(v,1))}return o}},Lt=Mt({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),Rt={aStar:function(t){var e=this.cy(),n=Lt(t),r=n.root,i=n.goal,o=n.heuristic,s=n.directed,u=n.weight;r=e.collection(r)[0],i=e.collection(i)[0];var l,h,c=r.id(),d=i.id(),f={},p={},v={},g=new a((function(t,e){return p[t.id()]-p[e.id()]})),y=new Dt,m={},b={},x=function(t,e){g.push(t),y.add(e)};x(r,c),f[c]=0,p[c]=o(r);for(var w,_=0;g.size()>0;){if(h=(l=g.pop()).id(),y.delete(h),_++,h===d){for(var M=[],E=i,k=d,C=b[k];M.unshift(E),null!=C&&M.unshift(C),null!=(E=m[k]);)C=b[k=E.id()];return{found:!0,distance:f[h],path:this.spawn(M),steps:_}}v[h]=!0;for(var S=l._private.edges,P=0;P<S.length;P++){var T=S[P];if(this.hasElementWithId(T.id())&&(!s||T.data("source")===h)){var D=T.source(),I=T.target(),B=D.id()!==h?D:I,N=B.id();if(this.hasElementWithId(N)&&!v[N]){var O=f[h]+u(T);w=N,y.has(w)?O<f[N]&&(f[N]=O,p[N]=O+o(B),m[N]=l):(f[N]=O,p[N]=O+o(B),x(B,N),m[N]=l,b[N]=T)}}}}return{found:!1,distance:void 0,path:void 0,steps:_}}},jt=Mt({weight:function(t){return 1},directed:!1}),qt={floydWarshall:function(t){for(var e=this.cy(),n=jt(t),r=n.weight,i=n.directed,a=r,o=this.byGroup(),s=o.nodes,u=o.edges,l=s.length,h=l*l,c=function(t){return s.indexOf(t)},d=function(t){return s[t]},f=new Array(h),p=0;p<h;p++){var v=p%l,g=(p-v)/l;f[p]=g===v?0:1/0}for(var y=new Array(h),m=new Array(h),x=0;x<u.length;x++){var w=u[x],_=w.source()[0],M=w.target()[0];if(_!==M){var E=c(_),k=c(M),C=E*l+k,S=a(w);if(f[C]>S&&(f[C]=S,y[C]=k,m[C]=w),!i){var P=k*l+E;!i&&f[P]>S&&(f[P]=S,y[P]=E,m[P]=w)}}}for(var T=0;T<l;T++)for(var D=0;D<l;D++)for(var I=D*l+T,B=0;B<l;B++){var N=D*l+B,O=T*l+B;f[I]+f[O]<f[N]&&(f[N]=f[I]+f[O],y[N]=y[I])}var A=function(t){return c(function(t){return(b(t)?e.filter(t):t)[0]}(t))},z={distance:function(t,e){var n=A(t),r=A(e);return f[n*l+r]},path:function(t,n){var r=A(t),i=A(n),a=d(r);if(r===i)return a.collection();if(null==y[r*l+i])return e.collection();var o,s=e.collection(),u=r;for(s.merge(a);r!==i;)u=r,r=y[r*l+i],o=m[u*l+r],s.merge(o),s.merge(d(r));return s}};return z}},Ft=Mt({weight:function(t){return 1},directed:!1,root:null}),Vt={bellmanFord:function(t){var e=this,n=Ft(t),r=n.weight,i=n.directed,a=n.root,o=r,s=this,u=this.cy(),l=this.byGroup(),h=l.edges,c=l.nodes,d=c.length,f=new Pt,p=!1;a=u.collection(a)[0],h.unmergeBy((function(t){return t.isLoop()}));for(var v=h.length,g=function(t){var e=f.get(t.id());return e||(e={},f.set(t.id(),e)),e},y=function(t){return(b(t)?u.$(t):t)[0]},m=0;m<d;m++){var x=c[m],w=g(x);x.same(a)?w.dist=0:w.dist=1/0,w.pred=null,w.edge=null}for(var _=!1,M=function(t,e,n,r,i,a){var o=r.dist+a;o<i.dist&&!n.same(r.edge)&&(i.dist=o,i.pred=t,i.edge=n,_=!0)},E=1;E<d;E++){_=!1;for(var k=0;k<v;k++){var C=h[k],S=C.source(),P=C.target(),T=o(C),D=g(S),I=g(P);M(S,0,C,D,I,T),i||M(P,0,C,I,D,T)}if(!_)break}if(_)for(var B=0;B<v;B++){var N=h[B],O=N.source(),A=N.target(),z=o(N),L=g(O).dist,R=g(A).dist;if(L+z<R||!i&&R+z<L){mt("Graph contains a negative weight cycle for Bellman-Ford"),p=!0;break}}return{distanceTo:function(t){return g(y(t)).dist},pathTo:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,r=[],i=y(t);;){if(null==i)return e.spawn();var o=g(i),u=o.edge,l=o.pred;if(r.unshift(i[0]),i.same(n)&&r.length>0)break;null!=u&&r.unshift(u),i=l}return s.spawn(r)},hasNegativeWeightCycle:p,negativeWeightCycles:[]}}},Wt=Math.sqrt(2),Gt=function(t,e,n){0===n.length&&gt("Karger-Stein must be run on a connected (sub)graph");for(var r=n[t],i=r[1],a=r[2],o=e[i],s=e[a],u=n,l=u.length-1;l>=0;l--){var h=u[l],c=h[1],d=h[2];(e[c]===o&&e[d]===s||e[c]===s&&e[d]===o)&&u.splice(l,1)}for(var f=0;f<u.length;f++){var p=u[f];p[1]===s?(u[f]=p.slice(),u[f][1]=o):p[2]===s&&(u[f]=p.slice(),u[f][2]=o)}for(var v=0;v<e.length;v++)e[v]===s&&(e[v]=o);return u},Xt=function(t,e,n,r){for(;n>r;){var i=Math.floor(Math.random()*e.length);e=Gt(i,t,e),n--}return e},Yt={kargerStein:function(){var t=this,e=this.byGroup(),n=e.nodes,r=e.edges;r.unmergeBy((function(t){return t.isLoop()}));var i=n.length,a=r.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),s=Math.floor(i/Wt);if(!(i<2)){for(var u=[],l=0;l<a;l++){var h=r[l];u.push([l,n.indexOf(h.source()),n.indexOf(h.target())])}for(var c=1/0,d=[],f=new Array(i),p=new Array(i),v=new Array(i),g=function(t,e){for(var n=0;n<i;n++)e[n]=t[n]},y=0;y<=o;y++){for(var m=0;m<i;m++)p[m]=m;var b=Xt(p,u.slice(),i,s),x=b.slice();g(p,v);var w=Xt(p,b,s,2),_=Xt(v,x,s,2);w.length<=_.length&&w.length<c?(c=w.length,d=w,g(p,f)):_.length<=w.length&&_.length<c&&(c=_.length,d=_,g(v,f))}for(var M=this.spawn(d.map((function(t){return r[t[0]]}))),E=this.spawn(),k=this.spawn(),C=f[0],S=0;S<f.length;S++){var P=f[S],T=n[S];P===C?E.merge(T):k.merge(T)}var D=function(e){var n=t.spawn();return e.forEach((function(e){n.merge(e),e.connectedEdges().forEach((function(e){t.contains(e)&&!M.contains(e)&&n.merge(e)}))})),n},I=[D(E),D(k)];return{cut:M,components:I,partition1:E,partition2:k}}gt("At least 2 nodes are required for Karger-Stein algorithm")}},Ut=function(t,e,n){return{x:t.x*e+n.x,y:t.y*e+n.y}},Ht=function(t,e,n){return{x:(t.x-n.x)/e,y:(t.y-n.y)/e}},Zt=function(t){return{x:t[0],y:t[1]}},Kt=function(t,e){return Math.atan2(e,t)-Math.PI/2},$t=Math.log2||function(t){return Math.log(t)/Math.log(2)},Qt=function(t){return t>0?1:t<0?-1:0},Jt=function(t,e){return Math.sqrt(te(t,e))},te=function(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},ee=function(t){for(var e=t.length,n=0,r=0;r<e;r++)n+=t[r];for(var i=0;i<e;i++)t[i]=t[i]/n;return t},ne=function(t,e,n,r){return(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n},re=function(t,e,n,r){return{x:ne(t.x,e.x,n.x,r),y:ne(t.y,e.y,n.y,r)}},ie=function(t,e,n){return Math.max(t,Math.min(n,e))},ae=function(t){if(null==t)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=t.x1&&null!=t.y1){if(null!=t.x2&&null!=t.y2&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(null!=t.w&&null!=t.h&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},oe=function(t,e,n){t.x1=Math.min(t.x1,e),t.x2=Math.max(t.x2,e),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,n),t.y2=Math.max(t.y2,n),t.h=t.y2-t.y1},se=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.x1-=e,t.x2+=e,t.y1-=e,t.y2+=e,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},ue=function(t){var e,n,r,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)e=n=r=i=a[0];else if(2===a.length)e=r=a[0],i=n=a[1];else if(4===a.length){var o=c(a,4);e=o[0],n=o[1],r=o[2],i=o[3]}return t.x1-=i,t.x2+=n,t.y1-=e,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},le=function(t,e){t.x1=e.x1,t.y1=e.y1,t.x2=e.x2,t.y2=e.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},he=function(t,e){t.x1+=e.x,t.x2+=e.x,t.y1+=e.y,t.y2+=e.y},ce=function(t,e){return!(t.x1>e.x2||e.x1>t.x2||t.x2<e.x1||e.x2<t.x1||t.y2<e.y1||e.y2<t.y1||t.y1>e.y2||e.y1>t.y2)},de=function(t,e,n){return t.x1<=e&&e<=t.x2&&t.y1<=n&&n<=t.y2},fe=function(t,e){return de(t,e.x1,e.y1)&&de(t,e.x2,e.y2)},pe=function(t,e,n,r,i,a,o){var s,u=Be(i,a),l=i/2,h=a/2,c=r-h-o;if((s=Ce(t,e,n,r,n-l+u-o,c,n+l-u+o,c,!1)).length>0)return s;var d=n+l+o;if((s=Ce(t,e,n,r,d,r-h+u-o,d,r+h-u+o,!1)).length>0)return s;var f=r+h+o;if((s=Ce(t,e,n,r,n-l+u-o,f,n+l-u+o,f,!1)).length>0)return s;var p,v=n-l-o;if((s=Ce(t,e,n,r,v,r-h+u-o,v,r+h-u+o,!1)).length>0)return s;var g=n-l+u,y=r-h+u;if((p=Ee(t,e,n,r,g,y,u+o)).length>0&&p[0]<=g&&p[1]<=y)return[p[0],p[1]];var m=n+l-u,b=r-h+u;if((p=Ee(t,e,n,r,m,b,u+o)).length>0&&p[0]>=m&&p[1]<=b)return[p[0],p[1]];var x=n+l-u,w=r+h-u;if((p=Ee(t,e,n,r,x,w,u+o)).length>0&&p[0]>=x&&p[1]>=w)return[p[0],p[1]];var _=n-l+u,M=r+h-u;return(p=Ee(t,e,n,r,_,M,u+o)).length>0&&p[0]<=_&&p[1]>=M?[p[0],p[1]]:[]},ve=function(t,e,n,r,i,a,o){var s=o,u=Math.min(n,i),l=Math.max(n,i),h=Math.min(r,a),c=Math.max(r,a);return u-s<=t&&t<=l+s&&h-s<=e&&e<=c+s},ge=function(t,e,n,r,i,a,o,s,u){var l=Math.min(n,o,i)-u,h=Math.max(n,o,i)+u,c=Math.min(r,s,a)-u,d=Math.max(r,s,a)+u;return!(t<l||t>h||e<c||e>d)},ye=function(t,e,n,r,i,a,o,s){var u,l,h,c,d,f,p,v,g,y,m,b,x,w=[];l=9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*r*a-3*r*r-3*r*s-6*a*a+3*a*s,h=3*n*n-6*n*i+n*o-n*t+2*i*i+2*i*t-o*t+3*r*r-6*r*a+r*s-r*e+2*a*a+2*a*e-s*e,c=1*n*i-n*n+n*t-i*t+r*a-r*r+r*e-a*e,0===(u=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+r*r-4*r*a+2*r*s+4*a*a-4*a*s+s*s)&&(u=1e-5),v=-27*(c/=u)+(l/=u)*(9*(h/=u)-l*l*2),f=(p=(3*h-l*l)/9)*p*p+(v/=54)*v,(d=w)[1]=0,b=l/3,f>0?(y=(y=v+Math.sqrt(f))<0?-Math.pow(-y,1/3):Math.pow(y,1/3),m=(m=v-Math.sqrt(f))<0?-Math.pow(-m,1/3):Math.pow(m,1/3),d[0]=-b+y+m,b+=(y+m)/2,d[4]=d[2]=-b,b=Math.sqrt(3)*(-m+y)/2,d[3]=b,d[5]=-b):(d[5]=d[3]=0,0===f?(x=v<0?-Math.pow(-v,1/3):Math.pow(v,1/3),d[0]=2*x-b,d[4]=d[2]=-(x+b)):(g=(p=-p)*p*p,g=Math.acos(v/Math.sqrt(g)),x=2*Math.sqrt(p),d[0]=-b+x*Math.cos(g/3),d[2]=-b+x*Math.cos((g+2*Math.PI)/3),d[4]=-b+x*Math.cos((g+4*Math.PI)/3)));for(var _=[],M=0;M<6;M+=2)Math.abs(w[M+1])<1e-7&&w[M]>=0&&w[M]<=1&&_.push(w[M]);_.push(1),_.push(0);for(var E,k,C,S=-1,P=0;P<_.length;P++)E=Math.pow(1-_[P],2)*n+2*(1-_[P])*_[P]*i+_[P]*_[P]*o,k=Math.pow(1-_[P],2)*r+2*(1-_[P])*_[P]*a+_[P]*_[P]*s,C=Math.pow(E-t,2)+Math.pow(k-e,2),S>=0?C<S&&(S=C):S=C;return S},me=function(t,e,n,r,i,a){var o=[t-n,e-r],s=[i-n,a-r],u=s[0]*s[0]+s[1]*s[1],l=o[0]*o[0]+o[1]*o[1],h=o[0]*s[0]+o[1]*s[1],c=h*h/u;return h<0?l:c>u?(t-i)*(t-i)+(e-a)*(e-a):l-c},be=function(t,e,n){for(var r,i,a,o,s=0,u=0;u<n.length/2;u++)if(r=n[2*u],i=n[2*u+1],u+1<n.length/2?(a=n[2*(u+1)],o=n[2*(u+1)+1]):(a=n[2*(u+1-n.length/2)],o=n[2*(u+1-n.length/2)+1]),r==t&&a==t);else{if(!(r>=t&&t>=a||r<=t&&t<=a))continue;(t-r)/(a-r)*(o-i)+i>e&&s++}return s%2!=0},xe=function(t,e,n,r,i,a,o,s,u){var l,h=new Array(n.length);null!=s[0]?(l=Math.atan(s[1]/s[0]),s[0]<0?l+=Math.PI/2:l=-l-Math.PI/2):l=s;for(var c,d=Math.cos(-l),f=Math.sin(-l),p=0;p<h.length/2;p++)h[2*p]=a/2*(n[2*p]*d-n[2*p+1]*f),h[2*p+1]=o/2*(n[2*p+1]*d+n[2*p]*f),h[2*p]+=r,h[2*p+1]+=i;if(u>0){var v=_e(h,-u);c=we(v)}else c=h;return be(t,e,c)},we=function(t){for(var e,n,r,i,a,o,s,u,l=new Array(t.length/2),h=0;h<t.length/4;h++){e=t[4*h],n=t[4*h+1],r=t[4*h+2],i=t[4*h+3],h<t.length/4-1?(a=t[4*(h+1)],o=t[4*(h+1)+1],s=t[4*(h+1)+2],u=t[4*(h+1)+3]):(a=t[0],o=t[1],s=t[2],u=t[3]);var c=Ce(e,n,r,i,a,o,s,u,!0);l[2*h]=c[0],l[2*h+1]=c[1]}return l},_e=function(t,e){for(var n,r,i,a,o=new Array(2*t.length),s=0;s<t.length/2;s++){n=t[2*s],r=t[2*s+1],s<t.length/2-1?(i=t[2*(s+1)],a=t[2*(s+1)+1]):(i=t[0],a=t[1]);var u=a-r,l=-(i-n),h=Math.sqrt(u*u+l*l),c=u/h,d=l/h;o[4*s]=n+c*e,o[4*s+1]=r+d*e,o[4*s+2]=i+c*e,o[4*s+3]=a+d*e}return o},Me=function(t,e,n,r,i,a,o){return t-=i,e-=a,(t/=n/2+o)*t+(e/=r/2+o)*e<=1},Ee=function(t,e,n,r,i,a,o){var s=[n-t,r-e],u=[t-i,e-a],l=s[0]*s[0]+s[1]*s[1],h=2*(u[0]*s[0]+u[1]*s[1]),c=h*h-4*l*(u[0]*u[0]+u[1]*u[1]-o*o);if(c<0)return[];var d=(-h+Math.sqrt(c))/(2*l),f=(-h-Math.sqrt(c))/(2*l),p=Math.min(d,f),v=Math.max(d,f),g=[];if(p>=0&&p<=1&&g.push(p),v>=0&&v<=1&&g.push(v),0===g.length)return[];var y=g[0]*s[0]+t,m=g[0]*s[1]+e;return g.length>1?g[0]==g[1]?[y,m]:[y,m,g[1]*s[0]+t,g[1]*s[1]+e]:[y,m]},ke=function(t,e,n){return e<=t&&t<=n||n<=t&&t<=e?t:t<=e&&e<=n||n<=e&&e<=t?e:n},Ce=function(t,e,n,r,i,a,o,s,u){var l=t-i,h=n-t,c=o-i,d=e-a,f=r-e,p=s-a,v=c*d-p*l,g=h*d-f*l,y=p*h-c*f;if(0!==y){var m=v/y,b=g/y,x=-.001;return x<=m&&m<=1.001&&x<=b&&b<=1.001||u?[t+m*h,e+m*f]:[]}return 0===v||0===g?ke(t,n,o)===o?[o,s]:ke(t,n,i)===i?[i,a]:ke(i,o,n)===n?[n,r]:[]:[]},Se=function(t,e,n,r,i,a,o,s){var u,l,h,c,d,f,p=[],v=new Array(n.length),g=!0;if(null==a&&(g=!1),g){for(var y=0;y<v.length/2;y++)v[2*y]=n[2*y]*a+r,v[2*y+1]=n[2*y+1]*o+i;if(s>0){var m=_e(v,-s);l=we(m)}else l=v}else l=n;for(var b=0;b<l.length/2;b++)h=l[2*b],c=l[2*b+1],b<l.length/2-1?(d=l[2*(b+1)],f=l[2*(b+1)+1]):(d=l[0],f=l[1]),0!==(u=Ce(t,e,r,i,h,c,d,f)).length&&p.push(u[0],u[1]);return p},Pe=function(t,e,n){var r=[t[0]-e[0],t[1]-e[1]],i=Math.sqrt(r[0]*r[0]+r[1]*r[1]),a=(i-n)/i;return a<0&&(a=1e-5),[e[0]+a*r[0],e[1]+a*r[1]]},Te=function(t,e){var n=Ie(t,e);return De(n)},De=function(t){for(var e,n,r=t.length/2,i=1/0,a=1/0,o=-1/0,s=-1/0,u=0;u<r;u++)e=t[2*u],n=t[2*u+1],i=Math.min(i,e),o=Math.max(o,e),a=Math.min(a,n),s=Math.max(s,n);for(var l=2/(o-i),h=2/(s-a),c=0;c<r;c++)e=t[2*c]=t[2*c]*l,n=t[2*c+1]=t[2*c+1]*h,i=Math.min(i,e),o=Math.max(o,e),a=Math.min(a,n),s=Math.max(s,n);if(a<-1)for(var d=0;d<r;d++)n=t[2*d+1]=t[2*d+1]+(-1-a);return t},Ie=function(t,e){var n=1/t*2*Math.PI,r=t%2==0?Math.PI/2+n/2:Math.PI/2;r+=e;for(var i,a=new Array(2*t),o=0;o<t;o++)i=o*n+r,a[2*o]=Math.cos(i),a[2*o+1]=Math.sin(-i);return a},Be=function(t,e){return Math.min(t/4,e/4,8)},Ne=function(t,e){return Math.min(t/10,e/10,8)},Oe=function(t,e){return{heightOffset:Math.min(15,.05*e),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}},Ae=Mt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),ze={pageRank:function(t){for(var e=Ae(t),n=e.dampingFactor,r=e.precision,i=e.iterations,a=e.weight,o=this._private.cy,s=this.byGroup(),u=s.nodes,l=s.edges,h=u.length,c=h*h,d=l.length,f=new Array(c),p=new Array(h),v=(1-n)/h,g=0;g<h;g++){for(var y=0;y<h;y++)f[g*h+y]=0;p[g]=0}for(var m=0;m<d;m++){var b=l[m],x=b.data("source"),w=b.data("target");if(x!==w){var _=u.indexOfId(x),M=u.indexOfId(w),E=a(b);f[M*h+_]+=E,p[_]+=E}}for(var k=1/h+v,C=0;C<h;C++)if(0===p[C])for(var S=0;S<h;S++)f[S*h+C]=k;else for(var P=0;P<h;P++){var T=P*h+C;f[T]=f[T]/p[C]+v}for(var D,I=new Array(h),B=new Array(h),N=0;N<h;N++)I[N]=1;for(var O=0;O<i;O++){for(var A=0;A<h;A++)B[A]=0;for(var z=0;z<h;z++)for(var L=0;L<h;L++){var R=z*h+L;B[z]+=f[R]*I[L]}ee(B),D=I,I=B,B=D;for(var j=0,q=0;q<h;q++){var F=D[q]-I[q];j+=F*F}if(j<r)break}return{rank:function(t){return t=o.collection(t)[0],I[u.indexOf(t)]}}}},Le=Mt({root:null,weight:function(t){return 1},directed:!1,alpha:0}),Re={degreeCentralityNormalized:function(t){t=Le(t);var e=this.cy(),n=this.nodes(),r=n.length;if(t.directed){for(var i={},a={},o=0,s=0,u=0;u<r;u++){var l=n[u],h=l.id();t.root=l;var c=this.degreeCentrality(t);o<c.indegree&&(o=c.indegree),s<c.outdegree&&(s=c.outdegree),i[h]=c.indegree,a[h]=c.outdegree}return{indegree:function(t){return 0==o?0:(b(t)&&(t=e.filter(t)),i[t.id()]/o)},outdegree:function(t){return 0===s?0:(b(t)&&(t=e.filter(t)),a[t.id()]/s)}}}for(var d={},f=0,p=0;p<r;p++){var v=n[p];t.root=v;var g=this.degreeCentrality(t);f<g.degree&&(f=g.degree),d[v.id()]=g.degree}return{degree:function(t){return 0===f?0:(b(t)&&(t=e.filter(t)),d[t.id()]/f)}}},degreeCentrality:function(t){t=Le(t);var e=this.cy(),n=this,r=t,i=r.root,a=r.weight,o=r.directed,s=r.alpha;if(i=e.collection(i)[0],o){for(var u=i.connectedEdges(),l=u.filter((function(t){return t.target().same(i)&&n.has(t)})),h=u.filter((function(t){return t.source().same(i)&&n.has(t)})),c=l.length,d=h.length,f=0,p=0,v=0;v<l.length;v++)f+=a(l[v]);for(var g=0;g<h.length;g++)p+=a(h[g]);return{indegree:Math.pow(c,1-s)*Math.pow(f,s),outdegree:Math.pow(d,1-s)*Math.pow(p,s)}}for(var y=i.connectedEdges().intersection(n),m=y.length,b=0,x=0;x<y.length;x++)b+=a(y[x]);return{degree:Math.pow(m,1-s)*Math.pow(b,s)}}};Re.dc=Re.degreeCentrality,Re.dcn=Re.degreeCentralityNormalised=Re.degreeCentralityNormalized;var je=Mt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),qe={closenessCentralityNormalized:function(t){for(var e=je(t),n=e.harmonic,r=e.weight,i=e.directed,a=this.cy(),o={},s=0,u=this.nodes(),l=this.floydWarshall({weight:r,directed:i}),h=0;h<u.length;h++){for(var c=0,d=u[h],f=0;f<u.length;f++)if(h!==f){var p=l.distance(d,u[f]);c+=n?1/p:p}n||(c=1/c),s<c&&(s=c),o[d.id()]=c}return{closeness:function(t){return 0==s?0:(t=b(t)?a.filter(t)[0].id():t.id(),o[t]/s)}}},closenessCentrality:function(t){var e=je(t),n=e.root,r=e.weight,i=e.directed,a=e.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:r,directed:i}),s=0,u=this.nodes(),l=0;l<u.length;l++){var h=u[l];if(!h.same(n)){var c=o.distanceTo(h);s+=a?1/c:c}}return a?s:1/s}};qe.cc=qe.closenessCentrality,qe.ccn=qe.closenessCentralityNormalised=qe.closenessCentralityNormalized;var Fe=Mt({weight:null,directed:!1}),Ve={betweennessCentrality:function(t){for(var e=Fe(t),n=e.directed,r=e.weight,i=null!=r,o=this.cy(),s=this.nodes(),u={},l={},h=0,c=function(t,e){l[t]=e,e>h&&(h=e)},d=function(t){return l[t]},f=0;f<s.length;f++){var p=s[f],v=p.id();u[v]=n?p.outgoers().nodes():p.openNeighborhood().nodes(),c(v,0)}for(var g=function(t){for(var e=s[t].id(),n=[],l={},h={},f={},p=new a((function(t,e){return f[t]-f[e]})),v=0;v<s.length;v++){var g=s[v].id();l[g]=[],h[g]=0,f[g]=1/0}for(h[e]=1,f[e]=0,p.push(e);!p.empty();){var y=p.pop();if(n.push(y),i)for(var m=0;m<u[y].length;m++){var b,x=u[y][m],w=o.getElementById(y);b=w.edgesTo(x).length>0?w.edgesTo(x)[0]:x.edgesTo(w)[0];var _=r(b);x=x.id(),f[x]>f[y]+_&&(f[x]=f[y]+_,p.nodes.indexOf(x)<0?p.push(x):p.updateItem(x),h[x]=0,l[x]=[]),f[x]==f[y]+_&&(h[x]=h[x]+h[y],l[x].push(y))}else for(var M=0;M<u[y].length;M++){var E=u[y][M].id();f[E]==1/0&&(p.push(E),f[E]=f[y]+1),f[E]==f[y]+1&&(h[E]=h[E]+h[y],l[E].push(y))}}for(var k={},C=0;C<s.length;C++)k[s[C].id()]=0;for(;n.length>0;)for(var S=n.pop(),P=0;P<l[S].length;P++){var T=l[S][P];k[T]=k[T]+h[T]/h[S]*(1+k[S]),S!=s[t].id()&&c(S,d(S)+k[S])}},y=0;y<s.length;y++)g(y);var m={betweenness:function(t){var e=o.collection(t).id();return d(e)},betweennessNormalized:function(t){if(0==h)return 0;var e=o.collection(t).id();return d(e)/h}};return m.betweennessNormalised=m.betweennessNormalized,m}};Ve.bc=Ve.betweennessCentrality;var We=Mt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(t){return 1}]}),Ge=function(t,e){for(var n=0,r=0;r<e.length;r++)n+=e[r](t);return n},Xe=function(t,e){for(var n,r=0;r<e;r++){n=0;for(var i=0;i<e;i++)n+=t[i*e+r];for(var a=0;a<e;a++)t[a*e+r]=t[a*e+r]/n}},Ye=function(t,e,n){for(var r=new Array(n*n),i=0;i<n;i++){for(var a=0;a<n;a++)r[i*n+a]=0;for(var o=0;o<n;o++)for(var s=0;s<n;s++)r[i*n+s]+=t[i*n+o]*e[o*n+s]}return r},Ue=function(t,e,n){for(var r=t.slice(0),i=1;i<n;i++)t=Ye(t,r,e);return t},He=function(t,e,n){for(var r=new Array(e*e),i=0;i<e*e;i++)r[i]=Math.pow(t[i],n);return Xe(r,e),r},Ze=function(t,e,n,r){for(var i=0;i<n;i++)if(Math.round(t[i]*Math.pow(10,r))/Math.pow(10,r)!=Math.round(e[i]*Math.pow(10,r))/Math.pow(10,r))return!1;return!0},Ke=function(t,e){for(var n=0;n<t.length;n++)if(!e[n]||t[n].id()!==e[n].id())return!1;return!0},$e=function(t){for(var e=this.nodes(),n=this.edges(),r=this.cy(),i=function(t){return We(t)}(t),a={},o=0;o<e.length;o++)a[e[o].id()]=o;for(var s,u=e.length,l=u*u,h=new Array(l),c=0;c<l;c++)h[c]=0;for(var d=0;d<n.length;d++){var f=n[d],p=a[f.source().id()],v=a[f.target().id()],g=Ge(f,i.attributes);h[p*u+v]+=g,h[v*u+p]+=g}!function(t,e,n){for(var r=0;r<e;r++)t[r*e+r]=n}(h,u,i.multFactor),Xe(h,u);for(var y=!0,m=0;y&&m<i.maxIterations;)y=!1,s=Ue(h,u,i.expandFactor),h=He(s,u,i.inflateFactor),Ze(h,s,l,4)||(y=!0),m++;var b=function(t,e,n,r){for(var i=[],a=0;a<e;a++){for(var o=[],s=0;s<e;s++)Math.round(1e3*t[a*e+s])/1e3>0&&o.push(n[s]);0!==o.length&&i.push(r.collection(o))}return i}(h,u,e,r);return b=function(t){for(var e=0;e<t.length;e++)for(var n=0;n<t.length;n++)e!=n&&Ke(t[e],t[n])&&t.splice(n,1);return t}(b),b},Qe={markovClustering:$e,mcl:$e},Je=function(t){return t},tn=function(t,e){return Math.abs(e-t)},en=function(t,e,n){return t+tn(e,n)},nn=function(t,e,n){return t+Math.pow(n-e,2)},rn=function(t){return Math.sqrt(t)},an=function(t,e,n){return Math.max(t,tn(e,n))},on=function(t,e,n,r,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Je,o=r,s=0;s<t;s++)o=i(o,e(s),n(s));return a(o)},sn={euclidean:function(t,e,n){return t>=2?on(t,e,n,0,nn,rn):on(t,e,n,0,en)},squaredEuclidean:function(t,e,n){return on(t,e,n,0,nn)},manhattan:function(t,e,n){return on(t,e,n,0,en)},max:function(t,e,n){return on(t,e,n,-1/0,an)}};function un(t,e,n,r,i,a){var o;return o=x(t)?t:sn[t]||sn.euclidean,0===e&&x(t)?o(i,a):o(e,n,r,i,a)}sn["squared-euclidean"]=sn.squaredEuclidean,sn.squaredeuclidean=sn.squaredEuclidean;var ln=Mt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),hn=function(t){return ln(t)},cn=function(t,e,n,r,i){var a="kMedoids"!==i?function(t){return n[t]}:function(t){return r[t](n)},o=n,s=e;return un(t,r.length,a,(function(t){return r[t](e)}),o,s)},dn=function(t,e,n){for(var r=n.length,i=new Array(r),a=new Array(r),o=new Array(e),s=null,u=0;u<r;u++)i[u]=t.min(n[u]).value,a[u]=t.max(n[u]).value;for(var l=0;l<e;l++){s=[];for(var h=0;h<r;h++)s[h]=Math.random()*(a[h]-i[h])+i[h];o[l]=s}return o},fn=function(t,e,n,r,i){for(var a=1/0,o=0,s=0;s<e.length;s++){var u=cn(n,t,e[s],r,i);u<a&&(a=u,o=s)}return o},pn=function(t,e,n){for(var r=[],i=null,a=0;a<e.length;a++)n[(i=e[a]).id()]===t&&r.push(i);return r},vn=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)if(Math.abs(t[r][i]-e[r][i])>n)return!1;return!0},gn=function(t,e,n){for(var r=0;r<n;r++)if(t===e[r])return!0;return!1},yn=function(t,e){var n=new Array(e);if(t.length<50)for(var r=0;r<e;r++){for(var i=t[Math.floor(Math.random()*t.length)];gn(i,n,r);)i=t[Math.floor(Math.random()*t.length)];n[r]=i}else for(var a=0;a<e;a++)n[a]=t[Math.floor(Math.random()*t.length)];return n},mn=function(t,e,n){for(var r=0,i=0;i<e.length;i++)r+=cn("manhattan",e[i],t,n,"kMedoids");return r},bn=function(t,e,n,r,i){for(var a,o,s=0;s<e.length;s++)for(var u=0;u<t.length;u++)r[s][u]=Math.pow(n[s][u],i.m);for(var l=0;l<t.length;l++)for(var h=0;h<i.attributes.length;h++){a=0,o=0;for(var c=0;c<e.length;c++)a+=r[c][l]*i.attributes[h](e[c]),o+=r[c][l];t[l][h]=a/o}},xn=function(t,e,n,r,i){for(var a=0;a<t.length;a++)e[a]=t[a].slice();for(var o,s,u,l=2/(i.m-1),h=0;h<n.length;h++)for(var c=0;c<r.length;c++){o=0;for(var d=0;d<n.length;d++)s=cn(i.distance,r[c],n[h],i.attributes,"cmeans"),u=cn(i.distance,r[c],n[d],i.attributes,"cmeans"),o+=Math.pow(s/u,l);t[c][h]=1/o}},wn=function(t){var e,n,r,i,a,o=this.cy(),s=this.nodes(),u=hn(t);i=new Array(s.length);for(var l=0;l<s.length;l++)i[l]=new Array(u.k);r=new Array(s.length);for(var h=0;h<s.length;h++)r[h]=new Array(u.k);for(var c=0;c<s.length;c++){for(var d=0,f=0;f<u.k;f++)r[c][f]=Math.random(),d+=r[c][f];for(var p=0;p<u.k;p++)r[c][p]=r[c][p]/d}n=new Array(u.k);for(var v=0;v<u.k;v++)n[v]=new Array(u.attributes.length);a=new Array(s.length);for(var g=0;g<s.length;g++)a[g]=new Array(u.k);for(var y=!0,m=0;y&&m<u.maxIterations;)y=!1,bn(n,s,r,a,u),xn(r,i,n,s,u),vn(r,i,u.sensitivityThreshold)||(y=!0),m++;return e=function(t,e,n,r){for(var i,a,o=new Array(n.k),s=0;s<o.length;s++)o[s]=[];for(var u=0;u<e.length;u++){i=-1/0,a=-1;for(var l=0;l<e[0].length;l++)e[u][l]>i&&(i=e[u][l],a=l);o[a].push(t[u])}for(var h=0;h<o.length;h++)o[h]=r.collection(o[h]);return o}(s,r,u,o),{clusters:e,degreeOfMembership:r}},_n={kMeans:function(t){var e,n=this.cy(),r=this.nodes(),i=null,a=hn(t),s=new Array(a.k),u={};e=a.testMode?"number"==typeof a.testCentroids?dn(r,a.k,a.attributes):"object"===o(a.testCentroids)?a.testCentroids:dn(r,a.k,a.attributes):dn(r,a.k,a.attributes);for(var l,h,c,d=!0,f=0;d&&f<a.maxIterations;){for(var p=0;p<r.length;p++)u[(i=r[p]).id()]=fn(i,e,a.distance,a.attributes,"kMeans");d=!1;for(var v=0;v<a.k;v++){var g=pn(v,r,u);if(0!==g.length){for(var y=a.attributes.length,m=e[v],b=new Array(y),x=new Array(y),w=0;w<y;w++){x[w]=0;for(var _=0;_<g.length;_++)i=g[_],x[w]+=a.attributes[w](i);b[w]=x[w]/g.length,l=b[w],h=m[w],c=a.sensitivityThreshold,Math.abs(h-l)<=c||(d=!0)}e[v]=b,s[v]=n.collection(g)}}f++}return s},kMedoids:function(t){var e,n,r=this.cy(),i=this.nodes(),a=null,s=hn(t),u=new Array(s.k),l={},h=new Array(s.k);s.testMode?"number"==typeof s.testCentroids||(e="object"===o(s.testCentroids)?s.testCentroids:yn(i,s.k)):e=yn(i,s.k);for(var c=!0,d=0;c&&d<s.maxIterations;){for(var f=0;f<i.length;f++)l[(a=i[f]).id()]=fn(a,e,s.distance,s.attributes,"kMedoids");c=!1;for(var p=0;p<e.length;p++){var v=pn(p,i,l);if(0!==v.length){h[p]=mn(e[p],v,s.attributes);for(var g=0;g<v.length;g++)(n=mn(v[g],v,s.attributes))<h[p]&&(h[p]=n,e[p]=v[g],c=!0);u[p]=r.collection(v)}}d++}return u},fuzzyCMeans:wn,fcm:wn},Mn=Mt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),En={single:"min",complete:"max"},kn=function(t,e,n,r,i){for(var a,o=0,s=1/0,u=i.attributes,l=function(t,e){return un(i.distance,u.length,(function(e){return u[e](t)}),(function(t){return u[t](e)}),t,e)},h=0;h<t.length;h++){var c=t[h].key,d=n[c][r[c]];d<s&&(o=c,s=d)}if("threshold"===i.mode&&s>=i.threshold||"dendrogram"===i.mode&&1===t.length)return!1;var f,p=e[o],v=e[r[o]];f="dendrogram"===i.mode?{left:p,right:v,key:p.key}:{value:p.value.concat(v.value),key:p.key},t[p.index]=f,t.splice(v.index,1),e[p.key]=f;for(var g=0;g<t.length;g++){var y=t[g];p.key===y.key?a=1/0:"min"===i.linkage?(a=n[p.key][y.key],n[p.key][y.key]>n[v.key][y.key]&&(a=n[v.key][y.key])):"max"===i.linkage?(a=n[p.key][y.key],n[p.key][y.key]<n[v.key][y.key]&&(a=n[v.key][y.key])):a="mean"===i.linkage?(n[p.key][y.key]*p.size+n[v.key][y.key]*v.size)/(p.size+v.size):"dendrogram"===i.mode?l(y.value,p.value):l(y.value[0],p.value[0]),n[p.key][y.key]=n[y.key][p.key]=a}for(var m=0;m<t.length;m++){var b=t[m].key;if(r[b]===p.key||r[b]===v.key){for(var x=b,w=0;w<t.length;w++){var _=t[w].key;n[b][_]<n[b][x]&&(x=_)}r[b]=x}t[m].index=m}return p.key=v.key=p.index=v.index=null,!0},Cn=function t(e,n,r){e&&(e.value?n.push(e.value):(e.left&&t(e.left,n),e.right&&t(e.right,n)))},Sn=function t(e,n){if(!e)return"";if(e.left&&e.right){var r=t(e.left,n),i=t(e.right,n),a=n.add({group:"nodes",data:{id:r+","+i}});return n.add({group:"edges",data:{source:r,target:a.id()}}),n.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}return e.value?e.value.id():void 0},Pn=function t(e,n,r){if(!e)return[];var i=[],a=[],o=[];return 0===n?(e.left&&Cn(e.left,i),e.right&&Cn(e.right,a),o=i.concat(a),[r.collection(o)]):1===n?e.value?[r.collection(e.value)]:(e.left&&Cn(e.left,i),e.right&&Cn(e.right,a),[r.collection(i),r.collection(a)]):e.value?[r.collection(e.value)]:(e.left&&(i=t(e.left,n-1,r)),e.right&&(a=t(e.right,n-1,r)),i.concat(a))},Tn=function(t){for(var e=this.cy(),n=this.nodes(),r=function(t){var e=Mn(t),n=En[e.linkage];return null!=n&&(e.linkage=n),e}(t),i=r.attributes,a=function(t,e){return un(r.distance,i.length,(function(e){return i[e](t)}),(function(t){return i[t](e)}),t,e)},o=[],s=[],u=[],l=[],h=0;h<n.length;h++){var c={value:"dendrogram"===r.mode?n[h]:[n[h]],key:h,index:h};o[h]=c,l[h]=c,s[h]=[],u[h]=0}for(var d=0;d<o.length;d++)for(var f=0;f<=d;f++){var p;p="dendrogram"===r.mode?d===f?1/0:a(o[d].value,o[f].value):d===f?1/0:a(o[d].value[0],o[f].value[0]),s[d][f]=p,s[f][d]=p,p<s[d][u[d]]&&(u[d]=f)}for(var v,g=kn(o,l,s,u,r);g;)g=kn(o,l,s,u,r);return"dendrogram"===r.mode?(v=Pn(o[0],r.dendrogramDepth,e),r.addDendrogram&&Sn(o[0],e)):(v=new Array(o.length),o.forEach((function(t,n){t.key=t.index=null,v[n]=e.collection(t.value)}))),v},Dn={hierarchicalClustering:Tn,hca:Tn},In=Mt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Bn=function(t,e,n,r){var i=function(t,e){return r[e](t)};return-un(t,r.length,(function(t){return i(e,t)}),(function(t){return i(n,t)}),e,n)},Nn=function(t,e,n){for(var r=[],i=0;i<t;i++){for(var a=-1,o=-1/0,s=0;s<n.length;s++){var u=n[s];e[i*t+u]>o&&(a=u,o=e[i*t+u])}a>0&&r.push(a)}for(var l=0;l<n.length;l++)r[n[l]]=n[l];return r},On=function(t){for(var e,n,r,i,a,o,s=this.cy(),u=this.nodes(),l=function(t){var e=t.damping,n=t.preference;.5<=e&&e<1||gt("Damping must range on [0.5, 1).  Got: ".concat(e));var r=["median","mean","min","max"];return r.some((function(t){return t===n}))||M(n)||gt("Preference must be one of [".concat(r.map((function(t){return"'".concat(t,"'")})).join(", "),"] or a number.  Got: ").concat(n)),In(t)}(t),h={},c=0;c<u.length;c++)h[u[c].id()]=c;n=(e=u.length)*e,r=new Array(n);for(var d=0;d<n;d++)r[d]=-1/0;for(var f=0;f<e;f++)for(var p=0;p<e;p++)f!==p&&(r[f*e+p]=Bn(l.distance,u[f],u[p],l.attributes));i=function(t,e){var n;return n="median"===e?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?(n<t.length&&t.splice(n,t.length-n),e>0&&t.splice(0,e)):t=t.slice(e,n);for(var a=0,o=t.length-1;o>=0;o--){var s=t[o];i?isFinite(s)||(t[o]=-1/0,a++):t.splice(o,1)}r&&t.sort((function(t,e){return t-e}));var u=t.length,l=Math.floor(u/2);return u%2!=0?t[l+1+a]:(t[l-1+a]+t[l+a])/2}(t):"mean"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=0,i=0,a=e;a<n;a++){var o=t[a];isFinite(o)&&(r+=o,i++)}return r/i}(t):"min"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=1/0,i=e;i<n;i++){var a=t[i];isFinite(a)&&(r=Math.min(a,r))}return r}(t):"max"===e?function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=-1/0,i=e;i<n;i++){var a=t[i];isFinite(a)&&(r=Math.max(a,r))}return r}(t):e,n}(r,l.preference);for(var v=0;v<e;v++)r[v*e+v]=i;a=new Array(n);for(var g=0;g<n;g++)a[g]=0;o=new Array(n);for(var y=0;y<n;y++)o[y]=0;for(var m=new Array(e),b=new Array(e),x=new Array(e),w=0;w<e;w++)m[w]=0,b[w]=0,x[w]=0;for(var _,E=new Array(e*l.minIterations),k=0;k<E.length;k++)E[k]=0;for(_=0;_<l.maxIterations;_++){for(var C=0;C<e;C++){for(var S=-1/0,P=-1/0,T=-1,D=0,I=0;I<e;I++)m[I]=a[C*e+I],(D=o[C*e+I]+r[C*e+I])>=S?(P=S,S=D,T=I):D>P&&(P=D);for(var B=0;B<e;B++)a[C*e+B]=(1-l.damping)*(r[C*e+B]-S)+l.damping*m[B];a[C*e+T]=(1-l.damping)*(r[C*e+T]-P)+l.damping*m[T]}for(var N=0;N<e;N++){for(var O=0,A=0;A<e;A++)m[A]=o[A*e+N],b[A]=Math.max(0,a[A*e+N]),O+=b[A];O-=b[N],b[N]=a[N*e+N],O+=b[N];for(var z=0;z<e;z++)o[z*e+N]=(1-l.damping)*Math.min(0,O-b[z])+l.damping*m[z];o[N*e+N]=(1-l.damping)*(O-b[N])+l.damping*m[N]}for(var L=0,R=0;R<e;R++){var j=o[R*e+R]+a[R*e+R]>0?1:0;E[_%l.minIterations*e+R]=j,L+=j}if(L>0&&(_>=l.minIterations-1||_==l.maxIterations-1)){for(var q=0,F=0;F<e;F++){x[F]=0;for(var V=0;V<l.minIterations;V++)x[F]+=E[V*e+F];0!==x[F]&&x[F]!==l.minIterations||q++}if(q===e)break}}for(var W=function(t,e,n){for(var r=[],i=0;i<t;i++)e[i*t+i]+n[i*t+i]>0&&r.push(i);return r}(e,a,o),G=function(t,e,n){for(var r=Nn(t,e,n),i=0;i<n.length;i++){for(var a=[],o=0;o<r.length;o++)r[o]===n[i]&&a.push(o);for(var s=-1,u=-1/0,l=0;l<a.length;l++){for(var h=0,c=0;c<a.length;c++)h+=e[a[c]*t+a[l]];h>u&&(s=l,u=h)}n[i]=a[s]}return Nn(t,e,n)}(e,r,W),X={},Y=0;Y<W.length;Y++)X[W[Y]]=[];for(var U=0;U<u.length;U++){var H=G[h[u[U].id()]];null!=H&&X[H].push(u[U])}for(var Z=new Array(W.length),K=0;K<W.length;K++)Z[K]=s.collection(X[W[K]]);return Z},An={affinityPropagation:On,ap:On},zn=Mt({root:void 0,directed:!1}),Ln=function(){var t=this,e={},n=0,r=0,i=[],a=[],o={},s=function s(u,l,h){u===h&&(r+=1),e[l]={id:n,low:n++,cutVertex:!1};var c,d,f,p,v=t.getElementById(l).connectedEdges().intersection(t);0===v.size()?i.push(t.spawn(t.getElementById(l))):v.forEach((function(n){c=n.source().id(),d=n.target().id(),(f=c===l?d:c)!==h&&(p=n.id(),o[p]||(o[p]=!0,a.push({x:l,y:f,edge:n})),f in e?e[l].low=Math.min(e[l].low,e[f].id):(s(u,f,l),e[l].low=Math.min(e[l].low,e[f].low),e[l].id<=e[f].low&&(e[l].cutVertex=!0,function(n,r){for(var o=a.length-1,s=[],u=t.spawn();a[o].x!=n||a[o].y!=r;)s.push(a.pop().edge),o--;s.push(a.pop().edge),s.forEach((function(n){var r=n.connectedNodes().intersection(t);u.merge(n),r.forEach((function(n){var r=n.id(),i=n.connectedEdges().intersection(t);u.merge(n),e[r].cutVertex?u.merge(i.filter((function(t){return t.isLoop()}))):u.merge(i)}))})),i.push(u)}(l,f))))}))};t.forEach((function(t){if(t.isNode()){var n=t.id();n in e||(r=0,s(n,n),e[n].cutVertex=r>1)}}));var u=Object.keys(e).filter((function(t){return e[t].cutVertex})).map((function(e){return t.getElementById(e)}));return{cut:t.spawn(u),components:i}},Rn=function(){var t=this,e={},n=0,r=[],i=[],a=t.spawn(t),o=function o(s){if(i.push(s),e[s]={index:n,low:n++,explored:!1},t.getElementById(s).connectedEdges().intersection(t).forEach((function(t){var n=t.target().id();n!==s&&(n in e||o(n),e[n].explored||(e[s].low=Math.min(e[s].low,e[n].low)))})),e[s].index===e[s].low){for(var u=t.spawn();;){var l=i.pop();if(u.merge(t.getElementById(l)),e[l].low=e[s].index,e[l].explored=!0,l===s)break}var h=u.edgesWith(u),c=u.merge(h);r.push(c),a=a.difference(c)}};return t.forEach((function(t){if(t.isNode()){var n=t.id();n in e||o(n)}})),{cut:a,components:r}},jn={};[Nt,At,zt,Rt,qt,Vt,Yt,ze,Re,qe,Ve,Qe,_n,Dn,An,{hierholzer:function(t){if(!_(t)){var e=arguments;t={root:e[0],directed:e[1]}}var n,r,i,a=zn(t),o=a.root,s=a.directed,u=this,l=!1;o&&(i=b(o)?this.filter(o)[0].id():o[0].id());var h={},c={};s?u.forEach((function(t){var e=t.id();if(t.isNode()){var i=t.indegree(!0),a=t.outdegree(!0),o=i-a,s=a-i;1==o?n?l=!0:n=e:1==s?r?l=!0:r=e:(s>1||o>1)&&(l=!0),h[e]=[],t.outgoers().forEach((function(t){t.isEdge()&&h[e].push(t.id())}))}else c[e]=[void 0,t.target().id()]})):u.forEach((function(t){var e=t.id();t.isNode()?(t.degree(!0)%2&&(n?r?l=!0:r=e:n=e),h[e]=[],t.connectedEdges().forEach((function(t){return h[e].push(t.id())}))):c[e]=[t.source().id(),t.target().id()]}));var d={found:!1,trail:void 0};if(l)return d;if(r&&n)if(s){if(i&&r!=i)return d;i=r}else{if(i&&r!=i&&n!=i)return d;i||(i=r)}else i||(i=u[0].id());var f=function(t){for(var e,n,r,i=t,a=[t];h[i].length;)e=h[i].shift(),n=c[e][0],i!=(r=c[e][1])?(h[r]=h[r].filter((function(t){return t!=e})),i=r):s||i==n||(h[n]=h[n].filter((function(t){return t!=e})),i=n),a.unshift(e),a.unshift(i);return a},p=[],v=[];for(v=f(i);1!=v.length;)0==h[v[0]].length?(p.unshift(u.getElementById(v.shift())),p.unshift(u.getElementById(v.shift()))):v=f(v.shift()).concat(v);for(var g in p.unshift(u.getElementById(v.shift())),h)if(h[g].length)return d;return d.found=!0,d.trail=this.spawn(p),d}},{hopcroftTarjanBiconnected:Ln,htbc:Ln,htb:Ln,hopcroftTarjanBiconnectedComponents:Ln},{tarjanStronglyConnected:Rn,tsc:Rn,tscc:Rn,tarjanStronglyConnectedComponents:Rn}].forEach((function(t){W(jn,t)}));var qn=function t(e){if(!(this instanceof t))return new t(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};qn.prototype={fulfill:function(t){return Fn(this,1,"fulfillValue",t)},reject:function(t){return Fn(this,2,"rejectReason",t)},then:function(t,e){var n=this,r=new qn;return n.onFulfilled.push(Gn(t,r,"fulfill")),n.onRejected.push(Gn(e,r,"reject")),Vn(n),r.proxy}};var Fn=function(t,e,n,r){return 0===t.state&&(t.state=e,t[n]=r,Vn(t)),t},Vn=function(t){1===t.state?Wn(t,"onFulfilled",t.fulfillValue):2===t.state&&Wn(t,"onRejected",t.rejectReason)},Wn=function(t,e,n){if(0!==t[e].length){var r=t[e];t[e]=[];var i=function(){for(var t=0;t<r.length;t++)r[t](n)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},Gn=function(t,e,n){return function(r){if("function"!=typeof t)e[n].call(e,r);else{var i;try{i=t(r)}catch(t){return void e.reject(t)}Xn(e,i)}}},Xn=function t(e,n){if(e!==n&&e.proxy!==n){var r;if("object"===o(n)&&null!==n||"function"==typeof n)try{r=n.then}catch(t){return void e.reject(t)}if("function"!=typeof r)e.fulfill(n);else{var i=!1;try{r.call(n,(function(r){i||(i=!0,r===n?e.reject(new TypeError("circular thenable chain")):t(e,r))}),(function(t){i||(i=!0,e.reject(t))}))}catch(t){i||e.reject(t)}}}else e.reject(new TypeError("cannot resolve promise with itself"))};qn.all=function(t){return new qn((function(e,n){for(var r=new Array(t.length),i=0,a=function(n,a){r[n]=a,++i===t.length&&e(r)},o=0;o<t.length;o++)!function(e){var r=t[e];null!=r&&null!=r.then?r.then((function(t){a(e,t)}),(function(t){n(t)})):a(e,r)}(o)}))},qn.resolve=function(t){return new qn((function(e,n){e(t)}))},qn.reject=function(t){return new qn((function(e,n){n(t)}))};var Yn="undefined"!=typeof Promise?Promise:qn,Un=function(t,e,n){var r=P(t),i=!r,a=this._private=W({duration:1e3},e,n);if(a.target=t,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&x(a.complete)&&a.completes.push(a.complete),i){var o=t.position();a.startPosition=a.startPosition||{x:o.x,y:o.y},a.startStyle=a.startStyle||t.cy().style().getAnimationStartStyle(t,a.style)}if(r){var s=t.pan();a.startPan={x:s.x,y:s.y},a.startZoom=t.zoom()}this.length=1,this[0]=this},Hn=Un.prototype;W(Hn,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var e=t.target._private.animation;(t.queue?e.queue:e.current).push(this),k(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return 1===t.progress&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var e=this._private;return void 0===t?e.progress*e.duration:this.progress(t/e.duration)},progress:function(t){var e=this._private,n=e.playing;return void 0===t?e.progress:(n&&this.pause(),e.progress=t,e.started=!1,n&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var t=this._private,e=t.playing;e&&this.pause(),t.progress=1-t.progress,t.started=!1;var n=function(e,n){var r=t[e];null!=r&&(t[e]=t[n],t[n]=r)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),t.style)for(var r=0;r<t.style.length;r++){var i=t.style[r],a=i.name,o=t.startStyle[a];t.startStyle[a]=i,t.style[r]=o}return e&&this.play(),this},promise:function(t){var e,n=this._private;return e="frame"===t?n.frames:n.completes,new Yn((function(t,n){e.push((function(){t()}))}))}}),Hn.complete=Hn.completed,Hn.run=Hn.play,Hn.running=Hn.playing;var Zn={animated:function(){return function(){var t=this,e=void 0!==t.length?t:[t];if(!(this._private.cy||this).styleEnabled())return!1;var n=e[0];return n?n._private.animation.current.length>0:void 0}},clearQueue:function(){return function(){var t=this,e=void 0!==t.length?t:[t];if(!(this._private.cy||this).styleEnabled())return this;for(var n=0;n<e.length;n++)e[n]._private.animation.queue=[];return this}},delay:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animate({delay:t,duration:t,complete:e}):this}},delayAnimation:function(){return function(t,e){return(this._private.cy||this).styleEnabled()?this.animation({delay:t,duration:t,complete:e}):this}},animation:function(){return function(t,e){var n=this,r=void 0!==n.length,i=r?n:[n],a=this._private.cy||this,o=!r,s=!o;if(!a.styleEnabled())return this;var u=a.style();if(t=W({},t,e),0===Object.keys(t).length)return new Un(i[0],t);switch(void 0===t.duration&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200}if(s&&(t.style=u.getPropsList(t.style||t.css),t.css=void 0),s&&null!=t.renderedPosition){var l=t.renderedPosition,h=a.pan(),c=a.zoom();t.position=Ht(l,c,h)}if(o&&null!=t.panBy){var d=t.panBy,f=a.pan();t.pan={x:f.x+d.x,y:f.y+d.y}}var p=t.center||t.centre;if(o&&null!=p){var v=a.getCenterPan(p.eles,t.zoom);null!=v&&(t.pan=v)}if(o&&null!=t.fit){var g=t.fit,y=a.getFitViewport(g.eles||g.boundingBox,g.padding);null!=y&&(t.pan=y.pan,t.zoom=y.zoom)}if(o&&_(t.zoom)){var m=a.getZoomedViewport(t.zoom);null!=m?(m.zoomed&&(t.zoom=m.zoom),m.panned&&(t.pan=m.pan)):t.zoom=null}return new Un(i[0],t)}},animate:function(){return function(t,e){var n=this,r=void 0!==n.length?n:[n];if(!(this._private.cy||this).styleEnabled())return this;e&&(t=W({},t,e));for(var i=0;i<r.length;i++){var a=r[i],o=a.animated()&&(void 0===t.queue||t.queue);a.animation(t,o?{queue:!0}:void 0).play()}return this}},stop:function(){return function(t,e){var n=this,r=void 0!==n.length?n:[n],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var a=0;a<r.length;a++){for(var o=r[a]._private,s=o.animation.current,u=0;u<s.length;u++){var l=s[u]._private;e&&(l.duration=0)}t&&(o.animation.queue=[]),e||(o.animation.current=[])}return i.notify("draw"),this}}},Kn={data:function(t){return t=W({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(t){},beforeSet:function(t,e){},onSet:function(t){},canSet:function(t){return!0}},t),function(e,n){var r=t,i=this,a=void 0!==i.length,o=a?i:[i],s=a?i[0]:i;if(b(e)){var u;if(r.allowGetting&&void 0===n)return s&&(r.beforeGet(s),u=s._private[r.field][e]),u;if(r.allowSetting&&void 0!==n&&!r.immutableKeys[e]){var l=h({},e,n);r.beforeSet(i,l);for(var c=0,d=o.length;c<d;c++){var f=o[c];r.canSet(f)&&(f._private[r.field][e]=n)}r.updateStyle&&i.updateStyle(),r.onSet(i),r.settingTriggersEvent&&i[r.triggerFnName](r.settingEvent)}}else if(r.allowSetting&&_(e)){var p,v,g=e,y=Object.keys(g);r.beforeSet(i,g);for(var m=0;m<y.length;m++)if(v=g[p=y[m]],!r.immutableKeys[p])for(var w=0;w<o.length;w++){var M=o[w];r.canSet(M)&&(M._private[r.field][p]=v)}r.updateStyle&&i.updateStyle(),r.onSet(i),r.settingTriggersEvent&&i[r.triggerFnName](r.settingEvent)}else if(r.allowBinding&&x(e)){var E=e;i.on(r.bindingEvent,E)}else if(r.allowGetting&&void 0===e){var k;return s&&(r.beforeGet(s),k=s._private[r.field]),k}return i}},removeData:function(t){return t=W({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},t),function(e){var n=t,r=this,i=void 0!==r.length?r:[r];if(b(e)){for(var a=e.split(/\s+/),o=a.length,s=0;s<o;s++){var u=a[s];if(!D(u)&&!n.immutableKeys[u])for(var l=0,h=i.length;l<h;l++)i[l]._private[n.field][u]=void 0}n.triggerEvent&&r[n.triggerFnName](n.event)}else if(void 0===e){for(var c=0,d=i.length;c<d;c++)for(var f=i[c]._private[n.field],p=Object.keys(f),v=0;v<p.length;v++){var g=p[v];!n.immutableKeys[g]&&(f[g]=void 0)}n.triggerEvent&&r[n.triggerFnName](n.event)}return r}}},$n={eventAliasesOn:function(t){var e=t;e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(t,e){var n=this,r=Array.prototype.slice.call(arguments,0);return new Yn((function(t,e){var i=r.concat([function(e){n.off.apply(n,a),t(e)}]),a=i.concat([]);n.on.apply(n,i)}))}}},Qn={};[Zn,Kn,$n].forEach((function(t){W(Qn,t)}));var Jn={animate:Qn.animate(),animation:Qn.animation(),animated:Qn.animated(),clearQueue:Qn.clearQueue(),delay:Qn.delay(),delayAnimation:Qn.delayAnimation(),stop:Qn.stop()},tr={classes:function(t){var e=this;if(void 0===t){var n=[];return e[0]._private.classes.forEach((function(t){return n.push(t)})),n}w(t)||(t=(t||"").match(/\S+/g)||[]);for(var r=[],i=new Dt(t),a=0;a<e.length;a++){for(var o=e[a],s=o._private,u=s.classes,l=!1,h=0;h<t.length;h++){var c=t[h];if(!u.has(c)){l=!0;break}}l||(l=u.size!==t.length),l&&(s.classes=i,r.push(o))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),e},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var e=this[0];return null!=e&&e._private.classes.has(t)},toggleClass:function(t,e){w(t)||(t=t.match(/\S+/g)||[]);for(var n=this,r=void 0===e,i=[],a=0,o=n.length;a<o;a++)for(var s=n[a],u=s._private.classes,l=!1,h=0;h<t.length;h++){var c=t[h],d=u.has(c),f=!1;e||r&&!d?(u.add(c),f=!0):(!e||r&&d)&&(u.delete(c),f=!0),!l&&f&&(i.push(s),l=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,e){var n=this;if(null==e)e=250;else if(0===e)return n;return n.addClass(t),setTimeout((function(){n.removeClass(t)}),e),n}};tr.className=tr.classNames=tr.classes;var er={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:L,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};er.variable="(?:[\\w-]|(?:\\\\"+er.metaChar+"))+",er.value=er.string+"|"+er.number,er.className=er.variable,er.id=er.variable,function(){var t,e,n;for(t=er.comparatorOp.split("|"),n=0;n<t.length;n++)e=t[n],er.comparatorOp+="|@"+e;for(t=er.comparatorOp.split("|"),n=0;n<t.length;n++)(e=t[n]).indexOf("!")>=0||"="!==e&&(er.comparatorOp+="|\\!"+e)}();var nr=20,rr=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort((function(t,e){return function(t,e){return-1*V(t,e)}(t.selector,e.selector)})),ir=function(){for(var t,e={},n=0;n<rr.length;n++)e[(t=rr[n]).selector]=t.matches;return e}(),ar="("+rr.map((function(t){return t.selector})).join("|")+")",or=function(t){return t.replace(new RegExp("\\\\("+er.metaChar+")","g"),(function(t,e){return e}))},sr=function(t,e,n){t[t.length-1]=n},ur=[{name:"group",query:!0,regex:"("+er.group+")",populate:function(t,e,n){var r=c(n,1)[0];e.checks.push({type:0,value:"*"===r?r:r+"s"})}},{name:"state",query:!0,regex:ar,populate:function(t,e,n){var r=c(n,1)[0];e.checks.push({type:7,value:r})}},{name:"id",query:!0,regex:"\\#("+er.id+")",populate:function(t,e,n){var r=c(n,1)[0];e.checks.push({type:8,value:or(r)})}},{name:"className",query:!0,regex:"\\.("+er.className+")",populate:function(t,e,n){var r=c(n,1)[0];e.checks.push({type:9,value:or(r)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+er.variable+")\\s*\\]",populate:function(t,e,n){var r=c(n,1)[0];e.checks.push({type:4,field:or(r)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+er.variable+")\\s*("+er.comparatorOp+")\\s*("+er.value+")\\s*\\]",populate:function(t,e,n){var r=c(n,3),i=r[0],a=r[1],o=r[2];o=null!=new RegExp("^"+er.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),e.checks.push({type:3,field:or(i),operator:a,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+er.boolOp+")\\s*("+er.variable+")\\s*\\]",populate:function(t,e,n){var r=c(n,2),i=r[0],a=r[1];e.checks.push({type:5,field:or(a),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+er.meta+")\\s*("+er.comparatorOp+")\\s*("+er.number+")\\s*\\]\\]",populate:function(t,e,n){var r=c(n,3),i=r[0],a=r[1],o=r[2];e.checks.push({type:6,field:or(i),operator:a,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:er.separator,populate:function(t,e){var n=t.currentSubject,r=t.edgeCount,i=t.compoundCount,a=t[t.length-1];return null!=n&&(a.subject=n,t.currentSubject=null),a.edgeCount=r,a.compoundCount=i,t.edgeCount=0,t.compoundCount=0,t[t.length++]={checks:[]}}},{name:"directedEdge",separator:!0,regex:er.directedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r=e,i={checks:[]};return n.checks.push({type:11,source:r,target:i}),sr(t,0,n),t.edgeCount++,i}var a={checks:[]},o=e,s={checks:[]};return a.checks.push({type:12,source:o,target:s}),sr(t,0,a),t.edgeCount++,s}},{name:"undirectedEdge",separator:!0,regex:er.undirectedEdge,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r=e,i={checks:[]};return n.checks.push({type:10,nodes:[r,i]}),sr(t,0,n),t.edgeCount++,i}var a={checks:[]},o=e,s={checks:[]};return a.checks.push({type:14,node:o,neighbor:s}),sr(t,0,a),s}},{name:"child",separator:!0,regex:er.child,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]},i=t[t.length-1];return n.checks.push({type:15,parent:i,child:r}),sr(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var a={checks:[]},o=t[t.length-1],s={checks:[]},u={checks:[]},l={checks:[]},h={checks:[]};return a.checks.push({type:19,left:o,right:s,subject:u}),u.checks=e.checks,e.checks=[{type:nr}],h.checks.push({type:nr}),s.checks.push({type:17,parent:h,child:l}),sr(t,0,a),t.currentSubject=u,t.compoundCount++,l}var c={checks:[]},d={checks:[]},f=[{type:17,parent:c,child:d}];return c.checks=e.checks,e.checks=f,t.compoundCount++,d}},{name:"descendant",separator:!0,regex:er.descendant,populate:function(t,e){if(null==t.currentSubject){var n={checks:[]},r={checks:[]},i=t[t.length-1];return n.checks.push({type:16,ancestor:i,descendant:r}),sr(t,0,n),t.compoundCount++,r}if(t.currentSubject===e){var a={checks:[]},o=t[t.length-1],s={checks:[]},u={checks:[]},l={checks:[]},h={checks:[]};return a.checks.push({type:19,left:o,right:s,subject:u}),u.checks=e.checks,e.checks=[{type:nr}],h.checks.push({type:nr}),s.checks.push({type:18,ancestor:h,descendant:l}),sr(t,0,a),t.currentSubject=u,t.compoundCount++,l}var c={checks:[]},d={checks:[]},f=[{type:18,ancestor:c,descendant:d}];return c.checks=e.checks,e.checks=f,t.compoundCount++,d}},{name:"subject",modifier:!0,regex:er.subject,populate:function(t,e){if(null!=t.currentSubject&&t.currentSubject!==e)return mt("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=e;var n=t[t.length-1].checks[0],r=null==n?null:n.type;11===r?n.type=13:10===r&&(n.type=14,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];ur.forEach((function(t){return t.regexObj=new RegExp("^"+t.regex)}));var lr=function(t){for(var e,n,r,i=0;i<ur.length;i++){var a=ur[i],o=a.name,s=t.match(a.regexObj);if(null!=s){n=s,e=a,r=o;var u=s[0];t=t.substring(u.length);break}}return{expr:e,match:n,name:r,remaining:t}},hr={parse:function(t){var e=this,n=e.inputText=t,r=e[0]={checks:[]};for(e.length=1,n=function(t){var e=t.match(/^\s+/);if(e){var n=e[0];t=t.substring(n.length)}return t}(n);;){var i=lr(n);if(null==i.expr)return mt("The selector `"+t+"`is invalid"),!1;var a=i.match.slice(1),o=i.expr.populate(e,r,a);if(!1===o)return!1;if(null!=o&&(r=o),(n=i.remaining).match(/^\s*$/))break}var s=e[e.length-1];null!=e.currentSubject&&(s.subject=e.currentSubject),s.edgeCount=e.edgeCount,s.compoundCount=e.compoundCount;for(var u=0;u<e.length;u++){var l=e[u];if(l.compoundCount>0&&l.edgeCount>0)return mt("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return mt("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&mt("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var t=function(t){return null==t?"":t},e=function(e){return b(e)?'"'+e+'"':t(e)},n=function(t){return" "+t+" "},r=function(i,a){return i.checks.reduce((function(o,s,u){return o+(a===i&&0===u?"$":"")+function(i,a){var o=i.type,s=i.value;switch(o){case 0:var u=t(s);return u.substring(0,u.length-1);case 3:var l=i.field,h=i.operator;return"["+l+n(t(h))+e(s)+"]";case 5:var c=i.operator,d=i.field;return"["+t(c)+d+"]";case 4:return"["+i.field+"]";case 6:var f=i.operator;return"[["+i.field+n(t(f))+e(s)+"]]";case 7:return s;case 8:return"#"+s;case 9:return"."+s;case 17:case 15:return r(i.parent,a)+n(">")+r(i.child,a);case 18:case 16:return r(i.ancestor,a)+" "+r(i.descendant,a);case 19:var p=r(i.left,a),v=r(i.subject,a),g=r(i.right,a);return p+(p.length>0?" ":"")+v+g;case nr:return""}}(s,a)}),"")},i="",a=0;a<this.length;a++){var o=this[a];i+=r(o,o.subject),this.length>1&&a<this.length-1&&(i+=", ")}return this.toStringCache=i,i}},cr=function(t,e,n){var r,i,a,o=b(t),s=M(t),u=b(n),l=!1,h=!1,c=!1;switch(e.indexOf("!")>=0&&(e=e.replace("!",""),h=!0),e.indexOf("@")>=0&&(e=e.replace("@",""),l=!0),(o||u||l)&&(i=o||s?""+t:"",a=""+n),l&&(t=i=i.toLowerCase(),n=a=a.toLowerCase()),e){case"*=":r=i.indexOf(a)>=0;break;case"$=":r=i.indexOf(a,i.length-a.length)>=0;break;case"^=":r=0===i.indexOf(a);break;case"=":r=t===n;break;case">":c=!0,r=t>n;break;case">=":c=!0,r=t>=n;break;case"<":c=!0,r=t<n;break;case"<=":c=!0,r=t<=n;break;default:r=!1}return!h||null==t&&c||(r=!r),r},dr=function(t,e){return t.data(e)},fr=[],pr=function(t,e){return t.checks.every((function(t){return fr[t.type](t,e)}))};fr[0]=function(t,e){var n=t.value;return"*"===n||n===e.group()},fr[7]=function(t,e){return function(t,e){return ir[t](e)}(t.value,e)},fr[8]=function(t,e){var n=t.value;return e.id()===n},fr[9]=function(t,e){var n=t.value;return e.hasClass(n)},fr[6]=function(t,e){var n=t.field,r=t.operator,i=t.value;return cr(function(t,e){return t[e]()}(e,n),r,i)},fr[3]=function(t,e){var n=t.field,r=t.operator,i=t.value;return cr(dr(e,n),r,i)},fr[5]=function(t,e){var n=t.field,r=t.operator;return function(t,e){switch(e){case"?":return!!t;case"!":return!t;case"^":return void 0===t}}(dr(e,n),r)},fr[4]=function(t,e){var n=t.field;return t.operator,void 0!==dr(e,n)},fr[10]=function(t,e){var n=t.nodes[0],r=t.nodes[1],i=e.source(),a=e.target();return pr(n,i)&&pr(r,a)||pr(r,i)&&pr(n,a)},fr[14]=function(t,e){return pr(t.node,e)&&e.neighborhood().some((function(e){return e.isNode()&&pr(t.neighbor,e)}))},fr[11]=function(t,e){return pr(t.source,e.source())&&pr(t.target,e.target())},fr[12]=function(t,e){return pr(t.source,e)&&e.outgoers().some((function(e){return e.isNode()&&pr(t.target,e)}))},fr[13]=function(t,e){return pr(t.target,e)&&e.incomers().some((function(e){return e.isNode()&&pr(t.source,e)}))},fr[15]=function(t,e){return pr(t.child,e)&&pr(t.parent,e.parent())},fr[17]=function(t,e){return pr(t.parent,e)&&e.children().some((function(e){return pr(t.child,e)}))},fr[16]=function(t,e){return pr(t.descendant,e)&&e.ancestors().some((function(e){return pr(t.ancestor,e)}))},fr[18]=function(t,e){return pr(t.ancestor,e)&&e.descendants().some((function(e){return pr(t.descendant,e)}))},fr[19]=function(t,e){return pr(t.subject,e)&&pr(t.left,e)&&pr(t.right,e)},fr[20]=function(){return!0},fr[1]=function(t,e){return t.value.has(e)},fr[2]=function(t,e){return(0,t.value)(e)};var vr={matches:function(t){for(var e=0;e<this.length;e++){var n=this[e];if(pr(n,t))return!0}return!1},filter:function(t){var e=this;if(1===e.length&&1===e[0].checks.length&&8===e[0].checks[0].type)return t.getElementById(e[0].checks[0].value).collection();var n=function(t){for(var n=0;n<e.length;n++){var r=e[n];if(pr(r,t))return!0}return!1};return null==e.text()&&(n=function(){return!0}),t.filter(n)}},gr=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==t||b(t)&&t.match(/^\s*$/)||(k(t)?this.addQuery({checks:[{type:1,value:t.collection()}]}):x(t)?this.addQuery({checks:[{type:2,value:t}]}):b(t)?this.parse(t)||(this.invalid=!0):gt("A selector must be created from a string; found "))},yr=gr.prototype;[hr,vr].forEach((function(t){return W(yr,t)})),yr.text=function(){return this.inputText},yr.size=function(){return this.length},yr.eq=function(t){return this[t]},yr.sameText=function(t){return!this.invalid&&!t.invalid&&this.text()===t.text()},yr.addQuery=function(t){this[this.length++]=t},yr.selector=yr.toString;var mr={allAre:function(t){var e=new gr(t);return this.every((function(t){return e.matches(t)}))},is:function(t){var e=new gr(t);return this.some((function(t){return e.matches(t)}))},some:function(t,e){for(var n=0;n<this.length;n++)if(e?t.apply(e,[this[n],n,this]):t(this[n],n,this))return!0;return!1},every:function(t,e){for(var n=0;n<this.length;n++)if(!(e?t.apply(e,[this[n],n,this]):t(this[n],n,this)))return!1;return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var e=this.length;return e===t.length&&(1===e?this[0]===t[0]:this.every((function(e){return t.hasElementWithId(e.id())})))},anySame:function(t){return t=this.cy().collection(t),this.some((function(e){return t.hasElementWithId(e.id())}))},allAreNeighbors:function(t){t=this.cy().collection(t);var e=this.neighborhood();return t.every((function(t){return e.hasElementWithId(t.id())}))},contains:function(t){t=this.cy().collection(t);var e=this;return t.every((function(t){return e.hasElementWithId(t.id())}))}};mr.allAreNeighbours=mr.allAreNeighbors,mr.has=mr.contains,mr.equal=mr.equals=mr.same;var br,xr,wr=function(t,e){return function(n,r,i,a){var o,s=n,u=this;if(null==s?o="":k(s)&&1===s.length&&(o=s.id()),1===u.length&&o){var l=u[0]._private,h=l.traversalCache=l.traversalCache||{},c=h[e]=h[e]||[],d=at(o);return c[d]||(c[d]=t.call(u,n,r,i,a))}return t.call(u,n,r,i,a)}},_r={parent:function(t){var e=[];if(1===this.length){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var i=this[r]._private.parent;i&&e.push(i)}return this.spawn(e,{unique:!0}).filter(t)},parents:function(t){for(var e=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var i=n[r];e.push(i)}n=n.parent()}return this.spawn(e,{unique:!0}).filter(t)},commonAncestors:function(t){for(var e,n=0;n<this.length;n++){var r=this[n].parents();e=(e=e||r).intersect(r)}return e.filter(t)},orphans:function(t){return this.stdFilter((function(t){return t.isOrphan()})).filter(t)},nonorphans:function(t){return this.stdFilter((function(t){return t.isChild()})).filter(t)},children:wr((function(t){for(var e=[],n=0;n<this.length;n++)for(var r=this[n]._private.children,i=0;i<r.length;i++)e.push(r[i]);return this.spawn(e,{unique:!0}).filter(t)}),"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&0!==t._private.children.length},isChildless:function(){var t=this[0];if(t)return t.isNode()&&0===t._private.children.length},isChild:function(){var t=this[0];if(t)return t.isNode()&&null!=t._private.parent},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&null==t._private.parent},descendants:function(t){var e=[];return function t(n){for(var r=0;r<n.length;r++){var i=n[r];e.push(i),i.children().nonempty()&&t(i.children())}}(this.children()),this.spawn(e,{unique:!0}).filter(t)}};function Mr(t,e,n,r){for(var i=[],a=new Dt,o=t.cy().hasCompoundNodes(),s=0;s<t.length;s++){var u=t[s];n?i.push(u):o&&r(i,a,u)}for(;i.length>0;){var l=i.shift();e(l),a.add(l.id()),o&&r(i,a,l)}return t}function Er(t,e,n){if(n.isParent())for(var r=n._private.children,i=0;i<r.length;i++){var a=r[i];e.has(a.id())||t.push(a)}}function kr(t,e,n){if(n.isChild()){var r=n._private.parent;e.has(r.id())||t.push(r)}}function Cr(t,e,n){kr(t,e,n),Er(t,e,n)}_r.forEachDown=function(t){return Mr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Er)},_r.forEachUp=function(t){return Mr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],kr)},_r.forEachUpAndDown=function(t){return Mr(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Cr)},_r.ancestors=_r.parents,(br=xr={data:Qn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Qn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Qn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Qn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Qn.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Qn.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}}).attr=br.data,br.removeAttr=br.removeData;var Sr,Pr,Tr=xr,Dr={};function Ir(t){return function(e){var n=this;if(void 0===e&&(e=!0),0!==n.length&&n.isNode()&&!n.removed()){for(var r=0,i=n[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];!e&&s.isLoop()||(r+=t(i,s))}return r}}}function Br(t,e){return function(n){for(var r,i=this.nodes(),a=0;a<i.length;a++){var o=i[a][t](n);void 0===o||void 0!==r&&!e(o,r)||(r=o)}return r}}W(Dr,{degree:Ir((function(t,e){return e.source().same(e.target())?2:1})),indegree:Ir((function(t,e){return e.target().same(t)?1:0})),outdegree:Ir((function(t,e){return e.source().same(t)?1:0}))}),W(Dr,{minDegree:Br("degree",(function(t,e){return t<e})),maxDegree:Br("degree",(function(t,e){return t>e})),minIndegree:Br("indegree",(function(t,e){return t<e})),maxIndegree:Br("indegree",(function(t,e){return t>e})),minOutdegree:Br("outdegree",(function(t,e){return t<e})),maxOutdegree:Br("outdegree",(function(t,e){return t>e}))}),W(Dr,{totalDegree:function(t){for(var e=0,n=this.nodes(),r=0;r<n.length;r++)e+=n[r].degree(t);return e}});var Nr=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(!i.locked()){var a=i._private.position,o={x:null!=e.x?e.x-a.x:0,y:null!=e.y?e.y-a.y:0};!i.isParent()||0===o.x&&0===o.y||i.children().shift(o,n),i.shiftCachedBoundingBox(o)}}},Or={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,e){Nr(t,e,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};Sr=Pr={position:Qn.data(Or),silentPosition:Qn.data(W({},Or,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,e){Nr(t,e,!0)}})),positions:function(t,e){if(_(t))e?this.silentPosition(t):this.position(t);else if(x(t)){var n=t,r=this.cy();r.startBatch();for(var i=0;i<this.length;i++){var a,o=this[i];(a=n(o,i))&&(e?o.silentPosition(a):o.position(a))}r.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,e,n){var r;if(_(t)?(r={x:M(t.x)?t.x:0,y:M(t.y)?t.y:0},n=e):b(t)&&M(e)&&((r={x:0,y:0})[t]=e),null!=r){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],s=o.position(),u={x:s.x+r.x,y:s.y+r.y};n?o.silentPosition(u):o.position(u)}i.endBatch()}return this},silentShift:function(t,e){return _(t)?this.shift(t,!0):b(t)&&M(e)&&this.shift(t,e,!0),this},renderedPosition:function(t,e){var n=this[0],r=this.cy(),i=r.zoom(),a=r.pan(),o=_(t)?t:void 0,s=void 0!==o||void 0!==e&&b(t);if(n&&n.isNode()){if(!s){var u=n.position();return o=Ut(u,i,a),void 0===t?o:o[t]}for(var l=0;l<this.length;l++){var h=this[l];void 0!==e?h.position(t,(e-a[t])/i):void 0!==o&&h.position(Ht(o,i,a))}}else if(!s)return;return this},relativePosition:function(t,e){var n=this[0],r=this.cy(),i=_(t)?t:void 0,a=void 0!==i||void 0!==e&&b(t),o=r.hasCompoundNodes();if(n&&n.isNode()){if(!a){var s=n.position(),u=o?n.parent():null,l=u&&u.length>0,h=l;l&&(u=u[0]);var c=h?u.position():{x:0,y:0};return i={x:s.x-c.x,y:s.y-c.y},void 0===t?i:i[t]}for(var d=0;d<this.length;d++){var f=this[d],p=o?f.parent():null,v=p&&p.length>0,g=v;v&&(p=p[0]);var y=g?p.position():{x:0,y:0};void 0!==e?f.position(t,e+y[t]):void 0!==i&&f.position({x:i.x+y.x,y:i.y+y.y})}}else if(!a)return;return this}},Sr.modelPosition=Sr.point=Sr.position,Sr.modelPositions=Sr.points=Sr.positions,Sr.renderedPoint=Sr.renderedPosition,Sr.relativePoint=Sr.relativePosition;var Ar,zr,Lr=Pr;Ar=zr={},zr.renderedBoundingBox=function(t){var e=this.boundingBox(t),n=this.cy(),r=n.zoom(),i=n.pan(),a=e.x1*r+i.x,o=e.x2*r+i.x,s=e.y1*r+i.y,u=e.y2*r+i.y;return{x1:a,x2:o,y1:s,y2:u,w:o-a,h:u-s}},zr.dirtyCompoundBoundsCache=function(){var t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()?(this.forEachUp((function(t){if(t.isParent()){var e=t._private;e.compoundBoundsClean=!1,e.bbCache=null,t.emitAndNotify("bounds")}})),this):this},zr.updateCompoundBounds=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!t&&e.batching())return this;function n(t){if(t.isParent()){var e=t._private,n=t.children(),r="include"===t.pstyle("compound-sizing-wrt-labels").value,i={width:{val:t.pstyle("min-width").pfValue,left:t.pstyle("min-width-bias-left"),right:t.pstyle("min-width-bias-right")},height:{val:t.pstyle("min-height").pfValue,top:t.pstyle("min-height-bias-top"),bottom:t.pstyle("min-height-bias-bottom")}},a=n.boundingBox({includeLabels:r,includeOverlays:!1,useCache:!1}),o=e.position;0!==a.w&&0!==a.h||((a={w:t.pstyle("width").pfValue,h:t.pstyle("height").pfValue}).x1=o.x-a.w/2,a.x2=o.x+a.w/2,a.y1=o.y-a.h/2,a.y2=o.y+a.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var u=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(u=100*u/i.width.val);var l=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(l=100*l/i.height.val);var h=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(h=100*h/i.height.val);var c=y(i.width.val-a.w,s,u),d=c.biasDiff,f=c.biasComplementDiff,p=y(i.height.val-a.h,l,h),v=p.biasDiff,g=p.biasComplementDiff;e.autoPadding=function(t,e,n,r){if("%"!==n.units)return"px"===n.units?n.pfValue:0;switch(r){case"width":return t>0?n.pfValue*t:0;case"height":return e>0?n.pfValue*e:0;case"average":return t>0&&e>0?n.pfValue*(t+e)/2:0;case"min":return t>0&&e>0?t>e?n.pfValue*e:n.pfValue*t:0;case"max":return t>0&&e>0?t>e?n.pfValue*t:n.pfValue*e:0;default:return 0}}(a.w,a.h,t.pstyle("padding"),t.pstyle("padding-relative-to").value),e.autoWidth=Math.max(a.w,i.width.val),o.x=(-d+a.x1+a.x2+f)/2,e.autoHeight=Math.max(a.h,i.height.val),o.y=(-v+a.y1+a.y2+g)/2}function y(t,e,n){var r=0,i=0,a=e+n;return t>0&&a>0&&(r=e/a*t,i=n/a*t),{biasDiff:r,biasComplementDiff:i}}}for(var r=0;r<this.length;r++){var i=this[r],a=i._private;a.compoundBoundsClean||(n(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var Rr=function(t){return t===1/0||t===-1/0?0:t},jr=function(t,e,n,r,i){r-e!=0&&i-n!=0&&null!=e&&null!=n&&null!=r&&null!=i&&(t.x1=e<t.x1?e:t.x1,t.x2=r>t.x2?r:t.x2,t.y1=n<t.y1?n:t.y1,t.y2=i>t.y2?i:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},qr=function(t,e){return null==e?t:jr(t,e.x1,e.y1,e.x2,e.y2)},Fr=function(t,e,n){return Ct(t,e,n)},Vr=function(t,e,n){if(!e.cy().headless()){var r,i,a=e._private,o=a.rstyle,s=o.arrowWidth/2;if("none"!==e.pstyle(n+"-arrow-shape").value){"source"===n?(r=o.srcX,i=o.srcY):"target"===n?(r=o.tgtX,i=o.tgtY):(r=o.midX,i=o.midY);var u=a.arrowBounds=a.arrowBounds||{},l=u[n]=u[n]||{};l.x1=r-s,l.y1=i-s,l.x2=r+s,l.y2=i+s,l.w=l.x2-l.x1,l.h=l.y2-l.y1,se(l,1),jr(t,l.x1,l.y1,l.x2,l.y2)}}},Wr=function(t,e,n){if(!e.cy().headless()){var r;r=n?n+"-":"";var i=e._private,a=i.rstyle;if(e.pstyle(r+"label").strValue){var o,s,u,l,h=e.pstyle("text-halign"),c=e.pstyle("text-valign"),d=Fr(a,"labelWidth",n),f=Fr(a,"labelHeight",n),p=Fr(a,"labelX",n),v=Fr(a,"labelY",n),g=e.pstyle(r+"text-margin-x").pfValue,y=e.pstyle(r+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle(r+"text-rotation"),x=e.pstyle("text-outline-width").pfValue,w=e.pstyle("text-border-width").pfValue/2,_=e.pstyle("text-background-padding").pfValue,M=f,E=d,k=E/2,C=M/2;if(m)o=p-k,s=p+k,u=v-C,l=v+C;else{switch(h.value){case"left":o=p-E,s=p;break;case"center":o=p-k,s=p+k;break;case"right":o=p,s=p+E}switch(c.value){case"top":u=v-M,l=v;break;case"center":u=v-C,l=v+C;break;case"bottom":u=v,l=v+M}}o+=g-Math.max(x,w)-_,s+=g+Math.max(x,w)+_,u+=y-Math.max(x,w)-_,l+=y+Math.max(x,w)+_;var S=n||"main",P=i.labelBounds,T=P[S]=P[S]||{};T.x1=o,T.y1=u,T.x2=s,T.y2=l,T.w=s-o,T.h=l-u,se(T,1);var D=m&&"autorotate"===b.strValue,I=null!=b.pfValue&&0!==b.pfValue;if(D||I){var B=D?Fr(i.rstyle,"labelAngle",n):b.pfValue,N=Math.cos(B),O=Math.sin(B),A=(o+s)/2,z=(u+l)/2;if(!m){switch(h.value){case"left":A=s;break;case"right":A=o}switch(c.value){case"top":z=l;break;case"bottom":z=u}}var L=function(t,e){return{x:(t-=A)*N-(e-=z)*O+A,y:t*O+e*N+z}},R=L(o,u),j=L(o,l),q=L(s,u),F=L(s,l);o=Math.min(R.x,j.x,q.x,F.x),s=Math.max(R.x,j.x,q.x,F.x),u=Math.min(R.y,j.y,q.y,F.y),l=Math.max(R.y,j.y,q.y,F.y)}var V=S+"Rot",W=P[V]=P[V]||{};W.x1=o,W.y1=u,W.x2=s,W.y2=l,W.w=s-o,W.h=l-u,jr(t,o,u,s,l),jr(i.labelBounds.all,o,u,s,l)}return t}},Gr=function(t){var e=0,n=function(t){return(t?1:0)<<e++},r=0;return r+=n(t.incudeNodes),r+=n(t.includeEdges),r+=n(t.includeLabels),r+=n(t.includeMainLabels),r+=n(t.includeSourceLabels),(r+=n(t.includeTargetLabels))+n(t.includeOverlays)},Xr=function(t){if(t.isEdge()){var e=t.source().position(),n=t.target().position(),r=function(t){return Math.round(t)};return function(t,e){var n={value:0,done:!1},r=0,i=t.length;return tt({next:function(){return r<i?n.value=t[r++]:n.done=!0,n}},void 0)}([r(e.x),r(e.y),r(n.x),r(n.y)])}return 0},Yr=function(t,e){var n,r=t._private,i=t.isEdge(),a=(null==e?Hr:Gr(e))===Hr,o=Xr(t),s=r.bbCachePosKey===o,u=function(t){return null==t._private.bbCache},l=!(e.useCache&&s)||u(t)||i&&u(t.source())||u(t.target());if(l?(s||t.recalculateRenderedStyle(),n=function(t,e){var n,r,i,a,o,s,u,l=t._private.cy,h=l.styleEnabled(),c=l.headless(),d=ae(),f=t._private,p=t.isNode(),v=t.isEdge(),g=f.rstyle,y=p&&h?t.pstyle("bounds-expansion").pfValue:[0],m=function(t){return"none"!==t.pstyle("display").value},b=!h||m(t)&&(!v||m(t.source())&&m(t.target()));if(b){var x=0;h&&e.includeOverlays&&0!==t.pstyle("overlay-opacity").value&&(x=t.pstyle("overlay-padding").value);var w=0;if(h&&(w=t.pstyle("width").pfValue/2),p&&e.includeNodes){var _=t.position();o=_.x,s=_.y;var M=t.outerWidth()/2,E=t.outerHeight()/2;jr(d,n=o-M,i=s-E,r=o+M,a=s+E)}else if(v&&e.includeEdges)if(h&&!c){var k=t.pstyle("curve-style").strValue;if(n=Math.min(g.srcX,g.midX,g.tgtX),r=Math.max(g.srcX,g.midX,g.tgtX),i=Math.min(g.srcY,g.midY,g.tgtY),a=Math.max(g.srcY,g.midY,g.tgtY),jr(d,n-=w,i-=w,r+=w,a+=w),"haystack"===k){var C=g.haystackPts;if(C&&2===C.length){if(n=C[0].x,i=C[0].y,n>(r=C[1].x)){var S=n;n=r,r=S}if(i>(a=C[1].y)){var P=i;i=a,a=P}jr(d,n-w,i-w,r+w,a+w)}}else if("bezier"===k||"unbundled-bezier"===k||"segments"===k||"taxi"===k){var T;switch(k){case"bezier":case"unbundled-bezier":T=g.bezierPts;break;case"segments":case"taxi":T=g.linePts}if(null!=T)for(var D=0;D<T.length;D++){var I=T[D];n=I.x-w,r=I.x+w,i=I.y-w,a=I.y+w,jr(d,n,i,r,a)}}}else{var B=t.source().position(),N=t.target().position();if((n=B.x)>(r=N.x)){var O=n;n=r,r=O}if((i=B.y)>(a=N.y)){var A=i;i=a,a=A}jr(d,n-=w,i-=w,r+=w,a+=w)}if(h&&e.includeEdges&&v&&(Vr(d,t,"mid-source"),Vr(d,t,"mid-target"),Vr(d,t,"source"),Vr(d,t,"target")),h&&"yes"===t.pstyle("ghost").value){var z=t.pstyle("ghost-offset-x").pfValue,L=t.pstyle("ghost-offset-y").pfValue;jr(d,d.x1+z,d.y1+L,d.x2+z,d.y2+L)}var R=f.bodyBounds=f.bodyBounds||{};le(R,d),ue(R,y),se(R,1),h&&(n=d.x1,r=d.x2,i=d.y1,a=d.y2,jr(d,n-x,i-x,r+x,a+x));var j=f.overlayBounds=f.overlayBounds||{};le(j,d),ue(j,y),se(j,1);var q=f.labelBounds=f.labelBounds||{};null!=q.all?((u=q.all).x1=1/0,u.y1=1/0,u.x2=-1/0,u.y2=-1/0,u.w=0,u.h=0):q.all=ae(),h&&e.includeLabels&&(e.includeMainLabels&&Wr(d,t,null),v&&(e.includeSourceLabels&&Wr(d,t,"source"),e.includeTargetLabels&&Wr(d,t,"target")))}return d.x1=Rr(d.x1),d.y1=Rr(d.y1),d.x2=Rr(d.x2),d.y2=Rr(d.y2),d.w=Rr(d.x2-d.x1),d.h=Rr(d.y2-d.y1),d.w>0&&d.h>0&&b&&(ue(d,y),se(d,1)),d}(t,Ur),r.bbCache=n,r.bbCacheShift.x=r.bbCacheShift.y=0,r.bbCachePosKey=o):n=r.bbCache,!l&&(0!==r.bbCacheShift.x||0!==r.bbCacheShift.y)){var h=he,c=r.bbCacheShift,d=function(t,e){null!=t&&h(t,e)};h(n,c);var f=r.bodyBounds,p=r.overlayBounds,v=r.labelBounds,g=r.arrowBounds;d(f,c),d(p,c),null!=g&&(d(g.source,c),d(g.target,c),d(g["mid-source"],c),d(g["mid-target"],c)),null!=v&&(d(v.main,c),d(v.all,c),d(v.source,c),d(v.target,c))}if(r.bbCacheShift.x=r.bbCacheShift.y=0,!a){var y=t.isNode();n=ae(),(e.includeNodes&&y||e.includeEdges&&!y)&&(e.includeOverlays?qr(n,r.overlayBounds):qr(n,r.bodyBounds)),e.includeLabels&&(e.includeMainLabels&&(!i||e.includeSourceLabels&&e.includeTargetLabels)?qr(n,r.labelBounds.all):(e.includeMainLabels&&qr(n,r.labelBounds.mainRot),e.includeSourceLabels&&qr(n,r.labelBounds.sourceRot),e.includeTargetLabels&&qr(n,r.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},Ur={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,useCache:!0},Hr=Gr(Ur),Zr=Mt(Ur);zr.boundingBox=function(t){var e;if(1!==this.length||null==this[0]._private.bbCache||void 0!==t&&void 0!==t.useCache&&!0!==t.useCache){e=ae();var n=Zr(t=t||Ur),r=this;if(r.cy().styleEnabled())for(var i=0;i<r.length;i++){var a=r[i],o=a._private,s=Xr(a),u=o.bbCachePosKey===s,l=n.useCache&&u;a.recalculateRenderedStyle(l)}this.updateCompoundBounds();for(var h=0;h<r.length;h++){var c=r[h];qr(e,Yr(c,n))}}else t=void 0===t?Ur:Zr(t),e=Yr(this[0],t);return e.x1=Rr(e.x1),e.y1=Rr(e.y1),e.x2=Rr(e.x2),e.y2=Rr(e.y2),e.w=Rr(e.x2-e.x1),e.h=Rr(e.y2-e.y1),e},zr.dirtyBoundingBoxCache=function(){for(var t=0;t<this.length;t++){var e=this[t]._private;e.bbCache=null,e.bbCacheShift.x=e.bbCacheShift.y=0,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},zr.shiftCachedBoundingBox=function(t){for(var e=0;e<this.length;e++){var n=this[e]._private;null!=n.bbCache&&(n.bbCacheShift.x+=t.x,n.bbCacheShift.y+=t.y)}return this.emitAndNotify("bounds"),this},zr.boundingBoxAt=function(t){var e=this.nodes(),n=this.cy(),r=n.hasCompoundNodes();if(r&&(e=e.filter((function(t){return!t.isParent()}))),_(t)){var i=t;t=function(){return i}}n.startBatch(),e.forEach((function(e,n){return e._private.bbAtOldPos=t(e,n)})).silentPositions(t),r&&this.updateCompoundBounds(!0);var a=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}}(this.boundingBox({useCache:!1}));return e.silentPositions((function(t){return t._private.bbAtOldPos})),n.endBatch(),a},Ar.boundingbox=Ar.bb=Ar.boundingBox,Ar.renderedBoundingbox=Ar.renderedBoundingBox;var Kr,$r,Qr=zr;Kr=$r={};var Jr=function(t){t.uppercaseName=z(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=z(t.outerName),Kr[t.name]=function(){var e=this[0],n=e._private,r=n.cy._private.styleEnabled;if(e){if(r){if(e.isParent())return e.updateCompoundBounds(),n[t.autoName]||0;var i=e.pstyle(t.name);return"label"===i.strValue?(e.recalculateRenderedStyle(),n.rstyle[t.labelName]||0):i.pfValue}return 1}},Kr["outer"+t.uppercaseName]=function(){var e=this[0],n=e._private.cy._private.styleEnabled;if(e)return n?e[t.name]()+e.pstyle("border-width").pfValue+2*e.padding():1},Kr["rendered"+t.uppercaseName]=function(){var e=this[0];if(e)return e[t.name]()*this.cy().zoom()},Kr["rendered"+t.uppercaseOuterName]=function(){var e=this[0];if(e)return e[t.outerName]()*this.cy().zoom()}};Jr({name:"width"}),Jr({name:"height"}),$r.padding=function(){var t=this[0],e=t._private;return t.isParent()?(t.updateCompoundBounds(),void 0!==e.autoPadding?e.autoPadding:t.pstyle("padding").pfValue):t.pstyle("padding").pfValue},$r.paddedHeight=function(){var t=this[0];return t.height()+2*t.padding()},$r.paddedWidth=function(){var t=this[0];return t.width()+2*t.padding()};var ti=$r,ei={controlPoints:{get:function(t){return t.renderer().getControlPoints(t)},mult:!0},segmentPoints:{get:function(t){return t.renderer().getSegmentPoints(t)},mult:!0},sourceEndpoint:{get:function(t){return t.renderer().getSourceEndpoint(t)}},targetEndpoint:{get:function(t){return t.renderer().getTargetEndpoint(t)}},midpoint:{get:function(t){return t.renderer().getEdgeMidpoint(t)}}},ni=Object.keys(ei).reduce((function(t,e){var n=ei[e],r=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)}(e);return t[e]=function(){return function(t,e){if(t.isEdge())return e(t)}(this,n.get)},n.mult?t[r]=function(){return function(t,e){if(t.isEdge()){var n=t.cy(),r=n.pan(),i=n.zoom();return e(t).map((function(t){return Ut(t,i,r)}))}}(this,n.get)}:t[r]=function(){return function(t,e){if(t.isEdge()){var n=t.cy();return Ut(e(t),n.zoom(),n.pan())}}(this,n.get)},t}),{}),ri=W({},Lr,Qr,ti,ni),ii=function(t,e){this.recycle(t,e)};function ai(){return!1}function oi(){return!0}ii.prototype={instanceString:function(){return"event"},recycle:function(t,e){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=ai,null!=t&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?oi:ai):null!=t&&t.type?e=t:this.type=t,null!=e&&(this.originalEvent=e.originalEvent,this.type=null!=e.type?e.type:this.type,this.cy=e.cy,this.target=e.target,this.position=e.position,this.renderedPosition=e.renderedPosition,this.namespace=e.namespace,this.layout=e.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var n=this.position,r=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*r+i.x,y:n.y*r+i.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=oi;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=oi;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=oi,this.stopPropagation()},isDefaultPrevented:ai,isPropagationStopped:ai,isImmediatePropagationStopped:ai};var si=/^([^.]+)(\.(?:[^.]+))?$/,ui={qualifierCompare:function(t,e){return t===e},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},li=Object.keys(ui),hi={};function ci(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hi,e=arguments.length>1?arguments[1]:void 0,n=0;n<li.length;n++){var r=li[n];this[r]=t[r]||ui[r]}this.context=e||this.context,this.listeners=[],this.emitting=0}var di=ci.prototype,fi=function(t,e,n,r,i,a,o){x(r)&&(i=r,r=null),o&&(a=null==a?o:W({},a,o));for(var s=w(n)?n:n.split(/\s+/),u=0;u<s.length;u++){var l=s[u];if(!D(l)){var h=l.match(si);if(h&&!1===e(t,l,h[1],h[2]?h[2]:null,r,i,a))break}}},pi=function(t,e){return t.addEventFields(t.context,e),new ii(e.type,e)};di.on=di.addListener=function(t,e,n,r,i){return fi(this,(function(t,e,n,r,i,a,o){x(a)&&t.listeners.push({event:e,callback:a,type:n,namespace:r,qualifier:i,conf:o})}),t,e,n,r,i),this},di.one=function(t,e,n,r){return this.on(t,e,n,r,{one:!0})},di.removeListener=di.off=function(t,e,n,r){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var a=this.listeners,o=function(o){var s=a[o];fi(i,(function(e,n,r,i,u,l){if((s.type===r||"*"===t)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!u||e.qualifierCompare(s.qualifier,u))&&(!l||s.callback===l))return a.splice(o,1),!1}),t,e,n,r)},s=a.length-1;s>=0;s--)o(s);return this},di.removeAllListeners=function(){return this.removeListener("*")},di.emit=di.trigger=function(t,e,n){var r=this.listeners,i=r.length;return this.emitting++,w(e)||(e=[e]),function(t,e,n){if("event"!==m(n))if(_(n))e(t,pi(t,n));else for(var r=w(n)?n:n.split(/\s+/),i=0;i<r.length;i++){var a=r[i];if(!D(a)){var o=a.match(si);if(o){var s=o[1],u=o[2]?o[2]:null;e(t,pi(t,{type:s,namespace:u,target:t.context}))}}}else e(t,n)}(this,(function(t,a){null!=n&&(r=[{event:a.event,type:a.type,namespace:a.namespace,callback:n}],i=r.length);for(var o=function(n){var i=r[n];if(i.type===a.type&&(!i.namespace||i.namespace===a.namespace||".*"===i.namespace)&&t.eventMatches(t.context,i,a)){var o=[a];null!=e&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.push(r)}}(o,e),t.beforeEmit(t.context,i,a),i.conf&&i.conf.one&&(t.listeners=t.listeners.filter((function(t){return t!==i})));var s=t.callbackContext(t.context,i,a),u=i.callback.apply(s,o);t.afterEmit(t.context,i,a),!1===u&&(a.stopPropagation(),a.preventDefault())}},s=0;s<i;s++)o(s);t.bubble(t.context)&&!a.isPropagationStopped()&&t.parent(t.context).emit(a,e)}),t),this.emitting--,this};var vi={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&C(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t.cy(),e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t},beforeEmit:function(t,e){e.conf&&e.conf.once&&e.conf.onceCollection.removeListener(e.event,e.qualifier,e.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},gi=function(t){return b(t)?new gr(t):t},yi={createEmitter:function(){for(var t=0;t<this.length;t++){var e=this[t],n=e._private;n.emitter||(n.emitter=new ci(vi,e))}return this},emitter:function(){return this._private.emitter},on:function(t,e,n){for(var r=gi(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n);return this},removeListener:function(t,e,n){for(var r=gi(e),i=0;i<this.length;i++)this[i].emitter().removeListener(t,r,n);return this},removeAllListeners:function(){for(var t=0;t<this.length;t++)this[t].emitter().removeAllListeners();return this},one:function(t,e,n){for(var r=gi(e),i=0;i<this.length;i++)this[i].emitter().one(t,r,n);return this},once:function(t,e,n){for(var r=gi(e),i=0;i<this.length;i++)this[i].emitter().on(t,r,n,{once:!0,onceCollection:this})},emit:function(t,e){for(var n=0;n<this.length;n++)this[n].emitter().emit(t,e);return this},emitAndNotify:function(t,e){if(0!==this.length)return this.cy().notify(t,this),this.emit(t,e),this}};Qn.eventAliasesOn(yi);var mi={nodes:function(t){return this.filter((function(t){return t.isNode()})).filter(t)},edges:function(t){return this.filter((function(t){return t.isEdge()})).filter(t)},byGroup:function(){for(var t=this.spawn(),e=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?t.merge(r):e.merge(r)}return{nodes:t,edges:e}},filter:function(t,e){if(void 0===t)return this;if(b(t)||k(t))return new gr(t).filter(this);if(x(t)){for(var n=this.spawn(),r=this,i=0;i<r.length;i++){var a=r[i];(e?t.apply(e,[a,i,r]):t(a,i,r))&&n.merge(a)}return n}return this.spawn()},not:function(t){if(t){b(t)&&(t=this.filter(t));for(var e=[],n=t._private.map,r=0;r<this.length;r++){var i=this[r];n.has(i.id())||e.push(i)}return this.spawn(e)}return this},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(t){if(b(t)){var e=t;return this.filter(e)}for(var n=[],r=t,i=this.length<t.length,a=i?r._private.map:this._private.map,o=i?this:r,s=0;s<o.length;s++){var u=o[s]._private.data.id,l=a.get(u);l&&n.push(l.ele)}return this.spawn(n)},xor:function(t){var e=this._private.cy;b(t)&&(t=e.$(t));var n=[],r=t,i=function(t,e){for(var r=0;r<t.length;r++){var i=t[r],a=i._private.data.id;e.hasElementWithId(a)||n.push(i)}};return i(this,r),i(r,this),this.spawn(n)},diff:function(t){var e=this._private.cy;b(t)&&(t=e.$(t));var n=[],r=[],i=[],a=t,o=function(t,e,n){for(var r=0;r<t.length;r++){var a=t[r],o=a._private.data.id;e.hasElementWithId(o)?i.push(a):n.push(a)}};return o(this,a,n),o(a,this,r),{left:this.spawn(n,{unique:!0}),right:this.spawn(r,{unique:!0}),both:this.spawn(i,{unique:!0})}},add:function(t){var e=this._private.cy;if(!t)return this;if(b(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=[],i=0;i<this.length;i++)r.push(this[i]);for(var a=this._private.map,o=0;o<t.length;o++){!a.has(t[o].id())&&r.push(t[o])}return this.spawn(r)},merge:function(t){var e=this._private,n=e.cy;if(!t)return this;if(t&&b(t)){var r=t;t=n.mutableElements().filter(r)}for(var i=e.map,a=0;a<t.length;a++){var o=t[a],s=o._private.data.id;if(i.has(s)){var u=i.get(s).index;this[u]=o,i.set(s,{ele:o,index:u})}else{var l=this.length++;this[l]=o,i.set(s,{ele:o,index:l})}}return this},unmergeAt:function(t){var e=this[t].id(),n=this._private.map;this[t]=void 0,n.delete(e);var r=t===this.length-1;if(this.length>1&&!r){var i=this.length-1,a=this[i],o=a._private.data.id;this[i]=void 0,this[t]=a,n.set(o,{ele:a,index:t})}return this.length--,this},unmergeOne:function(t){t=t[0];var e=this._private,n=t._private.data.id,r=e.map.get(n);if(!r)return this;var i=r.index;return this.unmergeAt(i),this},unmerge:function(t){var e=this._private.cy;if(!t)return this;if(t&&b(t)){var n=t;t=e.mutableElements().filter(n)}for(var r=0;r<t.length;r++)this.unmergeOne(t[r]);return this},unmergeBy:function(t){for(var e=this.length-1;e>=0;e--)t(this[e])&&this.unmergeAt(e);return this},map:function(t,e){for(var n=[],r=this,i=0;i<r.length;i++){var a=r[i],o=e?t.apply(e,[a,i,r]):t(a,i,r);n.push(o)}return n},reduce:function(t,e){for(var n=e,r=this,i=0;i<r.length;i++)n=t(n,r[i],i,r);return n},max:function(t,e){for(var n,r=-1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=e?t.apply(e,[o,a,i]):t(o,a,i);s>r&&(r=s,n=o)}return{value:r,ele:n}},min:function(t,e){for(var n,r=1/0,i=this,a=0;a<i.length;a++){var o=i[a],s=e?t.apply(e,[o,a,i]):t(o,a,i);s<r&&(r=s,n=o)}return{value:r,ele:n}}},bi=mi;bi.u=bi["|"]=bi["+"]=bi.union=bi.or=bi.add,bi["\\"]=bi["!"]=bi["-"]=bi.difference=bi.relativeComplement=bi.subtract=bi.not,bi.n=bi["&"]=bi["."]=bi.and=bi.intersection=bi.intersect,bi["^"]=bi["(+)"]=bi["(-)"]=bi.symmetricDifference=bi.symdiff=bi.xor,bi.fnFilter=bi.filterFn=bi.stdFilter=bi.filter,bi.complement=bi.abscomp=bi.absoluteComplement;var xi,wi=function(t,e){var n=t.cy().hasCompoundNodes();function r(t){var e=t.pstyle("z-compound-depth");return"auto"===e.value?n?t.zDepth():0:"bottom"===e.value?-1:"top"===e.value?ct:0}var i=r(t)-r(e);if(0!==i)return i;function a(t){return"auto"===t.pstyle("z-index-compare").value&&t.isNode()?1:0}var o=a(t)-a(e);if(0!==o)return o;var s=t.pstyle("z-index").value-e.pstyle("z-index").value;return 0!==s?s:t.poolIndex()-e.poolIndex()},_i={forEach:function(t,e){if(x(t))for(var n=this.length,r=0;r<n;r++){var i=this[r];if(!1===(e?t.apply(e,[i,r,this]):t(i,r,this)))break}return this},toArray:function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e]);return t},slice:function(t,e){var n=[],r=this.length;null==e&&(e=r),null==t&&(t=0),t<0&&(t=r+t),e<0&&(e=r+e);for(var i=t;i>=0&&i<e&&i<r;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(t){if(!x(t))return this;var e=this.toArray().sort(t);return this.spawn(e)},sortByZIndex:function(){return this.sort(wi)},zDepth:function(){var t=this[0];if(t){var e=t._private;if("nodes"===e.group){var n=e.data.parent?t.parents().size():0;return t.isParent()?n:ct-1}var r=e.source,i=e.target,a=r.zDepth(),o=i.zDepth();return Math.max(a,o,0)}}};_i.each=_i.forEach,xi="undefined",("undefined"==typeof Symbol?"undefined":o(Symbol))!=xi&&o(Symbol.iterator)!=xi&&(_i[Symbol.iterator]=function(){var t=this,e={value:void 0,done:!1},n=0,r=this.length;return h({next:function(){return n<r?e.value=t[n++]:(e.value=void 0,e.done=!0),e}},Symbol.iterator,(function(){return this}))});var Mi=Mt({nodeDimensionsIncludeLabels:!1}),Ei={layoutDimensions:function(t){var e;if(t=Mi(t),this.takesUpSpace())if(t.nodeDimensionsIncludeLabels){var n=this.boundingBox();e={w:n.w,h:n.h}}else e={w:this.outerWidth(),h:this.outerHeight()};else e={w:0,h:0};return 0!==e.w&&0!==e.h||(e.w=e.h=1),e},layoutPositions:function(t,e,n){var r=this.nodes(),i=this.cy(),a=e.eles,o=function(t){return t.id()},s=B(n,o);t.emit({type:"layoutstart",layout:t}),t.animations=[];var u=e.spacingFactor&&1!==e.spacingFactor,l=function(){if(!u)return null;for(var t=ae(),e=0;e<r.length;e++){var n=r[e],i=s(n,e);oe(t,i.x,i.y)}return t}(),h=B((function(t,n){var r,i,a,o,h,c=s(t,n);return u&&(r=Math.abs(e.spacingFactor),a=c,o=(i=l).x1+i.w/2,h=i.y1+i.h/2,c={x:o+(a.x-o)*r,y:h+(a.y-h)*r}),null!=e.transform&&(c=e.transform(t,c)),c}),o);if(e.animate){for(var c=0;c<r.length;c++){var d=r[c],f=h(d,c);if(null==e.animateFilter||e.animateFilter(d,c)){var p=d.animation({position:f,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(p)}else d.position(f)}if(e.fit){var v=i.animation({fit:{boundingBox:a.boundingBoxAt(h),padding:e.padding},duration:e.animationDuration,easing:e.animationEasing});t.animations.push(v)}else if(void 0!==e.zoom&&void 0!==e.pan){var g=i.animation({zoom:e.zoom,pan:e.pan,duration:e.animationDuration,easing:e.animationEasing});t.animations.push(g)}t.animations.forEach((function(t){return t.play()})),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),Yn.all(t.animations.map((function(t){return t.promise()}))).then((function(){t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t})}))}else r.positions(h),e.fit&&i.fit(e.eles,e.padding),null!=e.zoom&&i.zoom(e.zoom),e.pan&&i.pan(e.pan),t.one("layoutready",e.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",e.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){return this.cy().makeLayout(W({},t,{eles:this}))}};function ki(t,e,n){var r,i=n._private,a=i.styleCache=i.styleCache||[];return null!=(r=a[t])?r:r=a[t]=e(n)}function Ci(t,e){return t=at(t),function(n){return ki(t,e,n)}}function Si(t,e){t=at(t);var n=function(t){return e.call(t)};return function(){var e=this[0];if(e)return ki(t,n,e)}}Ei.createLayout=Ei.makeLayout=Ei.layout;var Pi={recalculateRenderedStyle:function(t){var e=this.cy(),n=e.renderer(),r=e.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t,e=this.cy(),n=function(t){return t._private.styleCache=null};return e.hasCompoundNodes()?((t=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(t.connectedEdges()),t.forEach(n)):this.forEach((function(t){n(t),t.connectedEdges().forEach(n)})),this},updateStyle:function(t){var e=this._private.cy;if(!e.styleEnabled())return this;if(e.batching())return e._private.batchStyleEles.merge(this),this;var n=e.hasCompoundNodes(),r=e.style(),i=this;t=!(!t&&void 0!==t),n&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=r.apply(i);return t?a.emitAndNotify("style"):a.emit("style"),this},parsedStyle:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this[0],r=n.cy();if(r.styleEnabled()&&n){var i=n._private.style[t];return null!=i?i:e?r.style().getDefaultProperty(t):null}},numericStyle:function(t){var e=this[0];if(e.cy().styleEnabled()&&e){var n=e.pstyle(t);return void 0!==n.pfValue?n.pfValue:n.value}},numericStyleUnits:function(t){var e=this[0];if(e.cy().styleEnabled())return e?e.pstyle(t).units:void 0},renderedStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=this[0];return n?e.style().getRenderedStyle(n,t):void 0},style:function(t,e){var n=this.cy();if(!n.styleEnabled())return this;var r=n.style();if(_(t)){var i=t;r.applyBypass(this,i,!1),this.emitAndNotify("style")}else if(b(t)){if(void 0===e){var a=this[0];return a?r.getStylePropertyValue(a,t):void 0}r.applyBypass(this,t,e,!1),this.emitAndNotify("style")}else if(void 0===t){var o=this[0];return o?r.getRawStyle(o):void 0}return this},removeStyle:function(t){var e=this.cy();if(!e.styleEnabled())return this;var n=e.style(),r=this;if(void 0===t)for(var i=0;i<r.length;i++){var a=r[i];n.removeAllBypasses(a,!1)}else{t=t.split(/\s+/);for(var o=0;o<r.length;o++){var s=r[o];n.removeBypasses(s,t,!1)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var e=t.hasCompoundNodes(),n=this[0];if(n){var r=n._private,i=n.pstyle("opacity").value;if(!e)return i;var a=r.data.parent?n.parents():null;if(a)for(var o=0;o<a.length;o++)i*=a[o].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var t=this[0],e=t.cy().hasCompoundNodes();return t?e?0===t.effectiveOpacity():0===t.pstyle("opacity").value:void 0},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function Ti(t,e){var n=t._private.data.parent?t.parents():null;if(n)for(var r=0;r<n.length;r++)if(!e(n[r]))return!1;return!0}function Di(t){var e=t.ok,n=t.edgeOkViaNode||t.ok,r=t.parentOk||t.ok;return function(){var t=this.cy();if(!t.styleEnabled())return!0;var i=this[0],a=t.hasCompoundNodes();if(i){var o=i._private;if(!e(i))return!1;if(i.isNode())return!a||Ti(i,r);var s=o.source,u=o.target;return n(s)&&(!a||Ti(s,n))&&(s===u||n(u)&&(!a||Ti(u,n)))}}}var Ii=Ci("eleTakesUpSpace",(function(t){return"element"===t.pstyle("display").value&&0!==t.width()&&(!t.isNode()||0!==t.height())}));Pi.takesUpSpace=Si("takesUpSpace",Di({ok:Ii}));var Bi=Ci("eleInteractive",(function(t){return"yes"===t.pstyle("events").value&&"visible"===t.pstyle("visibility").value&&Ii(t)})),Ni=Ci("parentInteractive",(function(t){return"visible"===t.pstyle("visibility").value&&Ii(t)}));Pi.interactive=Si("interactive",Di({ok:Bi,parentOk:Ni,edgeOkViaNode:Ii})),Pi.noninteractive=function(){var t=this[0];if(t)return!t.interactive()};var Oi=Ci("eleVisible",(function(t){return"visible"===t.pstyle("visibility").value&&0!==t.pstyle("opacity").pfValue&&Ii(t)})),Ai=Ii;Pi.visible=Si("visible",Di({ok:Oi,edgeOkViaNode:Ai})),Pi.hidden=function(){var t=this[0];if(t)return!t.visible()},Pi.isBundledBezier=Si("isBundledBezier",(function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()})),Pi.bypass=Pi.css=Pi.style,Pi.renderedCss=Pi.renderedStyle,Pi.removeBypass=Pi.removeCss=Pi.removeStyle,Pi.pstyle=Pi.parsedStyle;var zi={};function Li(t){return function(){var e=arguments,n=[];if(2===e.length){var r=e[0],i=e[1];this.on(t.event,r,i)}else if(1===e.length&&x(e[0])){var a=e[0];this.on(t.event,a)}else if(0===e.length||1===e.length&&w(e[0])){for(var o=1===e.length?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!t.ableField||u._private[t.ableField],h=u._private[t.field]!=t.value;if(t.overrideAble){var c=t.overrideAble(u);if(void 0!==c&&(l=c,!c))return this}l&&(u._private[t.field]=t.value,h&&n.push(u))}var d=this.spawn(n);d.updateStyle(),d.emit(t.event),o&&d.emit(o)}return this}}function Ri(t){zi[t.field]=function(){var e=this[0];if(e){if(t.overrideField){var n=t.overrideField(e);if(void 0!==n)return n}return e._private[t.field]}},zi[t.on]=Li({event:t.on,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!0}),zi[t.off]=Li({event:t.off,field:t.field,ableField:t.ableField,overrideAble:t.overrideAble,value:!1})}Ri({field:"locked",overrideField:function(t){return!!t.cy().autolock()||void 0},on:"lock",off:"unlock"}),Ri({field:"grabbable",overrideField:function(t){return!t.cy().autoungrabify()&&!t.pannable()&&void 0},on:"grabify",off:"ungrabify"}),Ri({field:"selected",ableField:"selectable",overrideAble:function(t){return!t.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),Ri({field:"selectable",overrideField:function(t){return!t.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),zi.deselect=zi.unselect,zi.grabbed=function(){var t=this[0];if(t)return t._private.grabbed},Ri({field:"active",on:"activate",off:"unactivate"}),Ri({field:"pannable",on:"panify",off:"unpanify"}),zi.inactive=function(){var t=this[0];if(t)return!t._private.active};var ji={},qi=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode()){for(var a=!1,o=i.connectedEdges(),s=0;s<o.length;s++){var u=o[s],l=u.source(),h=u.target();if(t.noIncomingEdges&&h===i&&l!==i||t.noOutgoingEdges&&l===i&&h!==i){a=!0;break}}a||n.push(i)}}return this.spawn(n,{unique:!0}).filter(e)}},Fi=function(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r];if(i.isNode())for(var a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],u=s.source(),l=s.target();t.outgoing&&u===i?(n.push(s),n.push(l)):t.incoming&&l===i&&(n.push(s),n.push(u))}}return this.spawn(n,{unique:!0}).filter(e)}},Vi=function(t){return function(e){for(var n=this,r=[],i={};;){var a=t.outgoing?n.outgoers():n.incomers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var u=a[s],l=u.id();i[l]||(i[l]=!0,r.push(u),o=!0)}if(!o)break;n=a}return this.spawn(r,{unique:!0}).filter(e)}};function Wi(t){return function(e){for(var n=[],r=0;r<this.length;r++){var i=this[r]._private[t.attr];i&&n.push(i)}return this.spawn(n,{unique:!0}).filter(e)}}function Gi(t){return function(e){var n=[],r=this._private.cy,i=t||{};b(e)&&(e=r.$(e));for(var a=0;a<e.length;a++)for(var o=e[a]._private.edges,s=0;s<o.length;s++){var u=o[s],l=u._private.data,h=this.hasElementWithId(l.source)&&e.hasElementWithId(l.target),c=e.hasElementWithId(l.source)&&this.hasElementWithId(l.target);if(h||c){if(i.thisIsSrc||i.thisIsTgt){if(i.thisIsSrc&&!h)continue;if(i.thisIsTgt&&!c)continue}n.push(u)}}return this.spawn(n,{unique:!0})}}function Xi(t){return t=W({},{codirected:!1},t),function(e){for(var n=[],r=this.edges(),i=t,a=0;a<r.length;a++)for(var o=r[a]._private,s=o.source,u=s._private.data.id,l=o.data.target,h=s._private.edges,c=0;c<h.length;c++){var d=h[c],f=d._private.data,p=f.target,v=f.source,g=p===l&&v===u,y=u===p&&l===v;(i.codirected&&g||!i.codirected&&(g||y))&&n.push(d)}return this.spawn(n,{unique:!0}).filter(e)}}ji.clearTraversalCache=function(){for(var t=0;t<this.length;t++)this[t]._private.traversalCache=null},W(ji,{roots:qi({noIncomingEdges:!0}),leaves:qi({noOutgoingEdges:!0}),outgoers:wr(Fi({outgoing:!0}),"outgoers"),successors:Vi({outgoing:!0}),incomers:wr(Fi({incoming:!0}),"incomers"),predecessors:Vi({incoming:!0})}),W(ji,{neighborhood:wr((function(t){for(var e=[],n=this.nodes(),r=0;r<n.length;r++)for(var i=n[r],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],u=s.source(),l=s.target(),h=i===u?l:u;h.length>0&&e.push(h[0]),e.push(s[0])}return this.spawn(e,{unique:!0}).filter(t)}),"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}}),ji.neighbourhood=ji.neighborhood,ji.closedNeighbourhood=ji.closedNeighborhood,ji.openNeighbourhood=ji.openNeighborhood,W(ji,{source:wr((function(t){var e,n=this[0];return n&&(e=n._private.source||n.cy().collection()),e&&t?e.filter(t):e}),"source"),target:wr((function(t){var e,n=this[0];return n&&(e=n._private.target||n.cy().collection()),e&&t?e.filter(t):e}),"target"),sources:Wi({attr:"source"}),targets:Wi({attr:"target"})}),W(ji,{edgesWith:wr(Gi(),"edgesWith"),edgesTo:wr(Gi({thisIsSrc:!0}),"edgesTo")}),W(ji,{connectedEdges:wr((function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];if(r.isNode())for(var i=r._private.edges,a=0;a<i.length;a++){var o=i[a];e.push(o)}}return this.spawn(e,{unique:!0}).filter(t)}),"connectedEdges"),connectedNodes:wr((function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,{unique:!0}).filter(t)}),"connectedNodes"),parallelEdges:wr(Xi(),"parallelEdges"),codirectedEdges:wr(Xi({codirected:!0}),"codirectedEdges")}),W(ji,{components:function(t){var e=this,n=e.cy(),r=n.collection(),i=null==t?e.nodes():t.nodes(),a=[];null!=t&&i.empty()&&(i=t.sources());var o=function(t,e){r.merge(t),i.unmerge(t),e.merge(t)};if(i.empty())return e.spawn();var s=function(){var t=n.collection();a.push(t);var r=i[0];o(r,t),e.bfs({directed:!1,roots:r,visit:function(e){return o(e,t)}}),t.forEach((function(n){n.connectedEdges().forEach((function(n){e.has(n)&&t.has(n.source())&&t.has(n.target())&&t.merge(n)}))}))};do{s()}while(i.length>0);return a},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}}),ji.componentsOf=ji.components;var Yi=function(t,e,n){for(var r=null!=n?n:xt();t.hasElementWithId(r);)r=xt();return r},Ui=function(t,e,n){if(void 0!==t&&P(t)){var r=new Pt,i=!1;if(e){if(e.length>0&&_(e[0])&&!C(e[0])){i=!0;for(var a=[],o=new Dt,s=0,u=e.length;s<u;s++){var l=e[s];null==l.data&&(l.data={});var h=l.data;if(null==h.id)h.id=Yi(t);else if(t.hasElementWithId(h.id)||o.has(h.id))continue;var c=new It(t,l,!1);a.push(c),o.add(h.id)}e=a}}else e=[];this.length=0;for(var d=0,f=e.length;d<f;d++){var p=e[d][0];if(null!=p){var v=p._private.data.id;(null==n||n.unique&&!r.has(v))&&(r.set(v,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={cy:t,map:r},i&&this.restore()}else gt("A collection must have a reference to the core")},Hi=It.prototype=Ui.prototype;Hi.instanceString=function(){return"collection"},Hi.spawn=function(t,e,n){return P(t)||(n=e,e=t,t=this.cy()),new Ui(t,e,n)},Hi.spawnSelf=function(){return this.spawn(this)},Hi.cy=function(){return this._private.cy},Hi.renderer=function(){return this._private.cy.renderer()},Hi.element=function(){return this[0]},Hi.collection=function(){return S(this)?this:new Ui(this._private.cy,[this])},Hi.unique=function(){return new Ui(this._private.cy,this,{unique:!0})},Hi.hasElementWithId=function(t){return t=""+t,this._private.map.has(t)},Hi.getElementById=function(t){t=""+t;var e=this._private.cy,n=this._private.map.get(t);return n?n.ele:new Ui(e)},Hi.$id=Hi.getElementById,Hi.poolIndex=function(){var t=this._private.cy._private.elements,e=this[0]._private.data.id;return t._private.map.get(e).index},Hi.indexOf=function(t){var e=t[0]._private.data.id;return this._private.map.get(e).index},Hi.indexOfId=function(t){return t=""+t,this._private.map.get(t).index},Hi.json=function(t){var e=this.element(),n=this.cy();if(null==e&&t)return this;if(null!=e){var r=e._private;if(_(t)){if(n.startBatch(),t.data){e.data(t.data);var i=r.data;if(e.isEdge()){var a=!1,o={},s=t.data.source,u=t.data.target;null!=s&&s!=i.source&&(o.source=""+s,a=!0),null!=u&&u!=i.target&&(o.target=""+u,a=!0),a&&(e=e.move(o))}else{var l="parent"in t.data,h=t.data.parent;!l||null==h&&null==i.parent||h==i.parent||(void 0===h&&(h=null),null!=h&&(h=""+h),e=e.move({parent:h}))}}t.position&&e.position(t.position);var c=function(n,i,a){var o=t[n];null!=o&&o!==r[n]&&(o?e[i]():e[a]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),null!=t.classes&&e.classes(t.classes),n.endBatch(),this}if(void 0===t){var d={data:bt(r.data),position:bt(r.position),group:r.group,removed:r.removed,selected:r.selected,selectable:r.selectable,locked:r.locked,grabbable:r.grabbable,pannable:r.pannable,classes:""},f=0;return r.classes.forEach((function(t){return d.classes+=0==f++?t:" "+t})),d}}},Hi.jsons=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e].json();t.push(n)}return t},Hi.clone=function(){for(var t=this.cy(),e=[],n=0;n<this.length;n++){var r=this[n].json(),i=new It(t,r,!1);e.push(i)}return new Ui(t,e)},Hi.copy=Hi.clone,Hi.restore=function(){for(var t,e,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this,a=i.cy(),o=a._private,s=[],u=[],l=0,h=i.length;l<h;l++){var c=i[l];r&&!c.removed()||(c.isNode()?s.push(c):u.push(c))}t=s.concat(u);var d=function(){t.splice(e,1),e--};for(e=0;e<t.length;e++){var f=t[e],p=f._private,v=p.data;if(f.clearTraversalCache(),r||p.removed)if(void 0===v.id)v.id=Yi(a);else if(M(v.id))v.id=""+v.id;else{if(D(v.id)||!b(v.id)){gt("Can not create element with invalid string ID `"+v.id+"`"),d();continue}if(a.hasElementWithId(v.id)){gt("Can not create second element with ID `"+v.id+"`"),d();continue}}var g=v.id;if(f.isNode()){var y=p.position;null==y.x&&(y.x=0),null==y.y&&(y.y=0)}if(f.isEdge()){for(var m=f,x=["source","target"],w=x.length,_=!1,E=0;E<w;E++){var k=x[E],C=v[k];M(C)&&(C=v[k]=""+v[k]),null==C||""===C?(gt("Can not create edge `"+g+"` with unspecified "+k),_=!0):a.hasElementWithId(C)||(gt("Can not create edge `"+g+"` with nonexistant "+k+" `"+C+"`"),_=!0)}if(_){d();continue}var S=a.getElementById(v.source),P=a.getElementById(v.target);S.same(P)?S._private.edges.push(m):(S._private.edges.push(m),P._private.edges.push(m)),m._private.source=S,m._private.target=P}p.map=new Pt,p.map.set(g,{ele:f,index:0}),p.removed=!1,r&&a.addToPool(f)}for(var T=0;T<s.length;T++){var I=s[T],B=I._private.data;M(B.parent)&&(B.parent=""+B.parent);var N=B.parent;if(null!=N){var O=a.getElementById(N);if(O.empty())B.parent=void 0;else{for(var A=!1,z=O;!z.empty();){if(I.same(z)){A=!0,B.parent=void 0;break}z=z.parent()}A||(O[0]._private.children.push(I),I._private.parent=O[0],o.hasCompoundNodes=!0)}}}if(t.length>0){for(var L=new Ui(a,t),R=0;R<L.length;R++){var j=L[R];j.isNode()||(j.parallelEdges().clearTraversalCache(),j.source().clearTraversalCache(),j.target().clearTraversalCache())}(o.hasCompoundNodes?a.collection().merge(L).merge(L.connectedNodes()).merge(L.parent()):L).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(n),n?L.emitAndNotify("add"):r&&L.emit("add")}return i},Hi.removed=function(){var t=this[0];return t&&t._private.removed},Hi.inside=function(){var t=this[0];return t&&!t._private.removed},Hi.remove=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,r=[],i={},a=n._private.cy;function o(t){var n=i[t.id()];e&&t.removed()||n||(i[t.id()]=!0,t.isNode()?(r.push(t),function(t){for(var e=t._private.edges,n=0;n<e.length;n++)o(e[n])}(t),function(t){for(var e=t._private.children,n=0;n<e.length;n++)o(e[n])}(t)):r.unshift(t))}for(var s=0,u=n.length;s<u;s++)o(n[s]);function l(t,e){var n=t._private.edges;Et(n,e),t.clearTraversalCache()}function h(t){t.clearTraversalCache()}var c=[];function d(t,e){e=e[0];var n=(t=t[0])._private.children,r=t.id();Et(n,e),e._private.parent=null,c.ids[r]||(c.ids[r]=!0,c.push(t))}c.ids={},n.dirtyCompoundBoundsCache(),e&&a.removeFromPool(r);for(var f=0;f<r.length;f++){var p=r[f];if(p.isEdge()){var v=p.source()[0],g=p.target()[0];l(v,p),l(g,p);for(var y=p.parallelEdges(),m=0;m<y.length;m++){var b=y[m];h(b),b.isBundledBezier()&&b.dirtyBoundingBoxCache()}}else{var x=p.parent();0!==x.length&&d(x,p)}e&&(p._private.removed=!0)}var w=a._private.elements;a._private.hasCompoundNodes=!1;for(var _=0;_<w.length;_++)if(w[_].isParent()){a._private.hasCompoundNodes=!0;break}var M=new Ui(this.cy(),r);M.size()>0&&(t?M.emitAndNotify("remove"):e&&M.emit("remove"));for(var E=0;E<c.length;E++){var k=c[E];e&&k.removed()||k.updateStyle()}return M},Hi.move=function(t){var e=this._private.cy,n=this,r=!1,i=!1,a=function(t){return null==t?t:""+t};if(void 0!==t.source||void 0!==t.target){var o=a(t.source),s=a(t.target),u=null!=o&&e.hasElementWithId(o),l=null!=s&&e.hasElementWithId(s);(u||l)&&(e.batch((function(){n.remove(r,i),n.emitAndNotify("moveout");for(var t=0;t<n.length;t++){var e=n[t],a=e._private.data;e.isEdge()&&(u&&(a.source=o),l&&(a.target=s))}n.restore(r,i)})),n.emitAndNotify("move"))}else if(void 0!==t.parent){var h=a(t.parent);if(null===h||e.hasElementWithId(h)){var c=null===h?void 0:h;e.batch((function(){var t=n.remove(r,i);t.emitAndNotify("moveout");for(var e=0;e<n.length;e++){var a=n[e],o=a._private.data;a.isNode()&&(o.parent=c)}t.restore(r,i)})),n.emitAndNotify("move")}}return this},[jn,Jn,tr,mr,_r,Tr,Dr,ri,yi,mi,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},_i,Ei,Pi,zi,ji].forEach((function(t){W(Hi,t)}));var Zi={add:function(t){var e,n=this;if(k(t)){var r=t;if(r._private.cy===n)e=r.restore();else{for(var i=[],a=0;a<r.length;a++){var o=r[a];i.push(o.json())}e=new Ui(n,i)}}else if(w(t))e=new Ui(n,t);else if(_(t)&&(w(t.nodes)||w(t.edges))){for(var s=t,u=[],l=["nodes","edges"],h=0,c=l.length;h<c;h++){var d=l[h],f=s[d];if(w(f))for(var p=0,v=f.length;p<v;p++){var g=W({group:d},f[p]);u.push(g)}}e=new Ui(n,u)}else e=new It(n,t).collection();return e},remove:function(t){if(k(t));else if(b(t)){var e=t;t=this.$(e)}return t.remove()}};function Ki(t,e,n,r){var i=.1,a="undefined"!=typeof Float32Array;if(4!==arguments.length)return!1;for(var o=0;o<4;++o)if("number"!=typeof arguments[o]||isNaN(arguments[o])||!isFinite(arguments[o]))return!1;t=Math.min(t,1),n=Math.min(n,1),t=Math.max(t,0),n=Math.max(n,0);var s=a?new Float32Array(11):new Array(11);function u(t,e){return 1-3*e+3*t}function l(t,e){return 3*e-6*t}function h(t){return 3*t}function c(t,e,n){return((u(e,n)*t+l(e,n))*t+h(e))*t}function d(t,e,n){return 3*u(e,n)*t*t+2*l(e,n)*t+h(e)}var f=!1;var p=function(a){return f||(f=!0,t===e&&n===r||function(){for(var e=0;e<11;++e)s[e]=c(e*i,t,n)}()),t===e&&n===r?a:0===a?0:1===a?1:c(function(e){for(var r=0,a=1;10!==a&&s[a]<=e;++a)r+=i;--a;var o=r+(e-s[a])/(s[a+1]-s[a])*i,u=d(o,t,n);return u>=.001?function(e,r){for(var i=0;i<4;++i){var a=d(r,t,n);if(0===a)return r;r-=(c(r,t,n)-e)/a}return r}(e,o):0===u?o:function(e,r,i){var a,o,s=0;do{(a=c(o=r+(i-r)/2,t,n)-e)>0?i=o:r=o}while(Math.abs(a)>1e-7&&++s<10);return o}(e,r,r+i)}(a),e,r)};p.getControlPoints=function(){return[{x:t,y:e},{x:n,y:r}]};var v="generateBezier("+[t,e,n,r]+")";return p.toString=function(){return v},p}var $i=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},a=e(n,.5*r,i),o=e(n,.5*r,a),s=e(n,r,o),u=1/6*(i.dx+2*(a.dx+o.dx)+s.dx),l=1/6*(i.dv+2*(a.dv+o.dv)+s.dv);return n.x=n.x+u*r,n.v=n.v+l*r,n}return function t(e,r,i){var a,o,s,u={x:-1,v:0,tension:null,friction:null},l=[0],h=0,c=1e-4;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,u.tension=e,u.friction=r,o=(a=null!==i)?(h=t(e,r))/i*.016:.016;s=n(s||u,o),l.push(1+s.x),h+=16,Math.abs(s.x)>c&&Math.abs(s.v)>c;);return a?function(t){return l[t*(l.length-1)|0]}:h}}(),Qi=function(t,e,n,r){var i=Ki(t,e,n,r);return function(t,e,n){return t+(e-t)*i(n)}},Ji={linear:function(t,e,n){return t+(e-t)*n},ease:Qi(.25,.1,.25,1),"ease-in":Qi(.42,0,1,1),"ease-out":Qi(0,0,.58,1),"ease-in-out":Qi(.42,0,.58,1),"ease-in-sine":Qi(.47,0,.745,.715),"ease-out-sine":Qi(.39,.575,.565,1),"ease-in-out-sine":Qi(.445,.05,.55,.95),"ease-in-quad":Qi(.55,.085,.68,.53),"ease-out-quad":Qi(.25,.46,.45,.94),"ease-in-out-quad":Qi(.455,.03,.515,.955),"ease-in-cubic":Qi(.55,.055,.675,.19),"ease-out-cubic":Qi(.215,.61,.355,1),"ease-in-out-cubic":Qi(.645,.045,.355,1),"ease-in-quart":Qi(.895,.03,.685,.22),"ease-out-quart":Qi(.165,.84,.44,1),"ease-in-out-quart":Qi(.77,0,.175,1),"ease-in-quint":Qi(.755,.05,.855,.06),"ease-out-quint":Qi(.23,1,.32,1),"ease-in-out-quint":Qi(.86,0,.07,1),"ease-in-expo":Qi(.95,.05,.795,.035),"ease-out-expo":Qi(.19,1,.22,1),"ease-in-out-expo":Qi(1,0,0,1),"ease-in-circ":Qi(.6,.04,.98,.335),"ease-out-circ":Qi(.075,.82,.165,1),"ease-in-out-circ":Qi(.785,.135,.15,.86),spring:function(t,e,n){if(0===n)return Ji.linear;var r=$i(t,e,n);return function(t,e,n){return t+(e-t)*r(n)}},"cubic-bezier":Qi};function ta(t,e,n,r,i){if(1===r)return n;if(e===n)return n;var a=i(e,n,r);return null==t||((t.roundValue||t.color)&&(a=Math.round(a)),void 0!==t.min&&(a=Math.max(a,t.min)),void 0!==t.max&&(a=Math.min(a,t.max))),a}function ea(t,e){return null!=t.pfValue||null!=t.value?null==t.pfValue||null!=e&&"%"===e.type.units?t.value:t.pfValue:t}function na(t,e,n,r,i){var a=null!=i?i.type:null;n<0?n=0:n>1&&(n=1);var o=ea(t,i),s=ea(e,i);if(M(o)&&M(s))return ta(a,o,s,n,r);if(w(o)&&w(s)){for(var u=[],l=0;l<s.length;l++){var h=o[l],c=s[l];if(null!=h&&null!=c){var d=ta(a,h,c,n,r);u.push(d)}else u.push(c)}return u}}function ra(t,e,n,r){var i=!r,a=t._private,o=e._private,s=o.easing,u=o.startTime,l=(r?t:t.cy()).style();if(!o.easingImpl)if(null==s)o.easingImpl=Ji.linear;else{var h,c,d;h=b(s)?l.parse("transition-timing-function",s).value:s,b(h)?(c=h,d=[]):(c=h[1],d=h.slice(2).map((function(t){return+t}))),d.length>0?("spring"===c&&d.push(o.duration),o.easingImpl=Ji[c].apply(null,d)):o.easingImpl=Ji[c]}var f,p=o.easingImpl;if(f=0===o.duration?1:(n-u)/o.duration,o.applying&&(f=o.progress),f<0?f=0:f>1&&(f=1),null==o.delay){var v=o.startPosition,g=o.position;if(g&&i&&!t.locked()){var y={};ia(v.x,g.x)&&(y.x=na(v.x,g.x,f,p)),ia(v.y,g.y)&&(y.y=na(v.y,g.y,f,p)),t.position(y)}var m=o.startPan,x=o.pan,w=a.pan,_=null!=x&&r;_&&(ia(m.x,x.x)&&(w.x=na(m.x,x.x,f,p)),ia(m.y,x.y)&&(w.y=na(m.y,x.y,f,p)),t.emit("pan"));var M=o.startZoom,E=o.zoom,k=null!=E&&r;k&&(ia(M,E)&&(a.zoom=ie(a.minZoom,na(M,E,f,p),a.maxZoom)),t.emit("zoom")),(_||k)&&t.emit("viewport");var C=o.style;if(C&&C.length>0&&i){for(var S=0;S<C.length;S++){var P=C[S],T=P.name,D=P,I=o.startStyle[T],B=na(I,D,f,p,l.properties[I.name]);l.overrideBypass(t,T,B)}t.emit("style")}}return o.progress=f,f}function ia(t,e){return!!(null!=t&&null!=e&&(M(t)&&M(e)||t&&e))}function aa(t,e,n,r){var i=e._private;i.started=!0,i.startTime=n-i.progress*i.duration}function oa(t,e){var n=e._private.aniEles,r=[];function i(e,n){var i=e._private,a=i.animation.current,o=i.animation.queue,s=!1;if(0===a.length){var u=o.shift();u&&a.push(u)}for(var l=function(t){for(var e=t.length-1;e>=0;e--)(0,t[e])();t.splice(0,t.length)},h=a.length-1;h>=0;h--){var c=a[h],d=c._private;d.stopped?(a.splice(h,1),d.hooked=!1,d.playing=!1,d.started=!1,l(d.frames)):(d.playing||d.applying)&&(d.playing&&d.applying&&(d.applying=!1),d.started||aa(0,c,t),ra(e,c,t,n),d.applying&&(d.applying=!1),l(d.frames),null!=d.step&&d.step(t),c.completed()&&(a.splice(h,1),d.hooked=!1,d.playing=!1,d.started=!1,l(d.completes)),s=!0)}return n||0!==a.length||0!==o.length||r.push(e),s}for(var a=!1,o=0;o<n.length;o++){var s=i(n[o]);a=a||s}var u=i(e,!0);(a||u)&&(n.length>0?e.notify("draw",n):e.notify("draw")),n.unmerge(r),e.emit("step")}var sa={animate:Qn.animate(),animation:Qn.animation(),animated:Qn.animated(),clearQueue:Qn.clearQueue(),delay:Qn.delay(),delayAnimation:Qn.delayAnimation(),stop:Qn.stop(),addToAnimationPool:function(t){this.styleEnabled()&&this._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,t.styleEnabled()){var e=t.renderer();e&&e.beforeRender?e.beforeRender((function(e,n){oa(n,t)}),e.beforeRenderPriorities.animations):function e(){t._private.animationsRunning&&K((function(n){oa(n,t),e()}))}()}}},ua={qualifierCompare:function(t,e){return null==t||null==e?null==t&&null==e:t.sameText(e)},eventMatches:function(t,e,n){var r=e.qualifier;return null==r||t!==n.target&&C(n.target)&&r.matches(n.target)},addEventFields:function(t,e){e.cy=t,e.target=t},callbackContext:function(t,e,n){return null!=e.qualifier?n.target:t}},la=function(t){return b(t)?new gr(t):t},ha={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new ci(ua,this)),this},emitter:function(){return this._private.emitter},on:function(t,e,n){return this.emitter().on(t,la(e),n),this},removeListener:function(t,e,n){return this.emitter().removeListener(t,la(e),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,e,n){return this.emitter().one(t,la(e),n),this},once:function(t,e,n){return this.emitter().one(t,la(e),n),this},emit:function(t,e){return this.emitter().emit(t,e),this},emitAndNotify:function(t,e){return this.emit(t),this.notify(t,e),this}};Qn.eventAliasesOn(ha);var ca={png:function(t){return t=t||{},this._private.renderer.png(t)},jpg:function(t){var e=this._private.renderer;return(t=t||{}).bg=t.bg||"#fff",e.jpg(t)}};ca.jpeg=ca.jpg;var da={layout:function(t){var e=this;if(null!=t)if(null!=t.name){var n,r=t.name,i=e.extension("layout",r);if(null!=i)return n=b(t.eles)?e.$(t.eles):null!=t.eles?t.eles:e.$(),new i(W({},t,{cy:e,eles:n}));gt("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?")}else gt("A `name` must be specified to make a layout");else gt("Layout options must be specified to make a layout")}};da.createLayout=da.makeLayout=da.layout;var fa={notify:function(t,e){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[t]=n.batchNotifications[t]||this.collection();null!=e&&r.merge(e)}else if(n.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(t,e)}},notifications:function(t){var e=this._private;return void 0===t?e.notificationsEnabled:(e.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return null==t.batchCount&&(t.batchCount=0),0===t.batchCount&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(0===t.batchCount)return this;if(t.batchCount--,0===t.batchCount){t.batchStyleEles.updateStyle();var e=this.renderer();Object.keys(t.batchNotifications).forEach((function(n){var r=t.batchNotifications[n];r.empty()?e.notify(n):e.notify(n,r)}))}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var e=this;return this.batch((function(){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];e.getElementById(i).data(a)}}))}},pa=Mt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),va={renderTo:function(t,e,n,r){return this._private.renderer.renderTo(t,e,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var e=this,n=e.extension("renderer",t.name);if(null!=n){void 0!==t.wheelSensitivity&&mt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var r=pa(t);r.cy=e,e._private.renderer=new n(r),this.notify("init")}else gt("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"))},destroyRenderer:function(){var t=this;t.notify("destroy");var e=t.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach((function(t){var e=t._private;e.rscratch={},e.rstyle={},e.animation.current=[],e.animation.queue=[]}))},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};va.invalidateDimensions=va.resize;var ga={collection:function(t,e){return b(t)?this.$(t):k(t)?t.collection():w(t)?new Ui(this,t,e):new Ui(this)},nodes:function(t){var e=this.$((function(t){return t.isNode()}));return t?e.filter(t):e},edges:function(t){var e=this.$((function(t){return t.isEdge()}));return t?e.filter(t):e},$:function(t){var e=this._private.elements;return t?e.filter(t):e.spawnSelf()},mutableElements:function(){return this._private.elements}};ga.elements=ga.filter=ga.$;var ya={},ma="t";ya.apply=function(t){var e=this,n=e._private,r=n.cy.collection();n.newStyle&&(n.contextStyles={},n.propDiffs={},e.cleanElements(t,!0));for(var i=0;i<t.length;i++){var a=t[i],o=e.getContextMeta(a);if(!o.empty){var s=e.getContextStyle(o),u=e.applyContextStyle(o,s,a);n.newStyle||e.updateTransitions(a,u.diffProps),e.updateStyleHints(a)&&r.merge(a)}}return n.newStyle=!1,r},ya.getPropertiesDiff=function(t,e){var n=this,r=n._private.propDiffs=n._private.propDiffs||{},i=t+"-"+e,a=r[i];if(a)return a;for(var o=[],s={},u=0;u<n.length;u++){var l=n[u],h=t[u]===ma,c=e[u]===ma,d=h!==c,f=l.mappedProperties.length>0;if(d||c&&f){var p=void 0;d&&f||d?p=l.properties:f&&(p=l.mappedProperties);for(var v=0;v<p.length;v++){for(var g=p[v],y=g.name,m=!1,b=u+1;b<n.length;b++){var x=n[b];if(e[b]===ma&&(m=null!=x.properties[g.name]))break}s[y]||m||(s[y]=!0,o.push(y))}}}return r[i]=o,o},ya.getContextMeta=function(t){var e,n=this,r="",i=t._private.styleCxtKey||"";n._private.newStyle&&(i="");for(var a=0;a<n.length;a++){var o=n[a];r+=o.selector&&o.selector.matches(t)?ma:"f"}return e=n.getPropertiesDiff(i,r),t._private.styleCxtKey=r,{key:r,diffPropNames:e,empty:0===e.length}},ya.getContextStyle=function(t){var e=t.key,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},i=0;i<this.length;i++){var a=this[i];if(e[i]===ma)for(var o=0;o<a.properties.length;o++){var s=a.properties[o];r[s.name]=s}}return n[e]=r,r},ya.applyContextStyle=function(t,e,n){for(var r=t.diffPropNames,i={},a=this.types,o=0;o<r.length;o++){var s=r[o],u=e[s],l=n.pstyle(s);if(!u){if(!l)continue;u=l.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0}}if(l!==u){if(u.mapped===a.fn&&null!=l&&null!=l.mapping&&l.mapping.value===u.value){var h=l.mapping;if((h.fnValue=u.value(n))===h.prevFnValue)continue}var c=i[s]={prev:l};this.applyParsedProperty(n,u),c.next=n.pstyle(s),c.next&&c.next.bypass&&(c.next=c.next.bypassed)}}return{diffProps:i}},ya.updateStyleHints=function(t){var e=t._private,n=this,r=n.propertyGroupNames,i=n.propertyGroupKeys,a=function(t,e,r){return n.getPropertiesHash(t,e,r)},o=e.styleKey;if(t.removed())return!1;var s="nodes"===e.group,u=t._private.style;r=Object.keys(u);for(var l=0;l<i.length;l++){var h=i[l];e.styleKeys[h]=[Q,J]}for(var c=function(t,n){return e.styleKeys[n][0]=et(t,e.styleKeys[n][0])},d=function(t,n){return e.styleKeys[n][1]=nt(t,e.styleKeys[n][1])},f=function(t,e){c(t,e),d(t,e)},p=function(t,e){for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);c(r,e),d(r,e)}},v=function(t){return-128<t&&t<128&&Math.floor(t)!==t?2e9-(1024*t|0):t},g=0;g<r.length;g++){var y=r[g],m=u[y];if(null!=m){var b=this.properties[y],x=b.type,w=b.groupKey,_=void 0;null!=b.hashOverride?_=b.hashOverride(t,m):null!=m.pfValue&&(_=m.pfValue);var M=null==b.enums?m.value:null,E=null!=_,k=E||null!=M,C=m.units;if(x.number&&k){var S=E?_:M;if(x.multiple)for(var P=0;P<S.length;P++)f(v(S[P]),w);else f(v(S),w);E||null==C||p(C,w)}else p(m.strValue,w)}}for(var T=[Q,J],D=0;D<i.length;D++){var I=i[D],B=e.styleKeys[I];T[0]=et(B[0],T[0]),T[1]=nt(B[1],T[1])}e.styleKey=2097152*T[0]+T[1];var N=e.styleKeys;e.labelDimsKey=rt(N.labelDimensions);var O=a(t,["label"],N.labelDimensions);if(e.labelKey=rt(O),e.labelStyleKey=rt(it(N.commonLabel,O)),!s){var A=a(t,["source-label"],N.labelDimensions);e.sourceLabelKey=rt(A),e.sourceLabelStyleKey=rt(it(N.commonLabel,A));var z=a(t,["target-label"],N.labelDimensions);e.targetLabelKey=rt(z),e.targetLabelStyleKey=rt(it(N.commonLabel,z))}if(s){var L=e.styleKeys,R=L.nodeBody,j=L.nodeBorder,q=L.backgroundImage,F=L.compound,V=L.pie,W=[j,q,F,V].reduce(it,R);e.nodeKey=rt(W),e.hasPie=V[0]!==Q&&V[1]!==J}return o!==e.styleKey},ya.clearStyleHints=function(t){var e=t._private;e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null},ya.applyParsedProperty=function(t,e){var n,r=this,i=e,a=t._private.style,o=r.types,s=r.properties[i.name].type,u=i.bypass,l=a[i.name],h=l&&l.bypass,c=t._private,d="mapping",f=function(t){return null==t?null:null!=t.pfValue?t.pfValue:t.value},p=function(){var e=f(l),n=f(i);r.checkTriggers(t,i.name,e,n)};if("curve-style"===e.name&&t.isEdge()&&("bezier"!==e.value&&t.isLoop()||"haystack"===e.value&&(t.source().isParent()||t.target().isParent()))&&(i=e=this.parse(e.name,"bezier",u)),i.delete)return a[i.name]=void 0,p(),!0;if(i.deleteBypassed)return l?!!l.bypass&&(l.bypassed=void 0,p(),!0):(p(),!0);if(i.deleteBypass)return l?!!l.bypass&&(a[i.name]=l.bypassed,p(),!0):(p(),!0);var v=function(){mt("Do not assign mappings to elements without corresponding data (i.e. ele `"+t.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case o.mapData:for(var g,y=i.field.split("."),m=c.data,b=0;b<y.length&&m;b++)m=m[y[b]];if(null==m)return v(),!1;if(!M(m))return mt("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+m+"` for `"+t.id()+"` is non-numeric)"),!1;var x=i.fieldMax-i.fieldMin;if((g=0===x?0:(m-i.fieldMin)/x)<0?g=0:g>1&&(g=1),s.color){var w=i.valueMin[0],_=i.valueMax[0],E=i.valueMin[1],k=i.valueMax[1],C=i.valueMin[2],S=i.valueMax[2],P=null==i.valueMin[3]?1:i.valueMin[3],T=null==i.valueMax[3]?1:i.valueMax[3],D=[Math.round(w+(_-w)*g),Math.round(E+(k-E)*g),Math.round(C+(S-C)*g),Math.round(P+(T-P)*g)];n={bypass:i.bypass,name:i.name,value:D,strValue:"rgb("+D[0]+", "+D[1]+", "+D[2]+")"}}else{if(!s.number)return!1;var I=i.valueMin+(i.valueMax-i.valueMin)*g;n=this.parse(i.name,I,i.bypass,d)}if(!n)return v(),!1;n.mapping=i,i=n;break;case o.data:for(var B=i.field.split("."),N=c.data,O=0;O<B.length&&N;O++)N=N[B[O]];if(null!=N&&(n=this.parse(i.name,N,i.bypass,d)),!n)return v(),!1;n.mapping=i,i=n;break;case o.fn:var A=i.value,z=null!=i.fnValue?i.fnValue:A(t);if(i.prevFnValue=z,null==z)return mt("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+t.id()+"` is null)"),!1;if(!(n=this.parse(i.name,z,i.bypass,d)))return mt("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+t.id()+"` is invalid)"),!1;n.mapping=bt(i),i=n;break;case void 0:break;default:return!1}return u?(i.bypassed=h?l.bypassed:l,a[i.name]=i):h?l.bypassed=i:a[i.name]=i,p(),!0},ya.cleanElements=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(this.clearStyleHints(r),r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),e)for(var i=r._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],u=i[s];null!=u&&(u.bypass?u.bypassed=null:i[s]=null)}else r._private.style={}}},ya.update=function(){this._private.cy.mutableElements().updateStyle()},ya.updateTransitions=function(t,e){var n=this,r=t._private,i=t.pstyle("transition-property").value,a=t.pstyle("transition-duration").pfValue,o=t.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},u=!1,l=0;l<i.length;l++){var h=i[l],c=t.pstyle(h),d=e[h];if(d){var f=d.prev,p=null!=d.next?d.next:c,v=!1,g=void 0,y=1e-6;f&&(M(f.pfValue)&&M(p.pfValue)?(v=p.pfValue-f.pfValue,g=f.pfValue+y*v):M(f.value)&&M(p.value)?(v=p.value-f.value,g=f.value+y*v):w(f.value)&&w(p.value)&&(v=f.value[0]!==p.value[0]||f.value[1]!==p.value[1]||f.value[2]!==p.value[2],g=f.strValue),v&&(s[h]=p.strValue,this.applyBypass(t,h,g),u=!0))}}if(!u)return;r.transitioning=!0,new Yn((function(e){o>0?t.delayAnimation(o).play().promise().then(e):e()})).then((function(){return t.animation({style:s,duration:a,easing:t.pstyle("transition-timing-function").value,queue:!1}).play().promise()})).then((function(){n.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1}))}else r.transitioning&&(this.removeBypasses(t,i),t.emitAndNotify("style"),r.transitioning=!1)},ya.checkTrigger=function(t,e,n,r,i,a){var o=this.properties[e],s=i(o);null!=s&&s(n,r)&&a(o)},ya.checkZOrderTrigger=function(t,e,n,r){var i=this;this.checkTrigger(t,e,n,r,(function(t){return t.triggersZOrder}),(function(){i._private.cy.notify("zorder",t)}))},ya.checkBoundsTrigger=function(t,e,n,r){this.checkTrigger(t,e,n,r,(function(t){return t.triggersBounds}),(function(i){t.dirtyCompoundBoundsCache(),t.dirtyBoundingBoxCache(),"bezier"!==t.pstyle("curve-style").value&&("curve-style"!==e||"bezier"!==n&&"bezier"!==r)||!i.triggersBoundsOfParallelBeziers||t.parallelEdges().forEach((function(t){t.isBundledBezier()&&t.dirtyBoundingBoxCache()}))}))},ya.checkTriggers=function(t,e,n,r){t.dirtyStyleCache(),this.checkZOrderTrigger(t,e,n,r),this.checkBoundsTrigger(t,e,n,r)};var ba={applyBypass:function(t,e,n,r){var i=[];if("*"===e||"**"===e){if(void 0!==n)for(var a=0;a<this.properties.length;a++){var o=this.properties[a].name,s=this.parse(o,n,!0);s&&i.push(s)}}else if(b(e)){var u=this.parse(e,n,!0);u&&i.push(u)}else{if(!_(e))return!1;var l=e;r=n;for(var h=Object.keys(l),c=0;c<h.length;c++){var d=h[c],f=l[d];if(void 0===f&&(f=l[O(d)]),void 0!==f){var p=this.parse(d,f,!0);p&&i.push(p)}}}if(0===i.length)return!1;for(var v=!1,g=0;g<t.length;g++){for(var y=t[g],m={},x=void 0,w=0;w<i.length;w++){var M=i[w];if(r){var E=y.pstyle(M.name);x=m[M.name]={prev:E}}v=this.applyParsedProperty(y,M)||v,r&&(x.next=y.pstyle(M.name))}v&&this.updateStyleHints(y),r&&this.updateTransitions(y,m,!0)}return v},overrideBypass:function(t,e,n){e=N(e);for(var r=0;r<t.length;r++){var i=t[r],a=i._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,l=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=n,null!=a.pfValue&&(a.pfValue=n),a.strValue=s?"rgb("+n.join(",")+")":u?n.join(" "):""+n,this.updateStyleHints(i)):this.applyBypass(i,e,n),this.checkTriggers(i,e,l,n)}},removeAllBypasses:function(t,e){return this.removeBypasses(t,this.propertyNames,e)},removeBypasses:function(t,e,n){for(var r=0;r<t.length;r++){for(var i=t[r],a={},o=0;o<e.length;o++){var s=e[o],u=this.properties[s],l=i.pstyle(u.name);if(l&&l.bypass){var h=this.parse(s,"",!0),c=a[u.name]={prev:l};this.applyParsedProperty(i,h),c.next=i.pstyle(u.name)}}this.updateStyleHints(i),n&&this.updateTransitions(i,a,!0)}}},xa={getEmSizeInPixels:function(){var t=this.containerCss("font-size");return null!=t?parseFloat(t):1},containerCss:function(t){var e=this._private.cy.container();if(d&&e&&d.getComputedStyle)return d.getComputedStyle(e).getPropertyValue(t)}},wa={getRenderedStyle:function(t,e){return e?this.getStylePropertyValue(t,e,!0):this.getRawStyle(t,!0)},getRawStyle:function(t,e){var n=this;if(t=t[0]){for(var r={},i=0;i<n.properties.length;i++){var a=n.properties[i],o=n.getStylePropertyValue(t,a.name,e);null!=o&&(r[a.name]=o,r[O(a.name)]=o)}return r}},getIndexedStyle:function(t,e,n,r){var i=t.pstyle(e)[n][r];return null!=i?i:t.cy().style().getDefaultProperty(e)[n][0]},getStylePropertyValue:function(t,e,n){if(t=t[0]){var r=this.properties[e];r.alias&&(r=r.pointsTo);var i=r.type,a=t.pstyle(r.name);if(a){var o=a.value,s=a.units,u=a.strValue;if(n&&i.number&&null!=o&&M(o)){var l=t.cy().zoom(),h=function(t){return t*l},c=function(t,e){return h(t)+e},d=w(o);return(d?s.every((function(t){return null!=t})):null!=s)?d?o.map((function(t,e){return c(t,s[e])})).join(" "):c(o,s):d?o.map((function(t){return b(t)?t:""+h(t)})).join(" "):""+h(o)}if(null!=u)return u}return null}},getAnimationStartStyle:function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r].name,a=t.pstyle(i);void 0!==a&&(a=_(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(n[i]=a)}return n},getPropsList:function(t){var e=[],n=t,r=this.properties;if(n)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o],u=r[o]||r[N(o)],l=this.parse(u.name,s);l&&e.push(l)}return e},getNonDefaultPropertiesHash:function(t,e,n){var r,i,a,o,s,u,l=n.slice();for(s=0;s<e.length;s++)if(r=e[s],null!=(i=t.pstyle(r,!1)))if(null!=i.pfValue)l[0]=et(o,l[0]),l[1]=nt(o,l[1]);else for(a=i.strValue,u=0;u<a.length;u++)o=a.charCodeAt(u),l[0]=et(o,l[0]),l[1]=nt(o,l[1]);return l}};wa.getPropertiesHash=wa.getNonDefaultPropertiesHash;var _a={appendFromJson:function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n],i=r.selector,a=r.style||r.css,o=Object.keys(a);e.selector(i);for(var s=0;s<o.length;s++){var u=o[s],l=a[u];e.css(u,l)}}return e},fromJson:function(t){var e=this;return e.resetToDefault(),e.appendFromJson(t),e},json:function(){for(var t=[],e=this.defaultLength;e<this.length;e++){for(var n=this[e],r=n.selector,i=n.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}t.push({selector:r?r.toString():"core",style:a})}return t}},Ma={appendFromString:function(t){var e,n,r,i=this,a=""+t;function o(){a=a.length>e.length?a.substr(e.length):""}function s(){n=n.length>r.length?n.substr(r.length):""}for(a=a.replace(/[/][*](\s|.)+?[*][/]/g,"");!a.match(/^\s*$/);){var u=a.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!u){mt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+a);break}e=u[0];var l=u[1];if("core"!==l&&new gr(l).invalid)mt("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),o();else{var h=u[2],c=!1;n=h;for(var d=[];!n.match(/^\s*$/);){var f=n.match(/^\s*(.+?)\s*:\s*(.+?)\s*;/);if(!f){mt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),c=!0;break}r=f[0];var p=f[1],v=f[2];this.properties[p]?i.parse(p,v)?(d.push({name:p,val:v}),s()):(mt("Skipping property: Invalid property definition in: "+r),s()):(mt("Skipping property: Invalid property name in: "+r),s())}if(c){o();break}i.selector(l);for(var g=0;g<d.length;g++){var y=d[g];i.css(y.name,y.val)}o()}}return i},fromString:function(t){var e=this;return e.resetToDefault(),e.appendFromString(t),e}},Ea={};!function(){var t=L,e=j,n=F,r=function(t){return"^"+t+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(r){var i=t+"|\\w+|"+e+"|"+n+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+r+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+t+")\\s*\\,\\s*("+t+")\\s*,\\s*("+i+")\\s*\\,\\s*("+i+")\\)$"},a=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];Ea.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","taxi"]},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","polygon"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:r("data")},layoutData:{mapping:!0,regex:r("layoutData")},scratch:{mapping:!0,regex:r("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:a,singleRegexMatchValue:!0},urls:{regexes:a,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(t,e){switch(t.length){case 2:return"deg"!==e[0]&&"rad"!==e[0]&&"deg"!==e[1]&&"rad"!==e[1];case 1:return b(t[0])||"deg"===e[0]||"rad"===e[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*,\\s*("+t+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(t){var e=t.length;return 1===e||2===e||4===e}}};var o={zeroNonZero:function(t,e){return(null==t||null==e)&&t!==e||0==t&&0!=e||0!=t&&0==e},any:function(t,e){return t!=e},emptyNonEmpty:function(t,e){var n=D(t),r=D(e);return n&&!r||!n&&r}},s=Ea.types,u=[{name:"label",type:s.text,triggersBounds:o.any,triggersZOrder:o.emptyNonEmpty},{name:"text-rotation",type:s.textRotation,triggersBounds:o.any},{name:"text-margin-x",type:s.bidirectionalSize,triggersBounds:o.any},{name:"text-margin-y",type:s.bidirectionalSize,triggersBounds:o.any}],l=[{name:"source-label",type:s.text,triggersBounds:o.any},{name:"source-text-rotation",type:s.textRotation,triggersBounds:o.any},{name:"source-text-margin-x",type:s.bidirectionalSize,triggersBounds:o.any},{name:"source-text-margin-y",type:s.bidirectionalSize,triggersBounds:o.any},{name:"source-text-offset",type:s.size,triggersBounds:o.any}],h=[{name:"target-label",type:s.text,triggersBounds:o.any},{name:"target-text-rotation",type:s.textRotation,triggersBounds:o.any},{name:"target-text-margin-x",type:s.bidirectionalSize,triggersBounds:o.any},{name:"target-text-margin-y",type:s.bidirectionalSize,triggersBounds:o.any},{name:"target-text-offset",type:s.size,triggersBounds:o.any}],c=[{name:"font-family",type:s.fontFamily,triggersBounds:o.any},{name:"font-style",type:s.fontStyle,triggersBounds:o.any},{name:"font-weight",type:s.fontWeight,triggersBounds:o.any},{name:"font-size",type:s.size,triggersBounds:o.any},{name:"text-transform",type:s.textTransform,triggersBounds:o.any},{name:"text-wrap",type:s.textWrap,triggersBounds:o.any},{name:"text-overflow-wrap",type:s.textOverflowWrap,triggersBounds:o.any},{name:"text-max-width",type:s.size,triggersBounds:o.any},{name:"text-outline-width",type:s.size,triggersBounds:o.any},{name:"line-height",type:s.positiveNumber,triggersBounds:o.any}],d=[{name:"text-valign",type:s.valign,triggersBounds:o.any},{name:"text-halign",type:s.halign,triggersBounds:o.any},{name:"color",type:s.color},{name:"text-outline-color",type:s.color},{name:"text-outline-opacity",type:s.zeroOneNumber},{name:"text-background-color",type:s.color},{name:"text-background-opacity",type:s.zeroOneNumber},{name:"text-background-padding",type:s.size,triggersBounds:o.any},{name:"text-border-opacity",type:s.zeroOneNumber},{name:"text-border-color",type:s.color},{name:"text-border-width",type:s.size,triggersBounds:o.any},{name:"text-border-style",type:s.borderStyle,triggersBounds:o.any},{name:"text-background-shape",type:s.textBackgroundShape,triggersBounds:o.any},{name:"text-justification",type:s.justification}],f=[{name:"events",type:s.bool},{name:"text-events",type:s.bool}],p=[{name:"display",type:s.display,triggersZOrder:o.any,triggersBounds:o.any,triggersBoundsOfParallelBeziers:!0},{name:"visibility",type:s.visibility,triggersZOrder:o.any},{name:"opacity",type:s.zeroOneNumber,triggersZOrder:o.zeroNonZero},{name:"text-opacity",type:s.zeroOneNumber},{name:"min-zoomed-font-size",type:s.size},{name:"z-compound-depth",type:s.zCompoundDepth,triggersZOrder:o.any},{name:"z-index-compare",type:s.zIndexCompare,triggersZOrder:o.any},{name:"z-index",type:s.nonNegativeInt,triggersZOrder:o.any}],v=[{name:"overlay-padding",type:s.size,triggersBounds:o.any},{name:"overlay-color",type:s.color},{name:"overlay-opacity",type:s.zeroOneNumber,triggersBounds:o.zeroNonZero}],g=[{name:"transition-property",type:s.propList},{name:"transition-duration",type:s.time},{name:"transition-delay",type:s.time},{name:"transition-timing-function",type:s.easing}],y=function(t,e){return"label"===e.value?-t.poolIndex():e.pfValue},m=[{name:"height",type:s.nodeSize,triggersBounds:o.any,hashOverride:y},{name:"width",type:s.nodeSize,triggersBounds:o.any,hashOverride:y},{name:"shape",type:s.nodeShape,triggersBounds:o.any},{name:"shape-polygon-points",type:s.polygonPointList,triggersBounds:o.any},{name:"background-color",type:s.color},{name:"background-fill",type:s.fill},{name:"background-opacity",type:s.zeroOneNumber},{name:"background-blacken",type:s.nOneOneNumber},{name:"background-gradient-stop-colors",type:s.colors},{name:"background-gradient-stop-positions",type:s.percentages},{name:"background-gradient-direction",type:s.gradientDirection},{name:"padding",type:s.sizeMaybePercent,triggersBounds:o.any},{name:"padding-relative-to",type:s.paddingRelativeTo,triggersBounds:o.any},{name:"bounds-expansion",type:s.boundsExpansion,triggersBounds:o.any}],x=[{name:"border-color",type:s.color},{name:"border-opacity",type:s.zeroOneNumber},{name:"border-width",type:s.size,triggersBounds:o.any},{name:"border-style",type:s.borderStyle}],w=[{name:"background-image",type:s.urls},{name:"background-image-crossorigin",type:s.bgCrossOrigin},{name:"background-image-opacity",type:s.zeroOneNumbers},{name:"background-position-x",type:s.bgPos},{name:"background-position-y",type:s.bgPos},{name:"background-width-relative-to",type:s.bgRelativeTo},{name:"background-height-relative-to",type:s.bgRelativeTo},{name:"background-repeat",type:s.bgRepeat},{name:"background-fit",type:s.bgFit},{name:"background-clip",type:s.bgClip},{name:"background-width",type:s.bgWH},{name:"background-height",type:s.bgWH},{name:"background-offset-x",type:s.bgPos},{name:"background-offset-y",type:s.bgPos}],_=[{name:"position",type:s.position,triggersBounds:o.any},{name:"compound-sizing-wrt-labels",type:s.compoundIncludeLabels,triggersBounds:o.any},{name:"min-width",type:s.size,triggersBounds:o.any},{name:"min-width-bias-left",type:s.sizeMaybePercent,triggersBounds:o.any},{name:"min-width-bias-right",type:s.sizeMaybePercent,triggersBounds:o.any},{name:"min-height",type:s.size,triggersBounds:o.any},{name:"min-height-bias-top",type:s.sizeMaybePercent,triggersBounds:o.any},{name:"min-height-bias-bottom",type:s.sizeMaybePercent,triggersBounds:o.any}],M=[{name:"line-style",type:s.lineStyle},{name:"line-color",type:s.color},{name:"line-fill",type:s.fill},{name:"line-cap",type:s.lineCap},{name:"line-dash-pattern",type:s.numbers},{name:"line-dash-offset",type:s.number},{name:"line-gradient-stop-colors",type:s.colors},{name:"line-gradient-stop-positions",type:s.percentages},{name:"curve-style",type:s.curveStyle,triggersBounds:o.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:s.zeroOneNumber,triggersBounds:o.any},{name:"source-endpoint",type:s.edgeEndpoint,triggersBounds:o.any},{name:"target-endpoint",type:s.edgeEndpoint,triggersBounds:o.any},{name:"control-point-step-size",type:s.size,triggersBounds:o.any},{name:"control-point-distances",type:s.bidirectionalSizes,triggersBounds:o.any},{name:"control-point-weights",type:s.numbers,triggersBounds:o.any},{name:"segment-distances",type:s.bidirectionalSizes,triggersBounds:o.any},{name:"segment-weights",type:s.numbers,triggersBounds:o.any},{name:"taxi-turn",type:s.bidirectionalSizeMaybePercent,triggersBounds:o.any},{name:"taxi-turn-min-distance",type:s.size,triggersBounds:o.any},{name:"taxi-direction",type:s.axisDirection,triggersBounds:o.any},{name:"edge-distances",type:s.edgeDistances,triggersBounds:o.any},{name:"arrow-scale",type:s.positiveNumber,triggersBounds:o.any},{name:"loop-direction",type:s.angle,triggersBounds:o.any},{name:"loop-sweep",type:s.angle,triggersBounds:o.any},{name:"source-distance-from-node",type:s.size,triggersBounds:o.any},{name:"target-distance-from-node",type:s.size,triggersBounds:o.any}],E=[{name:"ghost",type:s.bool,triggersBounds:o.any},{name:"ghost-offset-x",type:s.bidirectionalSize,triggersBounds:o.any},{name:"ghost-offset-y",type:s.bidirectionalSize,triggersBounds:o.any},{name:"ghost-opacity",type:s.zeroOneNumber}],k=[{name:"selection-box-color",type:s.color},{name:"selection-box-opacity",type:s.zeroOneNumber},{name:"selection-box-border-color",type:s.color},{name:"selection-box-border-width",type:s.size},{name:"active-bg-color",type:s.color},{name:"active-bg-opacity",type:s.zeroOneNumber},{name:"active-bg-size",type:s.size},{name:"outside-texture-bg-color",type:s.color},{name:"outside-texture-bg-opacity",type:s.zeroOneNumber}],C=[];Ea.pieBackgroundN=16,C.push({name:"pie-size",type:s.sizeMaybePercent});for(var S=1;S<=Ea.pieBackgroundN;S++)C.push({name:"pie-"+S+"-background-color",type:s.color}),C.push({name:"pie-"+S+"-background-size",type:s.percent}),C.push({name:"pie-"+S+"-background-opacity",type:s.zeroOneNumber});var P=[],T=Ea.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:s.arrowShape,triggersBounds:o.any},{name:"arrow-color",type:s.color},{name:"arrow-fill",type:s.arrowFill}].forEach((function(t){T.forEach((function(e){var n=e+"-"+t.name,r=t.type,i=t.triggersBounds;P.push({name:n,type:r,triggersBounds:i})}))}),{});var I=Ea.properties=[].concat(f,g,p,v,E,d,c,u,l,h,m,x,w,C,_,M,P,k),B=Ea.propertyGroups={behavior:f,transition:g,visibility:p,overlay:v,ghost:E,commonLabel:d,labelDimensions:c,mainLabel:u,sourceLabel:l,targetLabel:h,nodeBody:m,nodeBorder:x,backgroundImage:w,pie:C,compound:_,edgeLine:M,edgeArrow:P,core:k},N=Ea.propertyGroupNames={};(Ea.propertyGroupKeys=Object.keys(B)).forEach((function(t){N[t]=B[t].map((function(t){return t.name})),B[t].forEach((function(e){return e.groupKey=t}))}));var O=Ea.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Ea.propertyNames=I.map((function(t){return t.name}));for(var A=0;A<I.length;A++){var z=I[A];I[z.name]=z}for(var R=0;R<O.length;R++){var q=O[R],V=I[q.pointsTo],W={name:q.name,alias:!0,pointsTo:V};I.push(W),I[q.name]=W}}(),Ea.getDefaultProperty=function(t){return this.getDefaultProperties()[t]},Ea.getDefaultProperties=function(){var t=this._private;if(null!=t.defaultProperties)return t.defaultProperties;for(var e=W({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce((function(t,e){for(var n=1;n<=Ea.pieBackgroundN;n++){var r=e.name.replace("{{i}}",n),i=e.value;t[r]=i}return t}),{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"taxi-turn":"50%","taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"}].reduce((function(t,e){return Ea.arrowPrefixes.forEach((function(n){var r=n+"-"+e.name,i=e.value;t[r]=i})),t}),{})),n={},r=0;r<this.properties.length;r++){var i=this.properties[r];if(!i.pointsTo){var a=i.name,o=e[a],s=this.parse(a,o);n[a]=s}}return t.defaultProperties=n,t.defaultProperties},Ea.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var ka={parse:function(t,e,n,r){var i=this;if(x(e))return i.parseImplWarn(t,e,n,r);var a,o=ot(t,""+e,n?"t":"f","mapping"===r||!0===r||!1===r||null==r?"dontcare":r),s=i.propCache=i.propCache||[];return(a=s[o])||(a=s[o]=i.parseImplWarn(t,e,n,r)),(n||"mapping"===r)&&(a=bt(a))&&(a.value=bt(a.value)),a},parseImplWarn:function(t,e,n,r){var i=this.parseImpl(t,e,n,r);return i||null==e||mt("The style property `".concat(t,": ").concat(e,"` is invalid")),i}};ka.parseImpl=function(t,e,n,r){var i=this;t=N(t);var a=i.properties[t],o=e,s=i.types;if(!a)return null;if(void 0===e)return null;a.alias&&(a=a.pointsTo,t=a.name);var u=b(e);u&&(e=e.trim());var l,h,c=a.type;if(!c)return null;if(n&&(""===e||null===e))return{name:t,value:e,bypass:!0,deleteBypass:!0};if(x(e))return{name:t,value:e,strValue:"fn",mapped:s.fn,bypass:n};if(!u||r||e.length<7||"a"!==e[1]);else{if(e.length>=7&&"d"===e[0]&&(l=new RegExp(s.data.regex).exec(e))){if(n)return!1;var d=s.data;return{name:t,value:l,strValue:""+e,mapped:d,field:l[1],bypass:n}}if(e.length>=10&&"m"===e[0]&&(h=new RegExp(s.mapData.regex).exec(e))){if(n)return!1;if(c.multiple)return!1;var f=s.mapData;if(!c.color&&!c.number)return!1;var p=this.parse(t,h[4]);if(!p||p.mapped)return!1;var v=this.parse(t,h[5]);if(!v||v.mapped)return!1;if(p.pfValue===v.pfValue||p.strValue===v.strValue)return mt("`"+t+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+t+": "+p.strValue+"`"),this.parse(t,p.strValue);if(c.color){var g=p.value,y=v.value;if(!(g[0]!==y[0]||g[1]!==y[1]||g[2]!==y[2]||g[3]!==y[3]&&(null!=g[3]&&1!==g[3]||null!=y[3]&&1!==y[3])))return!1}return{name:t,value:h,strValue:""+e,mapped:f,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:p.value,valueMax:v.value,bypass:n}}}if(c.multiple&&"multiple"!==r){var m;if(m=u?e.split(/\s+/):w(e)?e:[e],c.evenMultiple&&m.length%2!=0)return null;for(var _=[],E=[],k=[],C="",S=!1,P=0;P<m.length;P++){var T=i.parse(t,m[P],n,"multiple");S=S||b(T.value),_.push(T.value),k.push(null!=T.pfValue?T.pfValue:T.value),E.push(T.units),C+=(P>0?" ":"")+T.strValue}return c.validate&&!c.validate(_,E)?null:c.singleEnum&&S?1===_.length&&b(_[0])?{name:t,value:_[0],strValue:_[0],bypass:n}:null:{name:t,value:_,pfValue:k,strValue:C,bypass:n,units:E}}var D,I,B,O=function(){for(var r=0;r<c.enums.length;r++)if(c.enums[r]===e)return{name:t,value:e,strValue:""+e,bypass:n};return null};if(c.number){var A,z="px";if(c.units&&(A=c.units),c.implicitUnits&&(z=c.implicitUnits),!c.unitless)if(u){var j="px|em"+(c.allowPercent?"|\\%":"");A&&(j=A);var F=e.match("^("+L+")("+j+")?$");F&&(e=F[1],A=F[2]||z)}else A&&!c.implicitUnits||(A=z);if(e=parseFloat(e),isNaN(e)&&void 0===c.enums)return null;if(isNaN(e)&&void 0!==c.enums)return e=o,O();if(c.integer&&(!M(I=e)||Math.floor(I)!==I))return null;if(void 0!==c.min&&(e<c.min||c.strictMin&&e===c.min)||void 0!==c.max&&(e>c.max||c.strictMax&&e===c.max))return null;var V={name:t,value:e,strValue:""+e+(A||""),units:A,bypass:n};return c.unitless||"px"!==A&&"em"!==A?V.pfValue=e:V.pfValue="px"!==A&&A?this.getEmSizeInPixels()*e:e,"ms"!==A&&"s"!==A||(V.pfValue="ms"===A?e:1e3*e),"deg"!==A&&"rad"!==A||(V.pfValue="rad"===A?e:(D=e,Math.PI*D/180)),"%"===A&&(V.pfValue=e/100),V}if(c.propList){var W=[],X=""+e;if("none"===X);else{for(var Y=X.split(/\s*,\s*|\s+/),U=0;U<Y.length;U++){var H=Y[U].trim();i.properties[H]?W.push(H):mt("`"+H+"` is not a valid property name")}if(0===W.length)return null}return{name:t,value:W,strValue:0===W.length?"none":W.join(" "),bypass:n}}if(c.color){var Z=(w(B=e)?B:null)||function(t){return G[t.toLowerCase()]}(B)||function(t){if((4===t.length||7===t.length)&&"#"===t[0]){var e,n,r,i=16;return 4===t.length?(e=parseInt(t[1]+t[1],i),n=parseInt(t[2]+t[2],i),r=parseInt(t[3]+t[3],i)):(e=parseInt(t[1]+t[2],i),n=parseInt(t[3]+t[4],i),r=parseInt(t[5]+t[6],i)),[e,n,r]}}(B)||function(t){var e,n=new RegExp("^"+R+"$").exec(t);if(n){e=[];for(var r=[],i=1;i<=3;i++){var a=n[i];if("%"===a[a.length-1]&&(r[i]=!0),a=parseFloat(a),r[i]&&(a=a/100*255),a<0||a>255)return;e.push(Math.floor(a))}var o=r[1]||r[2]||r[3],s=r[1]&&r[2]&&r[3];if(o&&!s)return;var u=n[4];if(void 0!==u){if((u=parseFloat(u))<0||u>1)return;e.push(u)}}return e}(B)||function(t){var e,n,r,i,a,o,s,u;function l(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var h=new RegExp("^"+q+"$").exec(t);if(h){if((n=parseInt(h[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(r=parseFloat(h[2]))<0||r>100)return;if(r/=100,(i=parseFloat(h[3]))<0||i>100)return;if(i/=100,void 0!==(a=h[4])&&((a=parseFloat(a))<0||a>1))return;if(0===r)o=s=u=Math.round(255*i);else{var c=i<.5?i*(1+r):i+r-i*r,d=2*i-c;o=Math.round(255*l(d,c,n+1/3)),s=Math.round(255*l(d,c,n)),u=Math.round(255*l(d,c,n-1/3))}e=[o,s,u,a]}return e}(B);return Z?{name:t,value:Z,pfValue:Z,strValue:"rgb("+Z[0]+","+Z[1]+","+Z[2]+")",bypass:n}:null}if(c.regex||c.regexes){if(c.enums){var K=O();if(K)return K}for(var $=c.regexes?c.regexes:[c.regex],Q=0;Q<$.length;Q++){var J=new RegExp($[Q]).exec(e);if(J)return{name:t,value:c.singleRegexMatchValue?J[1]:J,strValue:""+e,bypass:n}}return null}return c.string?{name:t,value:""+e,strValue:""+e,bypass:n}:c.enums?O():null};var Ca=function t(e){if(!(this instanceof t))return new t(e);P(e)?(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):gt("A style must have a core reference")},Sa=Ca.prototype;Sa.instanceString=function(){return"style"},Sa.clear=function(){for(var t=0;t<this.length;t++)this[t]=void 0;return this.length=0,this._private.newStyle=!0,this},Sa.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},Sa.core=function(t){return this._private.coreStyle[t]||this.getDefaultProperty(t)},Sa.selector=function(t){var e="core"===t?null:new gr(t),n=this.length++;return this[n]={selector:e,properties:[],mappedProperties:[],index:n},this},Sa.css=function(){var t=arguments;if(1===t.length)for(var e=t[0],n=0;n<this.properties.length;n++){var r=this.properties[n],i=e[r.name];void 0===i&&(i=e[O(r.name)]),void 0!==i&&this.cssRule(r.name,i)}else 2===t.length&&this.cssRule(t[0],t[1]);return this},Sa.style=Sa.css,Sa.cssRule=function(t,e){var n=this.parse(t,e);if(n){var r=this.length-1;this[r].properties.push(n),this[r].properties[n.name]=n,n.name.match(/pie-(\d+)-background-size/)&&n.value&&(this._private.hasPie=!0),n.mapped&&this[r].mappedProperties.push(n),!this[r].selector&&(this._private.coreStyle[n.name]=n)}return this},Sa.append=function(t){return T(t)?t.appendToStyle(this):w(t)?this.appendFromJson(t):b(t)&&this.appendFromString(t),this},Ca.fromJson=function(t,e){var n=new Ca(t);return n.fromJson(e),n},Ca.fromString=function(t,e){return new Ca(t).fromString(e)},[ya,ba,xa,wa,_a,Ma,Ea,ka].forEach((function(t){W(Sa,t)})),Ca.types=Sa.types,Ca.properties=Sa.properties,Ca.propertyGroups=Sa.propertyGroups,Ca.propertyGroupNames=Sa.propertyGroupNames,Ca.propertyGroupKeys=Sa.propertyGroupKeys;var Pa={style:function(t){return t&&this.setStyle(t).update(),this._private.style},setStyle:function(t){var e=this._private;return T(t)?e.style=t.generateStyle(this):w(t)?e.style=Ca.fromJson(this,t):b(t)?e.style=Ca.fromString(this,t):e.style=Ca(this),e.style}},Ta={autolock:function(t){return void 0===t?this._private.autolock:(this._private.autolock=!!t,this)},autoungrabify:function(t){return void 0===t?this._private.autoungrabify:(this._private.autoungrabify=!!t,this)},autounselectify:function(t){return void 0===t?this._private.autounselectify:(this._private.autounselectify=!!t,this)},selectionType:function(t){var e=this._private;return null==e.selectionType&&(e.selectionType="single"),void 0===t?e.selectionType:("additive"!==t&&"single"!==t||(e.selectionType=t),this)},panningEnabled:function(t){return void 0===t?this._private.panningEnabled:(this._private.panningEnabled=!!t,this)},userPanningEnabled:function(t){return void 0===t?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!t,this)},zoomingEnabled:function(t){return void 0===t?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!t,this)},userZoomingEnabled:function(t){return void 0===t?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!t,this)},boxSelectionEnabled:function(t){return void 0===t?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!t,this)},pan:function(){var t,e,n,r,i,a=arguments,o=this._private.pan;switch(a.length){case 0:return o;case 1:if(b(a[0]))return o[t=a[0]];if(_(a[0])){if(!this._private.panningEnabled)return this;r=(n=a[0]).x,i=n.y,M(r)&&(o.x=r),M(i)&&(o.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[1],"x"!==(t=a[0])&&"y"!==t||!M(e)||(o[t]=e),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(t,e){var n,r,i,a,o,s=arguments,u=this._private.pan;if(!this._private.panningEnabled)return this;switch(s.length){case 1:_(t)&&(a=(i=s[0]).x,o=i.y,M(a)&&(u.x+=a),M(o)&&(u.y+=o),this.emit("pan viewport"));break;case 2:r=e,"x"!==(n=t)&&"y"!==n||!M(r)||(u[n]+=r),this.emit("pan viewport")}return this.notify("viewport"),this},fit:function(t,e){var n=this.getFitViewport(t,e);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,e){if(M(t)&&void 0===e&&(e=t,t=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){var n,r;if(b(t)){var i=t;t=this.$(i)}else if(_(r=t)&&M(r.x1)&&M(r.x2)&&M(r.y1)&&M(r.y2)){var a=t;(n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else k(t)||(t=this.mutableElements());if(!k(t)||!t.empty()){n=n||t.boundingBox();var o,s=this.width(),u=this.height();if(e=M(e)?e:0,!isNaN(s)&&!isNaN(u)&&s>0&&u>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0)return{zoom:o=(o=(o=Math.min((s-2*e)/n.w,(u-2*e)/n.h))>this._private.maxZoom?this._private.maxZoom:o)<this._private.minZoom?this._private.minZoom:o,pan:{x:(s-o*(n.x1+n.x2))/2,y:(u-o*(n.y1+n.y2))/2}}}}},zoomRange:function(t,e){var n=this._private;if(null==e){var r=t;t=r.min,e=r.max}return M(t)&&M(e)&&t<=e?(n.minZoom=t,n.maxZoom=e):M(t)&&void 0===e&&t<=n.maxZoom?n.minZoom=t:M(e)&&void 0===t&&e>=n.minZoom&&(n.maxZoom=e),this},minZoom:function(t){return void 0===t?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return void 0===t?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var e,n,r=this._private,i=r.pan,a=r.zoom,o=!1;if(r.zoomingEnabled||(o=!0),M(t)?n=t:_(t)&&(n=t.level,null!=t.position?e=Ut(t.position,a,i):null!=t.renderedPosition&&(e=t.renderedPosition),null==e||r.panningEnabled||(o=!0)),n=(n=n>r.maxZoom?r.maxZoom:n)<r.minZoom?r.minZoom:n,o||!M(n)||n===a||null!=e&&(!M(e.x)||!M(e.y)))return null;if(null!=e){var s=i,u=a,l=n;return{zoomed:!0,panned:!0,zoom:l,pan:{x:-l/u*(e.x-s.x)+e.x,y:-l/u*(e.y-s.y)+e.y}}}return{zoomed:!0,panned:!1,zoom:n,pan:i}},zoom:function(t){if(void 0===t)return this._private.zoom;var e=this.getZoomedViewport(t),n=this._private;return null!=e&&e.zoomed?(n.zoom=e.zoom,e.panned&&(n.pan.x=e.pan.x,n.pan.y=e.pan.y),this.emit("zoom"+(e.panned?" pan":"")+" viewport"),this.notify("viewport"),this):this},viewport:function(t){var e=this._private,n=!0,r=!0,i=[],a=!1,o=!1;if(!t)return this;if(M(t.zoom)||(n=!1),_(t.pan)||(r=!1),!n&&!r)return this;if(n){var s=t.zoom;s<e.minZoom||s>e.maxZoom||!e.zoomingEnabled?a=!0:(e.zoom=s,i.push("zoom"))}if(r&&(!a||!t.cancelOnFailedZoom)&&e.panningEnabled){var u=t.pan;M(u.x)&&(e.pan.x=u.x,o=!1),M(u.y)&&(e.pan.y=u.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(t){var e=this.getCenterPan(t);return e&&(this._private.pan=e,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,e){if(this._private.panningEnabled){if(b(t)){var n=t;t=this.mutableElements().filter(n)}else k(t)||(t=this.mutableElements());if(0!==t.length){var r=t.boundingBox(),i=this.width(),a=this.height();return{x:(i-(e=void 0===e?this._private.zoom:e)*(r.x1+r.x2))/2,y:(a-e*(r.y1+r.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled?(this.viewport({pan:{x:0,y:0},zoom:1}),this):this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t,e,n=this._private,r=n.container;return n.sizeCache=n.sizeCache||(r?(t=d.getComputedStyle(r),e=function(e){return parseFloat(t.getPropertyValue(e))},{width:r.clientWidth-e("padding-left")-e("padding-right"),height:r.clientHeight-e("padding-top")-e("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,e=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-t.x)/e,x2:(n.x2-t.x)/e,y1:(n.y1-t.y)/e,y2:(n.y2-t.y)/e};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var t=this.width(),e=this.height();return{x1:0,y1:0,x2:t,y2:e,w:t,h:e}}};Ta.centre=Ta.center,Ta.autolockNodes=Ta.autolock,Ta.autoungrabifyNodes=Ta.autoungrabify;var Da={data:Qn.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:Qn.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),scratch:Qn.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeScratch:Qn.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0})};Da.attr=Da.data,Da.removeAttr=Da.removeData;var Ia=function(t){var e=this,n=(t=W({},t)).container;n&&!E(n)&&E(n[0])&&(n=n[0]);var r=n?n._cyreg:null;(r=r||{})&&r.cy&&(r.cy.destroy(),r={});var i=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=e;var a=void 0!==d&&void 0!==n&&!t.headless,o=t;o.layout=W({name:a?"grid":"null"},o.layout),o.renderer=W({name:a?"canvas":"null"},o.renderer);var s=function(t,e,n){return void 0!==e?e:void 0!==n?n:t},u=this._private={container:n,ready:!1,options:o,elements:new Ui(this),listeners:[],aniEles:new Ui(this),data:{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,o.zoomingEnabled),userZoomingEnabled:s(!0,o.userZoomingEnabled),panningEnabled:s(!0,o.panningEnabled),userPanningEnabled:s(!0,o.userPanningEnabled),boxSelectionEnabled:s(!0,o.boxSelectionEnabled),autolock:s(!1,o.autolock,o.autolockNodes),autoungrabify:s(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:s(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?a:o.styleEnabled,zoom:M(o.zoom)?o.zoom:1,pan:{x:_(o.pan)&&M(o.pan.x)?o.pan.x:0,y:_(o.pan)&&M(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom}),u.styleEnabled&&e.setStyle([]);var l=W({},o,o.renderer);e.initRenderer(l),function(t,e){if(t.some(I))return Yn.all(t).then(e);e(t)}([o.style,o.elements],(function(t){var n=t[0],a=t[1];u.styleEnabled&&e.style().append(n),function(t,n,r){e.notifications(!1);var i=e.mutableElements();i.length>0&&i.remove(),null!=t&&(_(t)||w(t))&&e.add(t),e.one("layoutready",(function(t){e.notifications(!0),e.emit(t),e.one("load",n),e.emitAndNotify("load")})).one("layoutstop",(function(){e.one("done",r),e.emit("done")}));var a=W({},e._private.options.layout);a.eles=e.elements(),e.layout(a).run()}(a,(function(){e.startAnimationLoop(),u.ready=!0,x(o.ready)&&e.on("ready",o.ready);for(var t=0;t<i.length;t++){var n=i[t];e.on("ready",n)}r&&(r.readies=[]),e.emit("ready")}),o.done)}))},Ba=Ia.prototype;W(Ba,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},mount:function(t){if(null!=t){var e=this,n=e._private,r=n.options;return!E(t)&&E(t[0])&&(t=t[0]),e.stopAnimationLoop(),e.destroyRenderer(),n.container=t,n.styleEnabled=!0,e.invalidateSize(),e.initRenderer(W({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),e.startAnimationLoop(),e.style(r.style),e.emit("mount"),e}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return bt(this._private.options)},json:function(t){var e=this,n=e._private,r=e.mutableElements();if(_(t)){if(e.startBatch(),t.elements){var i={},a=function(t,n){for(var r=[],a=[],o=0;o<t.length;o++){var s=t[o],u=""+s.data.id,l=e.getElementById(u);i[u]=!0,0!==l.length?a.push({ele:l,json:s}):n?(s.group=n,r.push(s)):r.push(s)}e.add(r);for(var h=0;h<a.length;h++){var c=a[h],d=c.ele,f=c.json;d.json(f)}};if(w(t.elements))a(t.elements);else for(var o=["nodes","edges"],s=0;s<o.length;s++){var u=o[s],l=t.elements[u];w(l)&&a(l,u)}var h=e.collection();r.filter((function(t){return!i[t.id()]})).forEach((function(t){t.isParent()?h.merge(t):t.remove()})),h.forEach((function(t){return t.children().move({parent:null})})),h.forEach((function(t){return function(t){return e.getElementById(t.id())}(t).remove()}))}t.style&&e.style(t.style),null!=t.zoom&&t.zoom!==n.zoom&&e.zoom(t.zoom),t.pan&&(t.pan.x===n.pan.x&&t.pan.y===n.pan.y||e.pan(t.pan)),t.data&&e.data(t.data);for(var c=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify"],d=0;d<c.length;d++){var f=c[d];null!=t[f]&&e[f](t[f])}return e.endBatch(),this}var p={};t?p.elements=this.elements().map((function(t){return t.json()})):(p.elements={},r.forEach((function(t){var e=t.group();p.elements[e]||(p.elements[e]=[]),p.elements[e].push(t.json())}))),this._private.styleEnabled&&(p.style=e.style().json()),p.data=bt(e.data());var v=n.options;return p.zoomingEnabled=n.zoomingEnabled,p.userZoomingEnabled=n.userZoomingEnabled,p.zoom=n.zoom,p.minZoom=n.minZoom,p.maxZoom=n.maxZoom,p.panningEnabled=n.panningEnabled,p.userPanningEnabled=n.userPanningEnabled,p.pan=bt(n.pan),p.boxSelectionEnabled=n.boxSelectionEnabled,p.renderer=bt(v.renderer),p.hideEdgesOnViewport=v.hideEdgesOnViewport,p.textureOnViewport=v.textureOnViewport,p.wheelSensitivity=v.wheelSensitivity,p.motionBlur=v.motionBlur,p}}),Ba.$id=Ba.getElementById,[Zi,sa,ha,ca,da,fa,va,ga,Pa,Ta,Da].forEach((function(t){W(Ba,t)}));var Na={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,maximal:!1,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}},Oa=function(t){return t.scratch("breadthfirst")},Aa=function(t,e){return t.scratch("breadthfirst",e)};function za(t){this.options=W({},Na,t)}za.prototype.run=function(){var t,e=this.options,n=e,r=e.cy,i=n.eles,a=i.nodes().filter((function(t){return!t.isParent()})),o=i,s=n.directed,u=n.maximal||n.maximalAdjustments>0,l=ae(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(k(n.roots))t=n.roots;else if(w(n.roots)){for(var h=[],c=0;c<n.roots.length;c++){var d=n.roots[c],f=r.getElementById(d);h.push(f)}t=r.collection(h)}else if(b(n.roots))t=r.$(n.roots);else if(s)t=a.roots();else{var p=i.components();t=r.collection();for(var v=function(e){var n=p[e],r=n.maxDegree(!1),i=n.filter((function(t){return t.degree(!1)===r}));t=t.add(i)},g=0;g<p.length;g++)v(g)}var y=[],m={},x=function(t,e){null==y[e]&&(y[e]=[]);var n=y[e].length;y[e].push(t),Aa(t,{index:n,depth:e})};o.bfs({roots:t,directed:n.directed,visit:function(t,e,n,r,i){var a=t[0],o=a.id();x(a,i),m[o]=!0}});for(var _=[],M=0;M<a.length;M++){var E=a[M];m[E.id()]||_.push(E)}var C=function(t){for(var e=y[t],n=0;n<e.length;n++){var r=e[n];null!=r?Aa(r,{depth:t,index:n}):(e.splice(n,1),n--)}},S=function(){for(var t=0;t<y.length;t++)C(t)},P=function(t,e){for(var n=Oa(t),r=t.incomers().filter((function(t){return t.isNode()&&i.has(t)})),a=-1,o=t.id(),s=0;s<r.length;s++){var u=r[s],l=Oa(u);a=Math.max(a,l.depth)}return n.depth<=a&&(e[o]?null:(function(t,e){var n=Oa(t),r=n.depth,i=n.index;y[r][i]=null,x(t,e)}(t,a+1),e[o]=!0,!0))};if(s&&u){var T=[],D={},I=function(t){return T.push(t)};for(a.forEach((function(t){return T.push(t)}));T.length>0;){var B=T.shift(),N=P(B,D);if(N)B.outgoers().filter((function(t){return t.isNode()&&i.has(t)})).forEach(I);else if(null===N){mt("Detected double maximal shift for node `"+B.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}S();var O=0;if(n.avoidOverlap)for(var A=0;A<a.length;A++){var z=a[A].layoutDimensions(n),L=z.w,R=z.h;O=Math.max(O,L,R)}for(var j={},q=function(t){if(j[t.id()])return j[t.id()];for(var e=Oa(t).depth,n=t.neighborhood(),r=0,i=0,o=0;o<n.length;o++){var s=n[o];if(!s.isEdge()&&!s.isParent()&&a.has(s)){var u=Oa(s),l=u.index,h=u.depth;if(null!=l&&null!=h){var c=y[h].length;h<e&&(r+=l/c,i++)}}}return r/=i=Math.max(1,i),0===i&&(r=0),j[t.id()]=r,r},F=function(t,e){var n=q(t)-q(e);return 0===n?V(t.id(),e.id()):n},W=0;W<y.length;W++)y[W].sort(F),C(W);for(var G=[],X=0;X<_.length;X++)G.push(_[X]);y.unshift(G),S();for(var Y=0,U=0;U<y.length;U++)Y=Math.max(y[U].length,Y);var H=l.x1+l.w/2,Z=l.x1+l.h/2,K=y.reduce((function(t,e){return Math.max(t,e.length)}),0);return a.layoutPositions(this,n,(function(t){var e=Oa(t),r=e.depth,i=e.index,a=y[r].length,o=Math.max(l.w/((n.grid?K:a)+1),O),s=Math.max(l.h/(y.length+1),O),u=Math.min(l.w/2/y.length,l.h/2/y.length);if(u=Math.max(u,O),n.circle){var h=u*r+u-(y.length>0&&y[0].length<=3?u/2:0),c=2*Math.PI/y[r].length*i;return 0===r&&1===y[0].length&&(h=1),{x:H+h*Math.cos(c),y:Z+h*Math.sin(c)}}return{x:H+(i+1-(a+1)/2)*o,y:(r+1)*s}})),this};var La={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Ra(t){this.options=W({},La,t)}Ra.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles,i=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,a=r.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var o,s=ae(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),u=s.x1+s.w/2,l=s.y1+s.h/2,h=(void 0===e.sweep?2*Math.PI-2*Math.PI/a.length:e.sweep)/Math.max(1,a.length-1),c=0,d=0;d<a.length;d++){var f=a[d].layoutDimensions(e),p=f.w,v=f.h;c=Math.max(c,p,v)}if(o=M(e.radius)?e.radius:a.length<=1?0:Math.min(s.h,s.w)/2-c,a.length>1&&e.avoidOverlap){c*=1.75;var g=Math.cos(h)-Math.cos(0),y=Math.sin(h)-Math.sin(0),m=Math.sqrt(c*c/(g*g+y*y));o=Math.max(m,o)}return a.layoutPositions(this,e,(function(t,n){var r=e.startAngle+n*h*(i?1:-1),a=o*Math.cos(r),s=o*Math.sin(r);return{x:u+a,y:l+s}})),this};var ja,qa={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function Fa(t){this.options=W({},qa,t)}Fa.prototype.run=function(){for(var t=this.options,e=t,n=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=t.cy,i=e.eles.nodes().not(":parent"),a=ae(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o=a.x1+a.w/2,s=a.y1+a.h/2,u=[],l=0,h=0;h<i.length;h++){var c,d=i[h];c=e.concentric(d),u.push({value:c,node:d}),d._private.scratch.concentric=c}i.updateStyle();for(var f=0;f<i.length;f++){var p=i[f].layoutDimensions(e);l=Math.max(l,p.w,p.h)}u.sort((function(t,e){return e.value-t.value}));for(var v=e.levelWidth(i),g=[[]],y=g[0],m=0;m<u.length;m++){var b=u[m];y.length>0&&Math.abs(y[0].value-b.value)>=v&&(y=[],g.push(y)),y.push(b)}var x=l+e.minNodeSpacing;if(!e.avoidOverlap){var w=g.length>0&&g[0].length>1,_=(Math.min(a.w,a.h)/2-x)/(g.length+w?1:0);x=Math.min(x,_)}for(var M=0,E=0;E<g.length;E++){var k=g[E],C=void 0===e.sweep?2*Math.PI-2*Math.PI/k.length:e.sweep,S=k.dTheta=C/Math.max(1,k.length-1);if(k.length>1&&e.avoidOverlap){var P=Math.cos(S)-Math.cos(0),T=Math.sin(S)-Math.sin(0),D=Math.sqrt(x*x/(P*P+T*T));M=Math.max(D,M)}k.r=M,M+=x}if(e.equidistant){for(var I=0,B=0,N=0;N<g.length;N++){var O=g[N].r-B;I=Math.max(I,O)}B=0;for(var A=0;A<g.length;A++){var z=g[A];0===A&&(B=z.r),z.r=B,B+=I}}for(var L={},R=0;R<g.length;R++)for(var j=g[R],q=j.dTheta,F=j.r,V=0;V<j.length;V++){var W=j[V],G=e.startAngle+(n?1:-1)*q*V,X={x:o+F*Math.cos(G),y:s+F*Math.sin(G)};L[W.node.id()]=X}return i.layoutPositions(this,e,(function(t){var e=t.id();return L[e]})),this};var Va={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,e){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Wa(t){this.options=W({},Va,t),this.options.layout=this}Wa.prototype.run=function(){var t=this.options,e=t.cy,n=this;n.stopped=!1,!0!==t.animate&&!1!==t.animate||n.emit({type:"layoutstart",layout:n}),ja=!0===t.debug;var r=Ga(e,n,t);ja&&(void 0)(r),t.randomize&&Ua(r);var i=$(),a=function(){Za(r,e,t),!0===t.fit&&e.fit(t.padding)},o=function(e){return!(n.stopped||e>=t.numIter||(Ka(r,t),r.temperature=r.temperature*t.coolingFactor,r.temperature<t.minTemp))},s=function(){if(!0===t.animate||!1===t.animate)a(),n.one("layoutstop",t.stop),n.emit({type:"layoutstop",layout:n});else{var e=t.eles.nodes(),i=Ha(r,t,e);e.layoutPositions(n,t,i)}},u=0,l=!0;if(!0===t.animate)!function e(){for(var n=0;l&&n<t.refresh;)l=o(u),u++,n++;l?($()-i>=t.animationThreshold&&a(),K(e)):(uo(r,t),s())}();else{for(;l;)l=o(u),u++;uo(r,t),s()}return this},Wa.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},Wa.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var Ga=function(t,e,n){for(var r=n.eles.edges(),i=n.eles.nodes(),a={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:t.width(),clientHeight:t.width(),boundingBox:ae(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()})},o=n.eles.components(),s={},u=0;u<o.length;u++)for(var l=o[u],h=0;h<l.length;h++)s[l[h].id()]=u;for(u=0;u<a.nodeSize;u++){var c=(g=i[u]).layoutDimensions(n);(N={}).isLocked=g.locked(),N.id=g.data("id"),N.parentId=g.data("parent"),N.cmptId=s[g.id()],N.children=[],N.positionX=g.position("x"),N.positionY=g.position("y"),N.offsetX=0,N.offsetY=0,N.height=c.w,N.width=c.h,N.maxX=N.positionX+N.width/2,N.minX=N.positionX-N.width/2,N.maxY=N.positionY+N.height/2,N.minY=N.positionY-N.height/2,N.padLeft=parseFloat(g.style("padding")),N.padRight=parseFloat(g.style("padding")),N.padTop=parseFloat(g.style("padding")),N.padBottom=parseFloat(g.style("padding")),N.nodeRepulsion=x(n.nodeRepulsion)?n.nodeRepulsion(g):n.nodeRepulsion,a.layoutNodes.push(N),a.idToIndex[N.id]=u}var d=[],f=0,p=-1,v=[];for(u=0;u<a.nodeSize;u++){var g,y=(g=a.layoutNodes[u]).parentId;null!=y?a.layoutNodes[a.idToIndex[y]].children.push(g.id):(d[++p]=g.id,v.push(g.id))}for(a.graphSet.push(v);f<=p;){var m=d[f++],b=a.idToIndex[m],w=a.layoutNodes[b].children;if(w.length>0)for(a.graphSet.push(w),u=0;u<w.length;u++)d[++p]=w[u]}for(u=0;u<a.graphSet.length;u++){var _=a.graphSet[u];for(h=0;h<_.length;h++){var M=a.idToIndex[_[h]];a.indexToGraph[M]=u}}for(u=0;u<a.edgeSize;u++){var E=r[u],k={};k.id=E.data("id"),k.sourceId=E.data("source"),k.targetId=E.data("target");var C=x(n.idealEdgeLength)?n.idealEdgeLength(E):n.idealEdgeLength,S=x(n.edgeElasticity)?n.edgeElasticity(E):n.edgeElasticity,P=a.idToIndex[k.sourceId],T=a.idToIndex[k.targetId];if(a.indexToGraph[P]!=a.indexToGraph[T]){for(var D=Xa(k.sourceId,k.targetId,a),I=a.graphSet[D],B=0,N=a.layoutNodes[P];-1===I.indexOf(N.id);)N=a.layoutNodes[a.idToIndex[N.parentId]],B++;for(N=a.layoutNodes[T];-1===I.indexOf(N.id);)N=a.layoutNodes[a.idToIndex[N.parentId]],B++;C*=B*n.nestingFactor}k.idealLength=C,k.elasticity=S,a.layoutEdges.push(k)}return a},Xa=function(t,e,n){var r=Ya(t,e,0,n);return 2>r.count?0:r.graph},Ya=function t(e,n,r,i){var a=i.graphSet[r];if(-1<a.indexOf(e)&&-1<a.indexOf(n))return{count:2,graph:r};for(var o=0,s=0;s<a.length;s++){var u=a[s],l=i.idToIndex[u],h=i.layoutNodes[l].children;if(0!==h.length){var c=t(e,n,i.indexToGraph[i.idToIndex[h[0]]],i);if(0!==c.count){if(1!==c.count)return c;if(2==++o)break}}}return{count:o,graph:r}},Ua=function(t,e){for(var n=t.clientWidth,r=t.clientHeight,i=0;i<t.nodeSize;i++){var a=t.layoutNodes[i];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*n,a.positionY=Math.random()*r)}},Ha=function(t,e,n){var r=t.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return e.boundingBox&&(n.forEach((function(e){var n=t.layoutNodes[t.idToIndex[e.data("id")]];i.x1=Math.min(i.x1,n.positionX),i.x2=Math.max(i.x2,n.positionX),i.y1=Math.min(i.y1,n.positionY),i.y2=Math.max(i.y2,n.positionY)})),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(n,a){var o=t.layoutNodes[t.idToIndex[n.data("id")]];if(e.boundingBox){var s=(o.positionX-i.x1)/i.w,u=(o.positionY-i.y1)/i.h;return{x:r.x1+s*r.w,y:r.y1+u*r.h}}return{x:o.positionX,y:o.positionY}}},Za=function(t,e,n){var r=n.layout,i=n.eles.nodes(),a=Ha(t,n,i);i.positions(a),!0!==t.ready&&(t.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},Ka=function(t,e,n){$a(t,e),no(t),ro(t,e),io(t),ao(t)},$a=function(t,e){for(var n=0;n<t.graphSet.length;n++)for(var r=t.graphSet[n],i=r.length,a=0;a<i;a++)for(var o=t.layoutNodes[t.idToIndex[r[a]]],s=a+1;s<i;s++){var u=t.layoutNodes[t.idToIndex[r[s]]];Ja(o,u,t,e)}},Qa=function(t){return-t+2*t*Math.random()},Ja=function(t,e,n,r){if(t.cmptId===e.cmptId||n.isCompound){var i=e.positionX-t.positionX,a=e.positionY-t.positionY;0===i&&0===a&&(i=Qa(1),a=Qa(1));var o=to(t,e,i,a);if(o>0)var s=(l=r.nodeOverlap*o)*i/(v=Math.sqrt(i*i+a*a)),u=l*a/v;else{var l,h=eo(t,i,a),c=eo(e,-1*i,-1*a),d=c.x-h.x,f=c.y-h.y,p=d*d+f*f,v=Math.sqrt(p);s=(l=(t.nodeRepulsion+e.nodeRepulsion)/p)*d/v,u=l*f/v}t.isLocked||(t.offsetX-=s,t.offsetY-=u),e.isLocked||(e.offsetX+=s,e.offsetY+=u)}},to=function(t,e,n,r){if(n>0)var i=t.maxX-e.minX;else i=e.maxX-t.minX;if(r>0)var a=t.maxY-e.minY;else a=e.maxY-t.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},eo=function(t,e,n){var r=t.positionX,i=t.positionY,a=t.height||1,o=t.width||1,s=n/e,u=a/o,l={};return 0===e&&0<n||0===e&&0>n?(l.x=r,l.y=i+a/2,l):0<e&&-1*u<=s&&s<=u?(l.x=r+o/2,l.y=i+o*n/2/e,l):0>e&&-1*u<=s&&s<=u?(l.x=r-o/2,l.y=i-o*n/2/e,l):0<n&&(s<=-1*u||s>=u)?(l.x=r+a*e/2/n,l.y=i+a/2,l):0>n&&(s<=-1*u||s>=u)?(l.x=r-a*e/2/n,l.y=i-a/2,l):l},no=function(t,e){for(var n=0;n<t.edgeSize;n++){var r=t.layoutEdges[n],i=t.idToIndex[r.sourceId],a=t.layoutNodes[i],o=t.idToIndex[r.targetId],s=t.layoutNodes[o],u=s.positionX-a.positionX,l=s.positionY-a.positionY;if(0!==u||0!==l){var h=eo(a,u,l),c=eo(s,-1*u,-1*l),d=c.x-h.x,f=c.y-h.y,p=Math.sqrt(d*d+f*f),v=Math.pow(r.idealLength-p,2)/r.elasticity;if(0!==p)var g=v*d/p,y=v*f/p;else g=0,y=0;a.isLocked||(a.offsetX+=g,a.offsetY+=y),s.isLocked||(s.offsetX-=g,s.offsetY-=y)}}},ro=function(t,e){for(var n=0;n<t.graphSet.length;n++){var r=t.graphSet[n],i=r.length;if(0===n)var a=t.clientHeight/2,o=t.clientWidth/2;else{var s=t.layoutNodes[t.idToIndex[r[0]]],u=t.layoutNodes[t.idToIndex[s.parentId]];a=u.positionX,o=u.positionY}for(var l=0;l<i;l++){var h=t.layoutNodes[t.idToIndex[r[l]]];if(!h.isLocked){var c=a-h.positionX,d=o-h.positionY,f=Math.sqrt(c*c+d*d);if(f>1){var p=e.gravity*c/f,v=e.gravity*d/f;h.offsetX+=p,h.offsetY+=v}}}}},io=function(t,e){var n=[],r=0,i=-1;for(n.push.apply(n,t.graphSet[0]),i+=t.graphSet[0].length;r<=i;){var a=n[r++],o=t.idToIndex[a],s=t.layoutNodes[o],u=s.children;if(0<u.length&&!s.isLocked){for(var l=s.offsetX,h=s.offsetY,c=0;c<u.length;c++){var d=t.layoutNodes[t.idToIndex[u[c]]];d.offsetX+=l,d.offsetY+=h,n[++i]=u[c]}s.offsetX=0,s.offsetY=0}}},ao=function(t,e){for(var n=0;n<t.nodeSize;n++)0<(i=t.layoutNodes[n]).children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0);for(n=0;n<t.nodeSize;n++)if(!(0<(i=t.layoutNodes[n]).children.length||i.isLocked)){var r=oo(i.offsetX,i.offsetY,t.temperature);i.positionX+=r.x,i.positionY+=r.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,so(i,t)}for(n=0;n<t.nodeSize;n++){var i;0<(i=t.layoutNodes[n]).children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},oo=function(t,e,n){var r=Math.sqrt(t*t+e*e);if(r>n)var i={x:n*t/r,y:n*e/r};else i={x:t,y:e};return i},so=function t(e,n){var r=e.parentId;if(null!=r){var i=n.layoutNodes[n.idToIndex[r]],a=!1;return(null==i.maxX||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(null==i.minX||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(null==i.maxY||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(null==i.minY||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a?t(i,n):void 0}},uo=function(t,e){for(var n=t.layoutNodes,r=[],i=0;i<n.length;i++){var a=n[i],o=a.cmptId;(r[o]=r[o]||[]).push(a)}var s=0;for(i=0;i<r.length;i++)if(v=r[i]){v.x1=1/0,v.x2=-1/0,v.y1=1/0,v.y2=-1/0;for(var u=0;u<v.length;u++){var l=v[u];v.x1=Math.min(v.x1,l.positionX-l.width/2),v.x2=Math.max(v.x2,l.positionX+l.width/2),v.y1=Math.min(v.y1,l.positionY-l.height/2),v.y2=Math.max(v.y2,l.positionY+l.height/2)}v.w=v.x2-v.x1,v.h=v.y2-v.y1,s+=v.w*v.h}r.sort((function(t,e){return e.w*e.h-t.w*t.h}));var h=0,c=0,d=0,f=0,p=Math.sqrt(s)*t.clientWidth/t.clientHeight;for(i=0;i<r.length;i++){var v;if(v=r[i]){for(u=0;u<v.length;u++)(l=v[u]).isLocked||(l.positionX+=h-v.x1,l.positionY+=c-v.y1);h+=v.w+e.componentSpacing,d+=v.w+e.componentSpacing,f=Math.max(f,v.h),d>p&&(c+=f+e.componentSpacing,h=0,d=0,f=0)}}},lo={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function ho(t){this.options=W({},lo,t)}ho.prototype.run=function(){var t=this.options,e=t,n=t.cy,r=e.eles.nodes().not(":parent");e.sort&&(r=r.sort(e.sort));var i=ae(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()});if(0===i.h||0===i.w)r.layoutPositions(this,e,(function(t){return{x:i.x1,y:i.y1}}));else{var a=r.size(),o=Math.sqrt(a*i.h/i.w),s=Math.round(o),u=Math.round(i.w/i.h*o),l=function(t){if(null==t)return Math.min(s,u);Math.min(s,u)==s?s=t:u=t},h=function(t){if(null==t)return Math.max(s,u);Math.max(s,u)==s?s=t:u=t},c=e.rows,d=null!=e.cols?e.cols:e.columns;if(null!=c&&null!=d)s=c,u=d;else if(null!=c&&null==d)s=c,u=Math.ceil(a/s);else if(null==c&&null!=d)u=d,s=Math.ceil(a/u);else if(u*s>a){var f=l(),p=h();(f-1)*p>=a?l(f-1):(p-1)*f>=a&&h(p-1)}else for(;u*s<a;){var v=l(),g=h();(g+1)*v>=a?h(g+1):l(v+1)}var y=i.w/u,m=i.h/s;if(e.condense&&(y=0,m=0),e.avoidOverlap)for(var b=0;b<r.length;b++){var x=r[b],w=x._private.position;null!=w.x&&null!=w.y||(w.x=0,w.y=0);var _=x.layoutDimensions(e),M=e.avoidOverlapPadding,E=_.w+M,k=_.h+M;y=Math.max(y,E),m=Math.max(m,k)}for(var C={},S=function(t,e){return!!C["c-"+t+"-"+e]},P=function(t,e){C["c-"+t+"-"+e]=!0},T=0,D=0,I=function(){++D>=u&&(D=0,T++)},B={},N=0;N<r.length;N++){var O=r[N],A=e.position(O);if(A&&(void 0!==A.row||void 0!==A.col)){var z={row:A.row,col:A.col};if(void 0===z.col)for(z.col=0;S(z.row,z.col);)z.col++;else if(void 0===z.row)for(z.row=0;S(z.row,z.col);)z.row++;B[O.id()]=z,P(z.row,z.col)}}r.layoutPositions(this,e,(function(t,e){var n,r;if(t.locked()||t.isParent())return!1;var a=B[t.id()];if(a)n=a.col*y+y/2+i.x1,r=a.row*m+m/2+i.y1;else{for(;S(T,D);)I();n=D*y+y/2+i.x1,r=T*m+m/2+i.y1,P(T,D),I()}return{x:n,y:r}}))}return this};var co={ready:function(){},stop:function(){}};function fo(t){this.options=W({},co,t)}fo.prototype.run=function(){var t=this.options,e=t.eles,n=this;return t.cy,n.emit("layoutstart"),e.nodes().positions((function(){return{x:0,y:0}})),n.one("layoutready",t.ready),n.emit("layoutready"),n.one("layoutstop",t.stop),n.emit("layoutstop"),this},fo.prototype.stop=function(){return this};var po={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function vo(t){this.options=W({},po,t)}vo.prototype.run=function(){var t=this.options,e=t.eles.nodes(),n=x(t.positions);return e.layoutPositions(this,t,(function(e,r){var i=function(e){if(null==t.positions)return function(t){return{x:t.x,y:t.y}}(e.position());if(n)return t.positions(e);var r=t.positions[e._private.data.id];return null==r?null:r}(e);return!e.locked()&&null!=i&&i})),this};var go={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,e){return!0},ready:void 0,stop:void 0,transform:function(t,e){return e}};function yo(t){this.options=W({},go,t)}yo.prototype.run=function(){var t=this.options,e=t.cy,n=t.eles.nodes().not(":parent"),r=ae(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()});return n.layoutPositions(this,t,(function(t,e){return{x:r.x1+Math.round(Math.random()*r.w),y:r.y1+Math.round(Math.random()*r.h)}})),this};var mo=[{name:"breadthfirst",impl:za},{name:"circle",impl:Ra},{name:"concentric",impl:Fa},{name:"cose",impl:Wa},{name:"grid",impl:ho},{name:"null",impl:fo},{name:"preset",impl:vo},{name:"random",impl:yo}];function bo(t){this.options=t,this.notifications=0}var xo=function(){},wo=function(){throw new Error("A headless instance can not render images")};bo.prototype={recalculateRenderedStyle:xo,notify:function(){this.notifications++},init:xo,isHeadless:function(){return!0},png:wo,jpg:wo};var _o={arrowShapeWidth:.3,registerArrowShapes:function(){var t=this.arrowShapes={},e=this,n=function(t,e,n,r,i,a,o){var s=i.x-n/2-o,u=i.x+n/2+o,l=i.y-n/2-o,h=i.y+n/2+o;return s<=t&&t<=u&&l<=e&&e<=h},r=function(t,e,n,r,i){var a=t*Math.cos(r)-e*Math.sin(r),o=(t*Math.sin(r)+e*Math.cos(r))*n;return{x:a*n+i.x,y:o+i.y}},i=function(t,e,n,i){for(var a=[],o=0;o<t.length;o+=2){var s=t[o],u=t[o+1];a.push(r(s,u,e,n,i))}return a},a=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r.x,r.y)}return e},o=function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").pfValue*2},s=function(r,s){b(s)&&(s=t[s]),t[r]=W({name:r,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(t,e,n,r,o,s){var u=a(i(this.points,n+2*s,r,o));return be(t,e,u)},roughCollide:n,draw:function(t,n,r,a){var o=i(this.points,n,r,a);e.arrowShapeImpl("polygon")(t,o)},spacing:function(t){return 0},gap:o},s)};s("none",{collide:ft,roughCollide:ft,draw:vt,spacing:pt,gap:pt}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:t.triangle.points,controlPoint:[0,-.15],roughCollide:n,draw:function(t,n,a,o,s){var u=i(this.points,n,a,o),l=this.controlPoint,h=r(l[0],l[1],n,a,o);e.arrowShapeImpl(this.name)(t,u,h)},gap:function(t){return.8*o(t)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(t,e,n,r,o,s,u){var l=a(i(this.points,n+2*u,r,o)),h=a(i(this.pointsTee,n+2*u,r,o));return be(t,e,l)||be(t,e,h)},draw:function(t,n,r,a,o){var s=i(this.points,n,r,a),u=i(this.pointsTee,n,r,a);e.arrowShapeImpl(this.name)(t,s,u)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(t,e,n,r,o,s,u){var l=o,h=Math.pow(l.x-t,2)+Math.pow(l.y-e,2)<=Math.pow((n+2*u)*this.radius,2),c=a(i(this.points,n+2*u,r,o));return be(t,e,c)||h},draw:function(t,n,r,a,o){var s=i(this.pointsTr,n,r,a);e.arrowShapeImpl(this.name)(t,s,a.x,a.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(t,e){var n=this.baseCrossLinePts.slice(),r=e/t;return n[3]=n[3]-r,n[5]=n[5]-r,n},collide:function(t,e,n,r,o,s,u){var l=a(i(this.points,n+2*u,r,o)),h=a(i(this.crossLinePts(n,s),n+2*u,r,o));return be(t,e,l)||be(t,e,h)},draw:function(t,n,r,a,o){var s=i(this.points,n,r,a),u=i(this.crossLinePts(n,o),n,r,a);e.arrowShapeImpl(this.name)(t,s,u)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(t){return.525*o(t)}}),s("circle",{radius:.15,collide:function(t,e,n,r,i,a,o){var s=i;return Math.pow(s.x-t,2)+Math.pow(s.y-e,2)<=Math.pow((n+2*o)*this.radius,2)},draw:function(t,n,r,i,a){e.arrowShapeImpl(this.name)(t,i.x,i.y,this.radius*n)},spacing:function(t){return e.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(t){return 1},gap:function(t){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(t){return t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(t){return.95*t.pstyle("width").pfValue*t.pstyle("arrow-scale").value}})}},Mo={projectIntoViewport:function(t,e){var n=this.cy,r=this.findContainerClientCoords(),i=r[0],a=r[1],o=r[4],s=n.pan(),u=n.zoom();return[((t-i)/o-s.x)/u,((e-a)/o-s.y)/u]},findContainerClientCoords:function(){if(this.containerBB)return this.containerBB;var t=this.container,e=t.getBoundingClientRect(),n=d.getComputedStyle(t),r=function(t){return parseFloat(n.getPropertyValue(t))},i=r("padding-left"),a=r("padding-right"),o=r("padding-top"),s=r("padding-bottom"),u=r("border-left-width"),l=r("border-right-width"),h=r("border-top-width"),c=(r("border-bottom-width"),t.clientWidth),f=t.clientHeight,p=i+a,v=o+s,g=u+l,y=e.width/(c+g),m=c-p,b=f-v,x=e.left+i+u,w=e.top+o+h;return this.containerBB=[x,w,m,b,y]},invalidateContainerClientCoordsCache:function(){this.containerBB=null},findNearestElement:function(t,e,n,r){return this.findNearestElements(t,e,n,r)[0]},findNearestElements:function(t,e,n,r){var i,a,o=this,s=this,u=s.getCachedZSortedEles(),l=[],h=s.cy.zoom(),c=s.cy.hasCompoundNodes(),d=(r?24:8)/h,f=(r?8:2)/h,p=(r?8:2)/h,v=1/0;function g(t,e){if(t.isNode()){if(a)return;a=t,l.push(t)}if(t.isEdge()&&(null==e||e<v))if(i){if(i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===t.pstyle("z-compound-depth").value)for(var n=0;n<l.length;n++)if(l[n].isEdge()){l[n]=t,i=t,v=null!=e?e:v;break}}else l.push(t),i=t,v=null!=e?e:v}function y(n){var r=n.outerWidth()+2*f,i=n.outerHeight()+2*f,a=r/2,u=i/2,l=n.position();if(l.x-a<=t&&t<=l.x+a&&l.y-u<=e&&e<=l.y+u&&s.nodeShapes[o.getNodeShape(n)].checkPoint(t,e,0,r,i,l.x,l.y))return g(n,0),!0}function m(n){var r,i=n._private,a=i.rscratch,u=n.pstyle("width").pfValue,h=n.pstyle("arrow-scale").value,f=u/2+d,p=f*f,v=2*f,m=i.source,b=i.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var x=a.allpts,w=0;w+3<x.length;w+=2)if(ve(t,e,x[w],x[w+1],x[w+2],x[w+3],v)&&p>(r=me(t,e,x[w],x[w+1],x[w+2],x[w+3])))return g(n,r),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType)for(x=a.allpts,w=0;w+5<a.allpts.length;w+=4)if(ge(t,e,x[w],x[w+1],x[w+2],x[w+3],x[w+4],x[w+5],v)&&p>(r=ye(t,e,x[w],x[w+1],x[w+2],x[w+3],x[w+4],x[w+5])))return g(n,r),!0;m=m||i.source,b=b||i.target;var _=o.getArrowWidth(u,h),M=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}];for(w=0;w<M.length;w++){var E=M[w],k=s.arrowShapes[n.pstyle(E.name+"-arrow-shape").value],C=n.pstyle("width").pfValue;if(k.roughCollide(t,e,_,E.angle,{x:E.x,y:E.y},C,d)&&k.collide(t,e,_,E.angle,{x:E.x,y:E.y},C,d))return g(n),!0}c&&l.length>0&&(y(m),y(b))}function b(t,e,n){return Ct(t,e,n)}function x(n,r){var i,a=n._private,o=p;i=r?r+"-":"",n.boundingBox();var s=a.labelBounds[r||"main"],u=n.pstyle(i+"label").value;if("yes"===n.pstyle("text-events").strValue&&u){var l=a.rstyle,h=b(l,"labelX",r),c=b(l,"labelY",r),d=b(a.rscratch,"labelAngle",r),f=s.x1-o,v=s.x2+o,y=s.y1-o,m=s.y2+o;if(d){var x=Math.cos(d),w=Math.sin(d),_=function(t,e){return{x:(t-=h)*x-(e-=c)*w+h,y:t*w+e*x+c}},M=_(f,y),E=_(f,m),k=_(v,y),C=_(v,m),S=[M.x,M.y,k.x,k.y,C.x,C.y,E.x,E.y];if(be(t,e,S))return g(n),!0}else if(de(s,t,e))return g(n),!0}}n&&(u=u.interactive);for(var w=u.length-1;w>=0;w--){var _=u[w];_.isNode()?y(_)||x(_):m(_)||x(_)||x(_,"source")||x(_,"target")}return l},getAllInBox:function(t,e,n,r){for(var i,a,o=this.getCachedZSortedEles().interactive,s=[],u=Math.min(t,n),l=Math.max(t,n),h=Math.min(e,r),c=Math.max(e,r),d=ae({x1:t=u,y1:e=h,x2:n=l,y2:r=c}),f=0;f<o.length;f++){var p=o[f];if(p.isNode()){var v=p,g=v.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});ce(d,g)&&!fe(g,d)&&s.push(v)}else{var y=p,m=y._private,b=m.rscratch;if(null!=b.startX&&null!=b.startY&&!de(d,b.startX,b.startY))continue;if(null!=b.endX&&null!=b.endY&&!de(d,b.endX,b.endY))continue;if("bezier"===b.edgeType||"multibezier"===b.edgeType||"self"===b.edgeType||"compound"===b.edgeType||"segments"===b.edgeType||"haystack"===b.edgeType){for(var x=m.rstyle.bezierPts||m.rstyle.linePts||m.rstyle.haystackPts,w=!0,_=0;_<x.length;_++)if(i=d,a=x[_],!de(i,a.x,a.y)){w=!1;break}w&&s.push(y)}else"haystack"!==b.edgeType&&"straight"!==b.edgeType||s.push(y)}}return s}},Eo={calculateArrowAngles:function(t){var e,n,r,i,a,o,s=t._private.rscratch,u="haystack"===s.edgeType,l="bezier"===s.edgeType,h="multibezier"===s.edgeType,c="segments"===s.edgeType,d="compound"===s.edgeType,f="self"===s.edgeType;if(u?(r=s.haystackPts[0],i=s.haystackPts[1],a=s.haystackPts[2],o=s.haystackPts[3]):(r=s.arrowStartX,i=s.arrowStartY,a=s.arrowEndX,o=s.arrowEndY),v=s.midX,g=s.midY,c)e=r-s.segpts[0],n=i-s.segpts[1];else if(h||d||f||l){var p=s.allpts;e=r-ne(p[0],p[2],p[4],.1),n=i-ne(p[1],p[3],p[5],.1)}else e=r-v,n=i-g;s.srcArrowAngle=Kt(e,n);var v=s.midX,g=s.midY;if(u&&(v=(r+a)/2,g=(i+o)/2),e=a-r,n=o-i,c)if((p=s.allpts).length/2%2==0){var y=(m=p.length/2)-2;e=p[m]-p[y],n=p[m+1]-p[y+1]}else{y=(m=p.length/2-1)-2;var m,b=m+2;e=p[m]-p[y],n=p[m+1]-p[y+1]}else if(h||d||f){var x,w,_,M;p=s.allpts;if(s.ctrlpts.length/2%2==0){var E=2+(k=2+(C=p.length/2-1));x=ne(p[C],p[k],p[E],0),w=ne(p[C+1],p[k+1],p[E+1],0),_=ne(p[C],p[k],p[E],1e-4),M=ne(p[C+1],p[k+1],p[E+1],1e-4)}else{var k,C;E=2+(k=p.length/2-1),x=ne(p[C=k-2],p[k],p[E],.4999),w=ne(p[C+1],p[k+1],p[E+1],.4999),_=ne(p[C],p[k],p[E],.5),M=ne(p[C+1],p[k+1],p[E+1],.5)}e=_-x,n=M-w}if(s.midtgtArrowAngle=Kt(e,n),s.midDispX=e,s.midDispY=n,e*=-1,n*=-1,c&&((p=s.allpts).length/2%2==0||(e=-(p[b=2+(m=p.length/2-1)]-p[m]),n=-(p[b+1]-p[m+1]))),s.midsrcArrowAngle=Kt(e,n),c)e=a-s.segpts[s.segpts.length-2],n=o-s.segpts[s.segpts.length-1];else if(h||d||f||l){var S=(p=s.allpts).length;e=a-ne(p[S-6],p[S-4],p[S-2],.9),n=o-ne(p[S-5],p[S-3],p[S-1],.9)}else e=a-v,n=o-g;s.tgtArrowAngle=Kt(e,n)}};Eo.getArrowWidth=Eo.getArrowHeight=function(t,e){var n=this.arrowWidthCache=this.arrowWidthCache||{},r=n[t+", "+e];return r||(r=Math.max(Math.pow(13.37*t,.9),29)*e,n[t+", "+e]=r,r)};var ko={};function Co(t){var e=[];if(null!=t){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];e.push({x:r,y:i})}return e}}ko.findHaystackPoints=function(t){for(var e=0;e<t.length;e++){var n=t[e],r=n._private,i=r.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=2*Math.random()*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=r.source,s=r.target,u=o.position(),l=s.position(),h=o.width(),c=s.width(),d=o.height(),f=s.height(),p=n.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*h*p+u.x,i.source.y*d*p+u.y,i.target.x*c*p+l.x,i.target.y*f*p+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(n),this.calculateArrowAngles(n),this.recalculateEdgeLabelProjections(n),this.calculateLabelAngles(n)}},ko.findSegmentsPoints=function(t,e){var n=t._private.rscratch,r=e.posPts,i=e.intersectionPts,a=e.vectorNormInverse,o=t.pstyle("edge-distances").value,s=t.pstyle("segment-weights"),u=t.pstyle("segment-distances"),l=Math.min(s.pfValue.length,u.pfValue.length);n.edgeType="segments",n.segpts=[];for(var h=0;h<l;h++){var c=s.pfValue[h],d=u.pfValue[h],f=1-c,p=c,v="node-position"===o?r:i,g={x:v.x1*f+v.x2*p,y:v.y1*f+v.y2*p};n.segpts.push(g.x+a.x*d,g.y+a.y*d)}},ko.findLoopPoints=function(t,e,n,r){var i=t._private.rscratch,a=e.dirCounts,o=e.srcPos,s=t.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=t.pstyle("loop-direction").pfValue,h=t.pstyle("loop-sweep").pfValue,c=t.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=n,f=c;r&&(d=0,f=u);var p=l-Math.PI/2,v=p-h/2,g=p+h/2,y=String(l+"_"+h);d=void 0===a[y]?a[y]=0:++a[y],i.ctrlpts=[o.x+1.4*Math.cos(v)*f*(d/3+1),o.y+1.4*Math.sin(v)*f*(d/3+1),o.x+1.4*Math.cos(g)*f*(d/3+1),o.y+1.4*Math.sin(g)*f*(d/3+1)]},ko.findCompoundLoopPoints=function(t,e,n,r){var i=t._private.rscratch;i.edgeType="compound";var a=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,h=e.tgtH,c=t.pstyle("control-point-step-size").pfValue,d=t.pstyle("control-point-distances"),f=d?d.pfValue[0]:void 0,p=n,v=c;r&&(p=0,v=f);var g={x:a.x-s/2,y:a.y-u/2},y={x:o.x-l/2,y:o.y-h/2},m={x:Math.min(g.x,y.x),y:Math.min(g.y,y.y)},b=Math.max(.5,Math.log(.01*s)),x=Math.max(.5,Math.log(.01*l));i.ctrlpts=[m.x,m.y-(1+Math.pow(50,1.12)/100)*v*(p/3+1)*b,m.x-(1+Math.pow(50,1.12)/100)*v*(p/3+1)*x,m.y]},ko.findStraightEdgePoints=function(t){t._private.rscratch.edgeType="straight"},ko.findBezierPoints=function(t,e,n,r,i){var a=t._private.rscratch,o=e.vectorNormInverse,s=e.posPts,u=e.intersectionPts,l=t.pstyle("edge-distances").value,h=t.pstyle("control-point-step-size").pfValue,c=t.pstyle("control-point-distances"),d=t.pstyle("control-point-weights"),f=c&&d?Math.min(c.value.length,d.value.length):1,p=c?c.pfValue[0]:void 0,v=d.value[0],g=r;a.edgeType=g?"multibezier":"bezier",a.ctrlpts=[];for(var y=0;y<f;y++){var m,b=(.5-e.eles.length/2+n)*h*(i?-1:1),x=Qt(b);g&&(p=c?c.pfValue[y]:h,v=d.value[y]);var w=void 0!==(m=r?p:void 0!==p?x*p:void 0)?m:b,_=1-v,M=v,E="node-position"===l?s:u,k={x:E.x1*_+E.x2*M,y:E.y1*_+E.y2*M};a.ctrlpts.push(k.x+o.x*w,k.y+o.y*w)}},ko.findTaxiPoints=function(t,e){var n=t._private.rscratch;n.edgeType="segments";var r="vertical",i="horizontal",a="leftward",o="rightward",s="downward",u="upward",l=e.posPts,h=e.srcW,c=e.srcH,d=e.tgtW,f=e.tgtH,p="node-position"!==t.pstyle("edge-distances").value,v=t.pstyle("taxi-direction").value,g=v,y=t.pstyle("taxi-turn"),m="%"===y.units,b=y.pfValue,x=b<0,w=t.pstyle("taxi-turn-min-distance").pfValue,_=p?(h+d)/2:0,M=p?(c+f)/2:0,E=l.x2-l.x1,k=l.y2-l.y1,C=function(t,e){return t>0?Math.max(t-e,0):Math.min(t+e,0)},S=C(E,_),P=C(k,M),T=!1;"auto"===g?v=Math.abs(S)>Math.abs(P)?i:r:g===u||g===s?(v=r,T=!0):g!==a&&g!==o||(v=i,T=!0);var D,I=v===r,B=I?P:S,N=I?k:E,O=Qt(N),A=!1;T&&(m||x)||!(g===s&&N<0||g===u&&N>0||g===a&&N>0||g===o&&N<0)||(B=(O*=-1)*Math.abs(B),A=!0);var z=function(t){return Math.abs(t)<w||Math.abs(t)>=Math.abs(B)},L=z(D=m?(b<0?1+b:b)*B:(b<0?B:0)+b*O),R=z(Math.abs(B)-Math.abs(D));if(!L&&!R||A)if(I){var j=l.y1+D+(p?c/2*O:0),q=l.x1,F=l.x2;n.segpts=[q,j,F,j]}else{var V=l.x1+D+(p?h/2*O:0),W=l.y1,G=l.y2;n.segpts=[V,W,V,G]}else if(I){var X=Math.abs(N)<=c/2,Y=Math.abs(E)<=d/2;if(X){var U=(l.x1+l.x2)/2,H=l.y1,Z=l.y2;n.segpts=[U,H,U,Z]}else if(Y){var K=(l.y1+l.y2)/2,$=l.x1,Q=l.x2;n.segpts=[$,K,Q,K]}else n.segpts=[l.x1,l.y2]}else{var J=Math.abs(N)<=h/2,tt=Math.abs(k)<=f/2;if(J){var et=(l.y1+l.y2)/2,nt=l.x1,rt=l.x2;n.segpts=[nt,et,rt,et]}else if(tt){var it=(l.x1+l.x2)/2,at=l.y1,ot=l.y2;n.segpts=[it,at,it,ot]}else n.segpts=[l.x2,l.y1]}},ko.tryToCorrectInvalidPoints=function(t,e){var n=t._private.rscratch;if("bezier"===n.edgeType){var r=e.srcPos,i=e.tgtPos,a=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,h=e.tgtShape,c=!M(n.startX)||!M(n.startY),d=!M(n.arrowStartX)||!M(n.arrowStartY),f=!M(n.endX)||!M(n.endY),p=!M(n.arrowEndX)||!M(n.arrowEndY),v=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth*3,g=Jt({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.startX,y:n.startY}),y=g<v,m=Jt({x:n.ctrlpts[0],y:n.ctrlpts[1]},{x:n.endX,y:n.endY}),b=m<v,x=!1;if(c||d||y){x=!0;var w={x:n.ctrlpts[0]-r.x,y:n.ctrlpts[1]-r.y},_=Math.sqrt(w.x*w.x+w.y*w.y),E={x:w.x/_,y:w.y/_},k=Math.max(a,o),C={x:n.ctrlpts[0]+2*E.x*k,y:n.ctrlpts[1]+2*E.y*k},S=l.intersectLine(r.x,r.y,a,o,C.x,C.y,0);y?(n.ctrlpts[0]=n.ctrlpts[0]+E.x*(v-g),n.ctrlpts[1]=n.ctrlpts[1]+E.y*(v-g)):(n.ctrlpts[0]=S[0]+E.x*v,n.ctrlpts[1]=S[1]+E.y*v)}if(f||p||b){x=!0;var P={x:n.ctrlpts[0]-i.x,y:n.ctrlpts[1]-i.y},T=Math.sqrt(P.x*P.x+P.y*P.y),D={x:P.x/T,y:P.y/T},I=Math.max(a,o),B={x:n.ctrlpts[0]+2*D.x*I,y:n.ctrlpts[1]+2*D.y*I},N=h.intersectLine(i.x,i.y,s,u,B.x,B.y,0);b?(n.ctrlpts[0]=n.ctrlpts[0]+D.x*(v-m),n.ctrlpts[1]=n.ctrlpts[1]+D.y*(v-m)):(n.ctrlpts[0]=N[0]+D.x*v,n.ctrlpts[1]=N[1]+D.y*v)}x&&this.findEndpoints(t)}},ko.storeAllpts=function(t){var e=t._private.rscratch;if("multibezier"===e.edgeType||"bezier"===e.edgeType||"self"===e.edgeType||"compound"===e.edgeType){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var n=0;n+1<e.ctrlpts.length;n+=2)e.allpts.push(e.ctrlpts[n],e.ctrlpts[n+1]),n+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[n]+e.ctrlpts[n+2])/2,(e.ctrlpts[n+1]+e.ctrlpts[n+3])/2);var r;e.allpts.push(e.endX,e.endY),e.ctrlpts.length/2%2==0?(r=e.allpts.length/2-1,e.midX=e.allpts[r],e.midY=e.allpts[r+1]):(r=e.allpts.length/2-3,e.midX=ne(e.allpts[r],e.allpts[r+2],e.allpts[r+4],.5),e.midY=ne(e.allpts[r+1],e.allpts[r+3],e.allpts[r+5],.5))}else if("straight"===e.edgeType)e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if("segments"===e.edgeType)if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.segpts.length%4==0){var i=e.segpts.length/2,a=i-2;e.midX=(e.segpts[a]+e.segpts[i])/2,e.midY=(e.segpts[a+1]+e.segpts[i+1])/2}else{var o=e.segpts.length/2-1;e.midX=e.segpts[o],e.midY=e.segpts[o+1]}},ko.checkForInvalidEdgeWarning=function(t){var e=t[0]._private.rscratch;e.nodesOverlap||M(e.startX)&&M(e.startY)&&M(e.endX)&&M(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,mt("Edge `"+t.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},ko.findEdgeControlPoints=function(t){var e=this;if(t&&0!==t.length){for(var n=this,r=n.cy.hasCompoundNodes(),i={map:new Pt,get:function(t){var e=this.map.get(t[0]);return null!=e?e.get(t[1]):null},set:function(t,e){var n=this.map.get(t[0]);null==n&&(n=new Pt,this.map.set(t[0],n)),n.set(t[1],e)}},a=[],o=[],s=0;s<t.length;s++){var u=t[s],l=u._private,h=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace())if("haystack"!==h){var c="unbundled-bezier"===h||"segments"===h||"straight"===h||"taxi"===h,d="unbundled-bezier"===h||"bezier"===h,f=l.source,p=l.target,v=[f.poolIndex(),p.poolIndex()].sort(),g=i.get(v);null==g&&(g={eles:[]},i.set(v,g),a.push(v)),g.eles.push(u),c&&(g.hasUnbundled=!0),d&&(g.hasBezier=!0)}else o.push(u)}for(var y=function(t){var o=a[t],s=i.get(o),u=void 0;if(!s.hasUnbundled){var l=s.eles[0].parallelEdges().filter((function(t){return t.isBundledBezier()}));kt(s.eles),l.forEach((function(t){return s.eles.push(t)})),s.eles.sort((function(t,e){return t.poolIndex()-e.poolIndex()}))}var h=s.eles[0],c=h.source(),d=h.target();if(c.poolIndex()>d.poolIndex()){var f=c;c=d,d=f}var p=s.srcPos=c.position(),v=s.tgtPos=d.position(),g=s.srcW=c.outerWidth(),y=s.srcH=c.outerHeight(),m=s.tgtW=d.outerWidth(),b=s.tgtH=d.outerHeight(),x=s.srcShape=n.nodeShapes[e.getNodeShape(c)],w=s.tgtShape=n.nodeShapes[e.getNodeShape(d)];s.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var _=0;_<s.eles.length;_++){var E=s.eles[_],k=E[0]._private.rscratch,C=E.pstyle("curve-style").value,S="unbundled-bezier"===C||"segments"===C||"taxi"===C,P=!c.same(E.source());if(!s.calculatedIntersection&&c!==d&&(s.hasBezier||s.hasUnbundled)){s.calculatedIntersection=!0;var T=x.intersectLine(p.x,p.y,g,y,v.x,v.y,0),D=s.srcIntn=T,I=w.intersectLine(v.x,v.y,m,b,p.x,p.y,0),B=s.tgtIntn=I,N=s.intersectionPts={x1:T[0],x2:I[0],y1:T[1],y2:I[1]},O=s.posPts={x1:p.x,x2:v.x,y1:p.y,y2:v.y},A=I[1]-T[1],z=I[0]-T[0],L=Math.sqrt(z*z+A*A),R=s.vector={x:z,y:A},j=s.vectorNorm={x:R.x/L,y:R.y/L},q={x:-j.y,y:j.x};s.nodesOverlap=!M(L)||w.checkPoint(T[0],T[1],0,m,b,v.x,v.y)||x.checkPoint(I[0],I[1],0,g,y,p.x,p.y),s.vectorNormInverse=q,u={nodesOverlap:s.nodesOverlap,dirCounts:s.dirCounts,calculatedIntersection:!0,hasBezier:s.hasBezier,hasUnbundled:s.hasUnbundled,eles:s.eles,srcPos:v,tgtPos:p,srcW:m,srcH:b,tgtW:g,tgtH:y,srcIntn:B,tgtIntn:D,srcShape:w,tgtShape:x,posPts:{x1:O.x2,y1:O.y2,x2:O.x1,y2:O.y1},intersectionPts:{x1:N.x2,y1:N.y2,x2:N.x1,y2:N.y1},vector:{x:-R.x,y:-R.y},vectorNorm:{x:-j.x,y:-j.y},vectorNormInverse:{x:-q.x,y:-q.y}}}var F=P?u:s;k.nodesOverlap=F.nodesOverlap,k.srcIntn=F.srcIntn,k.tgtIntn=F.tgtIntn,r&&(c.isParent()||c.isChild()||d.isParent()||d.isChild())&&(c.parents().anySame(d)||d.parents().anySame(c)||c.same(d)&&c.isParent())?e.findCompoundLoopPoints(E,F,_,S):c===d?e.findLoopPoints(E,F,_,S):"segments"===C?e.findSegmentsPoints(E,F):"taxi"===C?e.findTaxiPoints(E,F):"straight"===C||!S&&s.eles.length%2==1&&_===Math.floor(s.eles.length/2)?e.findStraightEdgePoints(E):e.findBezierPoints(E,F,_,S,P),e.findEndpoints(E),e.tryToCorrectInvalidPoints(E,F),e.checkForInvalidEdgeWarning(E),e.storeAllpts(E),e.storeEdgeProjections(E),e.calculateArrowAngles(E),e.recalculateEdgeLabelProjections(E),e.calculateLabelAngles(E)}},m=0;m<a.length;m++)y(m);this.findHaystackPoints(o)}},ko.getSegmentPoints=function(t){var e=t[0]._private.rscratch;if("segments"===e.edgeType)return this.recalculateRenderedStyle(t),Co(e.segpts)},ko.getControlPoints=function(t){var e=t[0]._private.rscratch,n=e.edgeType;if("bezier"===n||"multibezier"===n||"self"===n||"compound"===n)return this.recalculateRenderedStyle(t),Co(e.ctrlpts)},ko.getEdgeMidpoint=function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),{x:e.midX,y:e.midY}};var So={manualEndptToPx:function(t,e){var n=t.position(),r=t.outerWidth(),i=t.outerHeight();if(2===e.value.length){var a=[e.pfValue[0],e.pfValue[1]];return"%"===e.units[0]&&(a[0]=a[0]*r),"%"===e.units[1]&&(a[1]=a[1]*i),a[0]+=n.x,a[1]+=n.y,a}var o=e.pfValue[0];o=-Math.PI/2+o;var s=2*Math.max(r,i),u=[n.x+Math.cos(o)*s,n.y+Math.sin(o)*s];return this.nodeShapes[this.getNodeShape(t)].intersectLine(n.x,n.y,r,i,u[0],u[1],0)},findEndpoints:function(t){var e,n,r,i,a,o=this,s=t.source()[0],u=t.target()[0],l=s.position(),h=u.position(),c=t.pstyle("target-arrow-shape").value,d=t.pstyle("source-arrow-shape").value,f=t.pstyle("target-distance-from-node").pfValue,p=t.pstyle("source-distance-from-node").pfValue,v=t.pstyle("curve-style").value,g=t._private.rscratch,y=g.edgeType,m="self"===y||"compound"===y,b="bezier"===y||"multibezier"===y||m,x="bezier"!==y,w="straight"===y||"segments"===y,_="segments"===y,E=b||x||w,k=m||"taxi"===v,C=t.pstyle("source-endpoint"),S=k?"outside-to-node":C.value,P=t.pstyle("target-endpoint"),T=k?"outside-to-node":P.value;if(g.srcManEndpt=C,g.tgtManEndpt=P,b){var D=[g.ctrlpts[0],g.ctrlpts[1]];n=x?[g.ctrlpts[g.ctrlpts.length-2],g.ctrlpts[g.ctrlpts.length-1]]:D,r=D}else if(w){var I=_?g.segpts.slice(0,2):[h.x,h.y];n=_?g.segpts.slice(g.segpts.length-2):[l.x,l.y],r=I}if("inside-to-node"===T)e=[h.x,h.y];else if(P.units)e=this.manualEndptToPx(u,P);else if("outside-to-line"===T)e=g.tgtIntn;else if("outside-to-node"===T||"outside-to-node-or-label"===T?i=n:"outside-to-line"!==T&&"outside-to-line-or-label"!==T||(i=[l.x,l.y]),e=o.nodeShapes[this.getNodeShape(u)].intersectLine(h.x,h.y,u.outerWidth(),u.outerHeight(),i[0],i[1],0),"outside-to-node-or-label"===T||"outside-to-line-or-label"===T){var B=u._private.rscratch,N=B.labelWidth,O=B.labelHeight,A=B.labelX,z=B.labelY,L=N/2,R=O/2,j=u.pstyle("text-valign").value;"top"===j?z-=R:"bottom"===j&&(z+=R);var q=u.pstyle("text-halign").value;"left"===q?A-=L:"right"===q&&(A+=L);var F=Se(i[0],i[1],[A-L,z-R,A+L,z-R,A+L,z+R,A-L,z+R],h.x,h.y);if(F.length>0){var V=l,W=te(V,Zt(e)),G=te(V,Zt(F)),X=W;G<W&&(e=F,X=G),F.length>2&&te(V,{x:F[2],y:F[3]})<X&&(e=[F[2],F[3]])}}var Y=Pe(e,n,o.arrowShapes[c].spacing(t)+f),U=Pe(e,n,o.arrowShapes[c].gap(t)+f);if(g.endX=U[0],g.endY=U[1],g.arrowEndX=Y[0],g.arrowEndY=Y[1],"inside-to-node"===S)e=[l.x,l.y];else if(C.units)e=this.manualEndptToPx(s,C);else if("outside-to-line"===S)e=g.srcIntn;else if("outside-to-node"===S||"outside-to-node-or-label"===S?a=r:"outside-to-line"!==S&&"outside-to-line-or-label"!==S||(a=[h.x,h.y]),e=o.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),a[0],a[1],0),"outside-to-node-or-label"===S||"outside-to-line-or-label"===S){var H=s._private.rscratch,Z=H.labelWidth,K=H.labelHeight,$=H.labelX,Q=H.labelY,J=Z/2,tt=K/2,et=s.pstyle("text-valign").value;"top"===et?Q-=tt:"bottom"===et&&(Q+=tt);var nt=s.pstyle("text-halign").value;"left"===nt?$-=J:"right"===nt&&($+=J);var rt=Se(a[0],a[1],[$-J,Q-tt,$+J,Q-tt,$+J,Q+tt,$-J,Q+tt],l.x,l.y);if(rt.length>0){var it=h,at=te(it,Zt(e)),ot=te(it,Zt(rt)),st=at;ot<at&&(e=[rt[0],rt[1]],st=ot),rt.length>2&&te(it,{x:rt[2],y:rt[3]})<st&&(e=[rt[2],rt[3]])}}var ut=Pe(e,r,o.arrowShapes[d].spacing(t)+p),lt=Pe(e,r,o.arrowShapes[d].gap(t)+p);g.startX=lt[0],g.startY=lt[1],g.arrowStartX=ut[0],g.arrowStartY=ut[1],E&&(M(g.startX)&&M(g.startY)&&M(g.endX)&&M(g.endY)?g.badLine=!1:g.badLine=!0)},getSourceEndpoint:function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),"haystack"===e.edgeType?{x:e.haystackPts[0],y:e.haystackPts[1]}:{x:e.arrowStartX,y:e.arrowStartY}},getTargetEndpoint:function(t){var e=t[0]._private.rscratch;return this.recalculateRenderedStyle(t),"haystack"===e.edgeType?{x:e.haystackPts[2],y:e.haystackPts[3]}:{x:e.arrowEndX,y:e.arrowEndY}}},Po={};function To(t,e,n){for(var r=function(t,e,n,r){return ne(t,e,n,r)},i=e._private.rstyle.bezierPts,a=0;a<t.bezierProjPcts.length;a++){var o=t.bezierProjPcts[a];i.push({x:r(n[0],n[2],n[4],o),y:r(n[1],n[3],n[5],o)})}}Po.storeEdgeProjections=function(t){var e=t._private,n=e.rscratch,r=n.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,"multibezier"===r||"bezier"===r||"self"===r||"compound"===r){e.rstyle.bezierPts=[];for(var i=0;i+5<n.allpts.length;i+=4)To(this,t,n.allpts.slice(i,i+6))}else if("segments"===r){var a=e.rstyle.linePts=[];for(i=0;i+1<n.allpts.length;i+=2)a.push({x:n.allpts[i],y:n.allpts[i+1]})}else if("haystack"===r){var o=n.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(t.pstyle("width").pfValue,t.pstyle("arrow-scale").value)*this.arrowShapeWidth},Po.recalculateEdgeProjections=function(t){this.findEdgeControlPoints(t)};var Do={recalculateNodeLabelProjection:function(t){var e=t.pstyle("label").strValue;if(!D(e)){var n,r,i=t._private,a=t.width(),o=t.height(),s=t.padding(),u=t.position(),l=t.pstyle("text-halign").strValue,h=t.pstyle("text-valign").strValue,c=i.rscratch,d=i.rstyle;switch(l){case"left":n=u.x-a/2-s;break;case"right":n=u.x+a/2+s;break;default:n=u.x}switch(h){case"top":r=u.y-o/2-s;break;case"bottom":r=u.y+o/2+s;break;default:r=u.y}c.labelX=n,c.labelY=r,d.labelX=n,d.labelY=r,this.applyLabelDimensions(t)}}},Io=function(t,e){var n=Math.atan(e/t);return 0===t&&n<0&&(n*=-1),n},Bo=function(t,e){var n=e.x-t.x,r=e.y-t.y;return Io(n,r)};Do.recalculateEdgeLabelProjections=function(t){var e,n=t._private,r=n.rscratch,i=this,a={mid:t.pstyle("label").strValue,source:t.pstyle("source-label").strValue,target:t.pstyle("target-label").strValue};if(a.mid||a.source||a.target){e={x:r.midX,y:r.midY};var o=function(t,e,r){St(n.rscratch,t,e,r),St(n.rstyle,t,e,r)};o("labelX",null,e.x),o("labelY",null,e.y);var s=Io(r.midDispX,r.midDispY);o("labelAutoAngle",null,s);var u=function t(){if(t.cache)return t.cache;for(var e=[],a=0;a+5<r.allpts.length;a+=4){var o={x:r.allpts[a],y:r.allpts[a+1]},s={x:r.allpts[a+2],y:r.allpts[a+3]},u={x:r.allpts[a+4],y:r.allpts[a+5]};e.push({p0:o,p1:s,p2:u,startDist:0,length:0,segments:[]})}var l=n.rstyle.bezierPts,h=i.bezierProjPcts.length;function c(t,e,n,r,i){var a=Jt(e,n),o=t.segments[t.segments.length-1],s={p0:e,p1:n,t0:r,t1:i,startDist:o?o.startDist+o.length:0,length:a};t.segments.push(s),t.length+=a}for(var d=0;d<e.length;d++){var f=e[d],p=e[d-1];p&&(f.startDist=p.startDist+p.length),c(f,f.p0,l[d*h],0,i.bezierProjPcts[0]);for(var v=0;v<h-1;v++)c(f,l[d*h+v],l[d*h+v+1],i.bezierProjPcts[v],i.bezierProjPcts[v+1]);c(f,l[d*h+h-1],f.p2,i.bezierProjPcts[h-1],1)}return t.cache=e},l=function(n){var i,s="source"===n;if(a[n]){var l=t.pstyle(n+"-text-offset").pfValue;switch(r.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var h,c=u(),d=0,f=0,p=0;p<c.length;p++){for(var v=c[s?p:c.length-1-p],g=0;g<v.segments.length;g++){var y=v.segments[s?g:v.segments.length-1-g],m=p===c.length-1&&g===v.segments.length-1;if(d=f,(f+=y.length)>=l||m){h={cp:v,segment:y};break}}if(h)break}var b=h.cp,x=h.segment,w=(l-d)/x.length,_=x.t1-x.t0,M=s?x.t0+_*w:x.t1-_*w;M=ie(0,M,1),e=re(b.p0,b.p1,b.p2,M),i=function(t,e,n,r){var i=ie(0,r-.001,1),a=ie(0,r+.001,1),o=re(t,e,n,i),s=re(t,e,n,a);return Bo(o,s)}(b.p0,b.p1,b.p2,M);break;case"straight":case"segments":case"haystack":for(var E,k,C,S,P=0,T=r.allpts.length,D=0;D+3<T&&(s?(C={x:r.allpts[D],y:r.allpts[D+1]},S={x:r.allpts[D+2],y:r.allpts[D+3]}):(C={x:r.allpts[T-2-D],y:r.allpts[T-1-D]},S={x:r.allpts[T-4-D],y:r.allpts[T-3-D]}),k=P,!((P+=E=Jt(C,S))>=l));D+=2);var I=(l-k)/E;I=ie(0,I,1),e=function(t,e,n,r){var i=e.x-t.x,a=e.y-t.y,o=Jt(t,e),s=i/o,u=a/o;return n=null==n?0:n,r=null!=r?r:n*o,{x:t.x+s*r,y:t.y+u*r}}(C,S,I),i=Bo(C,S)}o("labelX",n,e.x),o("labelY",n,e.y),o("labelAutoAngle",n,i)}};l("source"),l("target"),this.applyLabelDimensions(t)}},Do.applyLabelDimensions=function(t){this.applyPrefixedLabelDimensions(t),t.isEdge()&&(this.applyPrefixedLabelDimensions(t,"source"),this.applyPrefixedLabelDimensions(t,"target"))},Do.applyPrefixedLabelDimensions=function(t,e){var n=t._private,r=this.getLabelText(t,e),i=this.calculateLabelDimensions(t,r),a=t.pstyle("line-height").pfValue,o=t.pstyle("text-wrap").strValue,s=Ct(n.rscratch,"labelWrapCachedLines",e)||[],u="wrap"!==o?1:Math.max(s.length,1),l=i.height/u,h=l*a,c=i.width,d=i.height+(u-1)*(a-1)*l;St(n.rstyle,"labelWidth",e,c),St(n.rscratch,"labelWidth",e,c),St(n.rstyle,"labelHeight",e,d),St(n.rscratch,"labelHeight",e,d),St(n.rscratch,"labelLineHeight",e,h)},Do.getLabelText=function(t,e){var n=t._private,r=e?e+"-":"",i=t.pstyle(r+"label").strValue,a=t.pstyle("text-transform").value,o=function(t,r){return r?(St(n.rscratch,t,e,r),r):Ct(n.rscratch,t,e)};if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var s=t.pstyle("text-wrap").value;if("wrap"===s){var u=o("labelKey");if(null!=u&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var l=i.split("\n"),h=t.pstyle("text-max-width").pfValue,c="anywhere"===t.pstyle("text-overflow-wrap").value,d=[],f=/[\s\u200b]+/,p=c?"":" ",v=0;v<l.length;v++){var g=l[v],y=this.calculateLabelDimensions(t,g).width;if(c){var m=g.split("").join("​");g=m}if(y>h){for(var b=g.split(f),x="",w=0;w<b.length;w++){var _=b[w],M=0===x.length?_:x+p+_;this.calculateLabelDimensions(t,M).width<=h?x+=_+p:(x&&d.push(x),x=_+p)}x.match(/^[\s\u200b]+$/)||d.push(x)}else d.push(g)}o("labelWrapCachedLines",d),i=o("labelWrapCachedText",d.join("\n")),o("labelWrapKey",u)}else if("ellipsis"===s){for(var E=t.pstyle("text-max-width").pfValue,k="",C=!1,S=0;S<i.length&&!(this.calculateLabelDimensions(t,k+i[S]+"…").width>E);S++)k+=i[S],S===i.length-1&&(C=!0);return C||(k+="…"),k}return i},Do.getLabelJustification=function(t){var e=t.pstyle("text-justification").strValue,n=t.pstyle("text-halign").strValue;if("auto"!==e)return e;if(!t.isNode())return"center";switch(n){case"left":return"right";case"right":return"left";default:return"center"}},Do.calculateLabelDimensions=function(t,e){var n=at(e,t._private.labelDimsKey),r=this.labelDimCache||(this.labelDimCache=[]),i=r[n];if(null!=i)return i;var a=t.pstyle("font-style").strValue,o=1*t.pstyle("font-size").pfValue+"px",s=t.pstyle("font-family").strValue,u=t.pstyle("font-weight").strValue,l=this.labelCalcDiv;l||(l=this.labelCalcDiv=document.createElement("div"),document.body.appendChild(l));var h=l.style;return h.fontFamily=s,h.fontStyle=a,h.fontSize=o,h.fontWeight=u,h.position="absolute",h.left="-9999px",h.top="-9999px",h.zIndex="-1",h.visibility="hidden",h.pointerEvents="none",h.padding="0",h.lineHeight="1",h.whiteSpace="pre",l.textContent=e,r[n]={width:Math.ceil(l.clientWidth/1),height:Math.ceil(l.clientHeight/1)}},Do.calculateLabelAngle=function(t,e){var n=t._private.rscratch,r=t.isEdge(),i=e?e+"-":"",a=t.pstyle(i+"text-rotation"),o=a.strValue;return"none"===o?0:r&&"autorotate"===o?n.labelAutoAngle:"autorotate"===o?0:a.pfValue},Do.calculateLabelAngles=function(t){var e=this,n=t.isEdge(),r=t._private.rscratch;r.labelAngle=e.calculateLabelAngle(t),n&&(r.sourceLabelAngle=e.calculateLabelAngle(t,"source"),r.targetLabelAngle=e.calculateLabelAngle(t,"target"))};var No={},Oo=!1;No.getNodeShape=function(t){var e=t.pstyle("shape").value;if("cutrectangle"===e&&(t.width()<28||t.height()<28))return Oo||(mt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Oo=!0),"rectangle";if(t.isParent())return"rectangle"===e||"roundrectangle"===e||"round-rectangle"===e||"cutrectangle"===e||"cut-rectangle"===e||"barrel"===e?e:"rectangle";if("polygon"===e){var n=t.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(n).name}return e};var Ao={updateCachedGrabbedEles:function(){var t=this.cachedZSortedEles;if(t){t.drag=[],t.nondrag=[];for(var e=[],n=0;n<t.length;n++){var r=(i=t[n])._private.rscratch;i.grabbed()&&!i.isParent()?e.push(i):r.inDragLayer?t.drag.push(i):t.nondrag.push(i)}for(n=0;n<e.length;n++){var i=e[n];t.drag.push(i)}}},invalidateCachedZSortedEles:function(){this.cachedZSortedEles=null},getCachedZSortedEles:function(t){if(t||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(wi),e.interactive=e.filter((function(t){return t.interactive()})),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e}},zo={};[Mo,Eo,ko,So,Po,Do,No,{registerCalculationListeners:function(){var t=this.cy,e=t.collection(),n=this,r=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.merge(t),n)for(var r=0;r<t.length;r++){var i=t[r]._private.rstyle;i.clean=!1,i.cleanConnected=!1}};n.binder(t).on("bounds.* dirty.*",(function(t){var e=t.target;r(e)})).on("style.* background.*",(function(t){var e=t.target;r(e,!1)}));var i=function(i){if(i){for(var a=n.onUpdateEleCalcsFns,o=0;o<e.length;o++){var s=e[o],u=s._private.rstyle;s.isNode()&&!u.cleanConnected&&(r(s.connectedEdges()),u.cleanConnected=!0)}if(a)for(var l=0;l<a.length;l++)(0,a[l])(i,e);n.recalculateRenderedStyle(e),e=t.collection()}};n.flushRenderedStyleQueue=function(){i(!0)},n.beforeRender(i,n.beforeRenderPriorities.eleCalcs)},onUpdateEleCalcs:function(t){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(t)},recalculateRenderedStyle:function(t,e){var n=function(t){return t._private.rstyle.cleanConnected},r=[],i=[];if(!this.destroyed){void 0===e&&(e=!0);for(var a=0;a<t.length;a++){var o=t[a],s=o._private,u=s.rstyle;!o.isEdge()||n(o.source())&&n(o.target())||(u.clean=!1),e&&u.clean||o.removed()||"none"!==o.pstyle("display").value&&("nodes"===s.group?i.push(o):r.push(o),u.clean=!0)}for(var l=0;l<i.length;l++){var h=i[l],c=h._private.rstyle,d=h.position();this.recalculateNodeLabelProjection(h),c.nodeX=d.x,c.nodeY=d.y,c.nodeW=h.pstyle("width").pfValue,c.nodeH=h.pstyle("height").pfValue}this.recalculateEdgeProjections(r);for(var f=0;f<r.length;f++){var p=r[f]._private,v=p.rstyle,g=p.rscratch;v.srcX=g.arrowStartX,v.srcY=g.arrowStartY,v.tgtX=g.arrowEndX,v.tgtY=g.arrowEndY,v.midX=g.midX,v.midY=g.midY,v.labelAngle=g.labelAngle,v.sourceLabelAngle=g.sourceLabelAngle,v.targetLabelAngle=g.targetLabelAngle}}}},Ao].forEach((function(t){W(zo,t)}));var Lo={getCachedImage:function(t,e,n){var r=this.imageCache=this.imageCache||{},i=r[t];if(i)return i.image.complete||i.image.addEventListener("load",n),i.image;var a=(i=r[t]=r[t]||{}).image=new Image;a.addEventListener("load",n),a.addEventListener("error",(function(){a.error=!0}));return"data:"===t.substring(0,5).toLowerCase()||(a.crossOrigin=e),a.src=t,a}},Ro={registerBinding:function(t,e,n,r){var i=Array.prototype.slice.apply(arguments,[1]),a=this.binder(t);return a.on.apply(a,i)},binder:function(t){var e=this,n=t===window||t===document||t===document.body||"undefined"!=typeof HTMLElement&&t instanceof HTMLElement;if(null==e.supportsPassiveEvents){var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});window.addEventListener("test",null,i)}catch(t){}e.supportsPassiveEvents=r}var a=function(r,i,a){var o=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(o[2]={capture:null!=a&&a,passive:!1,once:!1}),e.bindings.push({target:t,args:o}),(t.addEventListener||t.on).apply(t,o),this};return{on:a,addEventListener:a,addListener:a,bind:a}},nodeIsDraggable:function(t){return t&&t.isNode()&&!t.locked()&&t.grabbable()},nodeIsGrabbable:function(t){return this.nodeIsDraggable(t)&&t.interactive()}};Ro.load=function(){var t=this,e=function(t){return t.selected()},n=function(e,n,r,i){null==e&&(e=t.cy);for(var a=0;a<n.length;a++){var o=n[a];e.emit({originalEvent:r,type:o,position:i})}},r=function(t){return t.shiftKey||t.metaKey||t.ctrlKey},a=function(e,n){var r=!0;if(t.cy.hasCompoundNodes()&&e&&e.pannable()){for(var i=0;n&&i<n.length;i++)if((e=n[i]).isNode()&&e.isParent()){r=!1;break}}else r=!0;return r},o=function(t){t[0]._private.rscratch.inDragLayer=!0},s=function(t){t[0]._private.rscratch.isGrabTarget=!0},u=function(t,e){var n=e.addToList;n.has(t)||(n.merge(t),function(t){t[0]._private.grabbed=!0}(t))},l=function(e,n){n=n||{};var r=e.cy().hasCompoundNodes();n.inDragLayer&&(e.forEach(o),e.neighborhood().stdFilter((function(t){return!r||t.isEdge()})).forEach(o)),n.addToList&&e.forEach((function(t){u(t,n)})),function(t,e){if(t.cy().hasCompoundNodes()&&(null!=e.inDragLayer||null!=e.addToList)){var n=t.descendants();e.inDragLayer&&(n.forEach(o),n.connectedEdges().forEach(o)),e.addToList&&e.addToList.unmerge(n)}}(e,n),d(e,{inDragLayer:n.inDragLayer}),t.updateCachedGrabbedEles()},h=l,c=function(e){e&&(t.getCachedZSortedEles().forEach((function(t){!function(t){t[0]._private.grabbed=!1}(t),function(t){t[0]._private.rscratch.inDragLayer=!1}(t),function(t){t[0]._private.rscratch.isGrabTarget=!1}(t)})),t.updateCachedGrabbedEles())},d=function(t,e){if((null!=e.inDragLayer||null!=e.addToList)&&t.cy().hasCompoundNodes()){var n=t.ancestors().orphans();if(!n.same(t)){var r=n.descendants().spawnSelf().merge(n).unmerge(t).unmerge(t.descendants()),i=r.connectedEdges();e.inDragLayer&&(i.forEach(o),r.forEach(o)),e.addToList&&r.forEach((function(t){u(t,e)}))}}},f=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},p="undefined"!=typeof MutationObserver,v="undefined"!=typeof ResizeObserver;p?(t.removeObserver=new MutationObserver((function(e){for(var n=0;n<e.length;n++){var r=e[n].removedNodes;if(r)for(var i=0;i<r.length;i++)if(r[i]===t.container){t.destroy();break}}})),t.container.parentNode&&t.removeObserver.observe(t.container.parentNode,{childList:!0})):t.registerBinding(t.container,"DOMNodeRemoved",(function(e){t.destroy()}));var g=i((function(){t.cy.resize()}),100);p&&(t.styleObserver=new MutationObserver(g),t.styleObserver.observe(t.container,{attributes:!0})),t.registerBinding(window,"resize",g),v&&(t.resizeObserver=new ResizeObserver(g),t.resizeObserver.observe(t.container));var y=function(){t.invalidateContainerClientCoordsCache()};!function(t,e){for(;null!=t;)e(t),t=t.parentNode}(t.container,(function(e){t.registerBinding(e,"transitionend",y),t.registerBinding(e,"animationend",y),t.registerBinding(e,"scroll",y)})),t.registerBinding(t.container,"contextmenu",(function(t){t.preventDefault()}));var m=function(e){for(var n=t.findContainerClientCoords(),r=n[0],i=n[1],a=n[2],o=n[3],s=e.touches?e.touches:[e],u=!1,l=0;l<s.length;l++){var h=s[l];if(r<=h.clientX&&h.clientX<=r+a&&i<=h.clientY&&h.clientY<=i+o){u=!0;break}}if(!u)return!1;for(var c=t.container,d=e.target.parentNode,f=!1;d;){if(d===c){f=!0;break}d=d.parentNode}return!!f};t.registerBinding(t.container,"mousedown",(function(e){if(m(e)){e.preventDefault(),f(),t.hoverData.capture=!0,t.hoverData.which=e.which;var r=t.cy,i=[e.clientX,e.clientY],a=t.projectIntoViewport(i[0],i[1]),o=t.selection,u=t.findNearestElements(a[0],a[1],!0,!1),c=u[0],d=t.dragData.possibleDragElements;if(t.hoverData.mdownPos=a,t.hoverData.mdownGPos=i,3==e.which){t.hoverData.cxtStarted=!0;var p={originalEvent:e,type:"cxttapstart",position:{x:a[0],y:a[1]}};c?(c.activate(),c.emit(p),t.hoverData.down=c):r.emit(p),t.hoverData.downTime=(new Date).getTime(),t.hoverData.cxtDragged=!1}else if(1==e.which){if(c&&c.activate(),null!=c&&t.nodeIsGrabbable(c)){var v=function(t){return{originalEvent:e,type:t,position:{x:a[0],y:a[1]}}};if(s(c),c.selected()){d=t.dragData.possibleDragElements=r.collection();var g=r.$((function(e){return e.isNode()&&e.selected()&&t.nodeIsGrabbable(e)}));l(g,{addToList:d}),c.emit(v("grabon")),g.forEach((function(t){t.emit(v("grab"))}))}else d=t.dragData.possibleDragElements=r.collection(),h(c,{addToList:d}),c.emit(v("grabon")).emit(v("grab"));t.redrawHint("eles",!0),t.redrawHint("drag",!0)}t.hoverData.down=c,t.hoverData.downs=u,t.hoverData.downTime=(new Date).getTime(),n(c,["mousedown","tapstart","vmousedown"],e,{x:a[0],y:a[1]}),null==c?(o[4]=1,t.data.bgActivePosistion={x:a[0],y:a[1]},t.redrawHint("select",!0),t.redraw()):c.pannable()&&(o[4]=1),t.hoverData.tapholdCancelled=!1,clearTimeout(t.hoverData.tapholdTimeout),t.hoverData.tapholdTimeout=setTimeout((function(){if(!t.hoverData.tapholdCancelled){var n=t.hoverData.down;n?n.emit({originalEvent:e,type:"taphold",position:{x:a[0],y:a[1]}}):r.emit({originalEvent:e,type:"taphold",position:{x:a[0],y:a[1]}})}}),t.tapholdDuration)}o[0]=o[2]=a[0],o[1]=o[3]=a[1]}}),!1),t.registerBinding(window,"mousemove",(function(e){if(t.hoverData.capture||m(e)){var i=!1,o=t.cy,s=o.zoom(),u=[e.clientX,e.clientY],h=t.projectIntoViewport(u[0],u[1]),d=t.hoverData.mdownPos,f=t.hoverData.mdownGPos,p=t.selection,v=null;t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.selecting||(v=t.findNearestElement(h[0],h[1],!0,!1));var g,y=t.hoverData.last,b=t.hoverData.down,x=[h[0]-p[2],h[1]-p[3]],w=t.dragData.possibleDragElements;if(f){var _=u[0]-f[0],E=_*_,k=u[1]-f[1],C=E+k*k;t.hoverData.isOverThresholdDrag=g=C>=t.desktopTapThreshold2}var S=r(e);g&&(t.hoverData.tapholdCancelled=!0),i=!0,n(v,["mousemove","vmousemove","tapdrag"],e,{x:h[0],y:h[1]});var P=function(){t.data.bgActivePosistion=void 0,t.hoverData.selecting||o.emit({originalEvent:e,type:"boxstart",position:{x:h[0],y:h[1]}}),p[4]=1,t.hoverData.selecting=!0,t.redrawHint("select",!0),t.redraw()};if(3===t.hoverData.which){if(g){var T={originalEvent:e,type:"cxtdrag",position:{x:h[0],y:h[1]}};b?b.emit(T):o.emit(T),t.hoverData.cxtDragged=!0,t.hoverData.cxtOver&&v===t.hoverData.cxtOver||(t.hoverData.cxtOver&&t.hoverData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:h[0],y:h[1]}}),t.hoverData.cxtOver=v,v&&v.emit({originalEvent:e,type:"cxtdragover",position:{x:h[0],y:h[1]}}))}}else if(t.hoverData.dragging){if(i=!0,o.panningEnabled()&&o.userPanningEnabled()){var D;if(t.hoverData.justStartedPan){var I=t.hoverData.mdownPos;D={x:(h[0]-I[0])*s,y:(h[1]-I[1])*s},t.hoverData.justStartedPan=!1}else D={x:x[0]*s,y:x[1]*s};o.panBy(D),t.hoverData.dragged=!0}h=t.projectIntoViewport(e.clientX,e.clientY)}else if(1!=p[4]||null!=b&&!b.pannable()){if(b&&b.pannable()&&b.active()&&b.unactivate(),b&&b.grabbed()||v==y||(y&&n(y,["mouseout","tapdragout"],e,{x:h[0],y:h[1]}),v&&n(v,["mouseover","tapdragover"],e,{x:h[0],y:h[1]}),t.hoverData.last=v),b)if(g){if(o.boxSelectionEnabled()&&S)b&&b.grabbed()&&(c(w),b.emit("freeon"),w.emit("free"),t.dragData.didDrag&&(b.emit("dragfreeon"),w.emit("dragfree"))),P();else if(b&&b.grabbed()&&t.nodeIsDraggable(b)){var B=!t.dragData.didDrag;B&&t.redrawHint("eles",!0),t.dragData.didDrag=!0;var N=o.collection();t.hoverData.draggingEles||l(w,{inDragLayer:!0});var O={x:0,y:0};if(M(x[0])&&M(x[1])&&(O.x+=x[0],O.y+=x[1],B)){var A=t.hoverData.dragDelta;A&&M(A[0])&&M(A[1])&&(O.x+=A[0],O.y+=A[1])}for(var z=0;z<w.length;z++){var L=w[z];t.nodeIsDraggable(L)&&L.grabbed()&&N.merge(L)}t.hoverData.draggingEles=!0,N.silentShift(O).emit("position drag"),t.redrawHint("drag",!0),t.redraw()}}else!function(){var e=t.hoverData.dragDelta=t.hoverData.dragDelta||[];0===e.length?(e.push(x[0]),e.push(x[1])):(e[0]+=x[0],e[1]+=x[1])}();i=!0}else g&&(t.hoverData.dragging||!o.boxSelectionEnabled()||!S&&o.panningEnabled()&&o.userPanningEnabled()?!t.hoverData.selecting&&o.panningEnabled()&&o.userPanningEnabled()&&a(b,t.hoverData.downs)&&(t.hoverData.dragging=!0,t.hoverData.justStartedPan=!0,p[4]=0,t.data.bgActivePosistion=Zt(d),t.redrawHint("select",!0),t.redraw()):P(),b&&b.pannable()&&b.active()&&b.unactivate());return p[2]=h[0],p[3]=h[1],i?(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1):void 0}}),!1),t.registerBinding(window,"mouseup",(function(i){if(t.hoverData.capture){t.hoverData.capture=!1;var a=t.cy,o=t.projectIntoViewport(i.clientX,i.clientY),s=t.selection,u=t.findNearestElement(o[0],o[1],!0,!1),l=t.dragData.possibleDragElements,h=t.hoverData.down,d=r(i);if(t.data.bgActivePosistion&&(t.redrawHint("select",!0),t.redraw()),t.hoverData.tapholdCancelled=!0,t.data.bgActivePosistion=void 0,h&&h.unactivate(),3===t.hoverData.which){var f={originalEvent:i,type:"cxttapend",position:{x:o[0],y:o[1]}};if(h?h.emit(f):a.emit(f),!t.hoverData.cxtDragged){var p={originalEvent:i,type:"cxttap",position:{x:o[0],y:o[1]}};h?h.emit(p):a.emit(p)}t.hoverData.cxtDragged=!1,t.hoverData.which=null}else if(1===t.hoverData.which){if(n(u,["mouseup","tapend","vmouseup"],i,{x:o[0],y:o[1]}),t.dragData.didDrag||t.hoverData.dragged||t.hoverData.selecting||t.hoverData.isOverThresholdDrag||n(h,["click","tap","vclick"],i,{x:o[0],y:o[1]}),null!=h||t.dragData.didDrag||t.hoverData.selecting||t.hoverData.dragged||r(i)||(a.$(e).unselect(["tapunselect"]),l.length>0&&t.redrawHint("eles",!0),t.dragData.possibleDragElements=l=a.collection()),u!=h||t.dragData.didDrag||t.hoverData.selecting||null!=u&&u._private.selectable&&(t.hoverData.dragging||("additive"===a.selectionType()||d?u.selected()?u.unselect(["tapunselect"]):u.select(["tapselect"]):d||(a.$(e).unmerge(u).unselect(["tapunselect"]),u.select(["tapselect"]))),t.redrawHint("eles",!0)),t.hoverData.selecting){var v=a.collection(t.getAllInBox(s[0],s[1],s[2],s[3]));t.redrawHint("select",!0),v.length>0&&t.redrawHint("eles",!0),a.emit({type:"boxend",originalEvent:i,position:{x:o[0],y:o[1]}});"additive"===a.selectionType()||d||a.$(e).unmerge(v).unselect(),v.emit("box").stdFilter((function(t){return t.selectable()&&!t.selected()})).select().emit("boxselect"),t.redraw()}if(t.hoverData.dragging&&(t.hoverData.dragging=!1,t.redrawHint("select",!0),t.redrawHint("eles",!0),t.redraw()),!s[4]){t.redrawHint("drag",!0),t.redrawHint("eles",!0);var g=h&&h.grabbed();c(l),g&&(h.emit("freeon"),l.emit("free"),t.dragData.didDrag&&(h.emit("dragfreeon"),l.emit("dragfree")))}}s[4]=0,t.hoverData.down=null,t.hoverData.cxtStarted=!1,t.hoverData.draggingEles=!1,t.hoverData.selecting=!1,t.hoverData.isOverThresholdDrag=!1,t.dragData.didDrag=!1,t.hoverData.dragged=!1,t.hoverData.dragDelta=[],t.hoverData.mdownPos=null,t.hoverData.mdownGPos=null}}),!1);var b,x,w,_,E,k,C,S,P,T,D,I,B,N=function(e){if(!t.scrollingPage){var n=t.cy,r=n.zoom(),i=n.pan(),a=t.projectIntoViewport(e.clientX,e.clientY),o=[a[0]*r+i.x,a[1]*r+i.y];if(t.hoverData.draggingEles||t.hoverData.dragging||t.hoverData.cxtStarted||0!==t.selection[4])e.preventDefault();else if(n.panningEnabled()&&n.userPanningEnabled()&&n.zoomingEnabled()&&n.userZoomingEnabled()){var s;e.preventDefault(),t.data.wheelZooming=!0,clearTimeout(t.data.wheelTimeout),t.data.wheelTimeout=setTimeout((function(){t.data.wheelZooming=!1,t.redrawHint("eles",!0),t.redraw()}),150),s=null!=e.deltaY?e.deltaY/-250:null!=e.wheelDeltaY?e.wheelDeltaY/1e3:e.wheelDelta/1e3,s*=t.wheelSensitivity,1===e.deltaMode&&(s*=33);var u=n.zoom()*Math.pow(10,s);"gesturechange"===e.type&&(u=t.gestureStartZoom*e.scale),n.zoom({level:u,renderedPosition:{x:o[0],y:o[1]}})}}};t.registerBinding(t.container,"wheel",N,!0),t.registerBinding(window,"scroll",(function(e){t.scrollingPage=!0,clearTimeout(t.scrollingPageTimeout),t.scrollingPageTimeout=setTimeout((function(){t.scrollingPage=!1}),250)}),!0),t.registerBinding(t.container,"gesturestart",(function(e){t.gestureStartZoom=t.cy.zoom(),t.hasTouchStarted||e.preventDefault()}),!0),t.registerBinding(t.container,"gesturechange",(function(e){t.hasTouchStarted||N(e)}),!0),t.registerBinding(t.container,"mouseout",(function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseout",position:{x:n[0],y:n[1]}})}),!1),t.registerBinding(t.container,"mouseover",(function(e){var n=t.projectIntoViewport(e.clientX,e.clientY);t.cy.emit({originalEvent:e,type:"mouseover",position:{x:n[0],y:n[1]}})}),!1);var O,A,z,L,R=function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))},j=function(t,e,n,r){return(n-t)*(n-t)+(r-e)*(r-e)};if(t.registerBinding(t.container,"touchstart",O=function(e){if(t.hasTouchStarted=!0,m(e)){f(),t.touchData.capture=!0,t.data.bgActivePosistion=void 0;var r=t.cy,i=t.touchData.now,a=t.touchData.earlier;if(e.touches[0]){var o=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=o[0],i[1]=o[1]}if(e.touches[1]&&(o=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),i[2]=o[0],i[3]=o[1]),e.touches[2]&&(o=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),i[4]=o[0],i[5]=o[1]),e.touches[1]){t.touchData.singleTouchMoved=!0,c(t.dragData.touchDragEles);var u=t.findContainerClientCoords();P=u[0],T=u[1],D=u[2],I=u[3],b=e.touches[0].clientX-P,x=e.touches[0].clientY-T,w=e.touches[1].clientX-P,_=e.touches[1].clientY-T,B=0<=b&&b<=D&&0<=w&&w<=D&&0<=x&&x<=I&&0<=_&&_<=I;var d=r.pan(),p=r.zoom();if(E=R(b,x,w,_),k=j(b,x,w,_),S=[((C=[(b+w)/2,(x+_)/2])[0]-d.x)/p,(C[1]-d.y)/p],k<4e4&&!e.touches[2]){var v=t.findNearestElement(i[0],i[1],!0,!0),g=t.findNearestElement(i[2],i[3],!0,!0);return v&&v.isNode()?(v.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=v):g&&g.isNode()?(g.activate().emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start=g):r.emit({originalEvent:e,type:"cxttapstart",position:{x:i[0],y:i[1]}}),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!0,t.touchData.cxtDragged=!1,t.data.bgActivePosistion=void 0,void t.redraw()}}if(e.touches[2])r.boxSelectionEnabled()&&e.preventDefault();else if(e.touches[1]);else if(e.touches[0]){var y=t.findNearestElements(i[0],i[1],!0,!0),M=y[0];if(null!=M&&(M.activate(),t.touchData.start=M,t.touchData.starts=y,t.nodeIsGrabbable(M))){var N=t.dragData.touchDragEles=r.collection(),O=null;t.redrawHint("eles",!0),t.redrawHint("drag",!0),M.selected()?(O=r.$((function(e){return e.selected()&&t.nodeIsGrabbable(e)})),l(O,{addToList:N})):h(M,{addToList:N}),s(M);var A=function(t){return{originalEvent:e,type:t,position:{x:i[0],y:i[1]}}};M.emit(A("grabon")),O?O.forEach((function(t){t.emit(A("grab"))})):M.emit(A("grab"))}n(M,["touchstart","tapstart","vmousedown"],e,{x:i[0],y:i[1]}),null==M&&(t.data.bgActivePosistion={x:o[0],y:o[1]},t.redrawHint("select",!0),t.redraw()),t.touchData.singleTouchMoved=!1,t.touchData.singleTouchStartTime=+new Date,clearTimeout(t.touchData.tapholdTimeout),t.touchData.tapholdTimeout=setTimeout((function(){!1!==t.touchData.singleTouchMoved||t.pinching||t.touchData.selecting||n(t.touchData.start,["taphold"],e,{x:i[0],y:i[1]})}),t.tapholdDuration)}if(e.touches.length>=1){for(var z=t.touchData.startPosition=[],L=0;L<i.length;L++)z[L]=a[L]=i[L];var q=e.touches[0];t.touchData.startGPosition=[q.clientX,q.clientY]}}},!1),t.registerBinding(window,"touchmove",A=function(e){var r=t.touchData.capture;if(r||m(e)){var i=t.selection,o=t.cy,s=t.touchData.now,u=t.touchData.earlier,h=o.zoom();if(e.touches[0]){var d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);s[0]=d[0],s[1]=d[1]}e.touches[1]&&(d=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=d[0],s[3]=d[1]),e.touches[2]&&(d=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=d[0],s[5]=d[1]);var f,p=t.touchData.startGPosition;if(r&&e.touches[0]&&p){for(var v=[],g=0;g<s.length;g++)v[g]=s[g]-u[g];var y=e.touches[0].clientX-p[0],C=y*y,D=e.touches[0].clientY-p[1];f=C+D*D>=t.touchTapThreshold2}if(r&&t.touchData.cxt){e.preventDefault();var I=e.touches[0].clientX-P,N=e.touches[0].clientY-T,O=e.touches[1].clientX-P,A=e.touches[1].clientY-T,z=j(I,N,O,A);if(z/k>=2.25||z>=22500){t.touchData.cxt=!1,t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var L={originalEvent:e,type:"cxttapend",position:{x:s[0],y:s[1]}};t.touchData.start?(t.touchData.start.unactivate().emit(L),t.touchData.start=null):o.emit(L)}}if(r&&t.touchData.cxt){L={originalEvent:e,type:"cxtdrag",position:{x:s[0],y:s[1]}},t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.touchData.start?t.touchData.start.emit(L):o.emit(L),t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxtDragged=!0;var q=t.findNearestElement(s[0],s[1],!0,!0);t.touchData.cxtOver&&q===t.touchData.cxtOver||(t.touchData.cxtOver&&t.touchData.cxtOver.emit({originalEvent:e,type:"cxtdragout",position:{x:s[0],y:s[1]}}),t.touchData.cxtOver=q,q&&q.emit({originalEvent:e,type:"cxtdragover",position:{x:s[0],y:s[1]}}))}else if(r&&e.touches[2]&&o.boxSelectionEnabled())e.preventDefault(),t.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,t.touchData.selecting||o.emit({originalEvent:e,type:"boxstart",position:{x:s[0],y:s[1]}}),t.touchData.selecting=!0,t.touchData.didSelect=!0,i[4]=1,i&&0!==i.length&&void 0!==i[0]?(i[2]=(s[0]+s[2]+s[4])/3,i[3]=(s[1]+s[3]+s[5])/3):(i[0]=(s[0]+s[2]+s[4])/3,i[1]=(s[1]+s[3]+s[5])/3,i[2]=(s[0]+s[2]+s[4])/3+1,i[3]=(s[1]+s[3]+s[5])/3+1),t.redrawHint("select",!0),t.redraw();else if(r&&e.touches[1]&&!t.touchData.didSelect&&o.zoomingEnabled()&&o.panningEnabled()&&o.userZoomingEnabled()&&o.userPanningEnabled()){if(e.preventDefault(),t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),tt=t.dragData.touchDragEles){t.redrawHint("drag",!0);for(var F=0;F<tt.length;F++){var V=tt[F]._private;V.grabbed=!1,V.rscratch.inDragLayer=!1}}var W=t.touchData.start,G=(I=e.touches[0].clientX-P,N=e.touches[0].clientY-T,O=e.touches[1].clientX-P,A=e.touches[1].clientY-T,R(I,N,O,A)),X=G/E;if(B){var Y=(I-b+(O-w))/2,U=(N-x+(A-_))/2,H=o.zoom(),Z=H*X,K=o.pan(),$=S[0]*H+K.x,Q=S[1]*H+K.y,J={x:-Z/H*($-K.x-Y)+$,y:-Z/H*(Q-K.y-U)+Q};if(W&&W.active()){var tt=t.dragData.touchDragEles;c(tt),t.redrawHint("drag",!0),t.redrawHint("eles",!0),W.unactivate().emit("freeon"),tt.emit("free"),t.dragData.didDrag&&(W.emit("dragfreeon"),tt.emit("dragfree"))}o.viewport({zoom:Z,pan:J,cancelOnFailedZoom:!0}),E=G,b=I,x=N,w=O,_=A,t.pinching=!0}e.touches[0]&&(d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=d[0],s[1]=d[1]),e.touches[1]&&(d=t.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY),s[2]=d[0],s[3]=d[1]),e.touches[2]&&(d=t.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY),s[4]=d[0],s[5]=d[1])}else if(e.touches[0]&&!t.touchData.didSelect){var et=t.touchData.start,nt=t.touchData.last;if(t.hoverData.draggingEles||t.swipePanning||(q=t.findNearestElement(s[0],s[1],!0,!0)),r&&null!=et&&e.preventDefault(),r&&null!=et&&t.nodeIsDraggable(et))if(f){tt=t.dragData.touchDragEles;var rt=!t.dragData.didDrag;rt&&l(tt,{inDragLayer:!0}),t.dragData.didDrag=!0;var it={x:0,y:0};M(v[0])&&M(v[1])&&(it.x+=v[0],it.y+=v[1],rt&&(t.redrawHint("eles",!0),(at=t.touchData.dragDelta)&&M(at[0])&&M(at[1])&&(it.x+=at[0],it.y+=at[1]))),t.hoverData.draggingEles=!0,tt.silentShift(it).emit("position drag"),t.redrawHint("drag",!0),t.touchData.startPosition[0]==u[0]&&t.touchData.startPosition[1]==u[1]&&t.redrawHint("eles",!0),t.redraw()}else{var at;0===(at=t.touchData.dragDelta=t.touchData.dragDelta||[]).length?(at.push(v[0]),at.push(v[1])):(at[0]+=v[0],at[1]+=v[1])}if(n(et||q,["touchmove","tapdrag","vmousemove"],e,{x:s[0],y:s[1]}),et&&et.grabbed()||q==nt||(nt&&nt.emit({originalEvent:e,type:"tapdragout",position:{x:s[0],y:s[1]}}),q&&q.emit({originalEvent:e,type:"tapdragover",position:{x:s[0],y:s[1]}})),t.touchData.last=q,r)for(F=0;F<s.length;F++)s[F]&&t.touchData.startPosition[F]&&f&&(t.touchData.singleTouchMoved=!0);r&&(null==et||et.pannable())&&o.panningEnabled()&&o.userPanningEnabled()&&(a(et,t.touchData.starts)&&(e.preventDefault(),t.data.bgActivePosistion||(t.data.bgActivePosistion=Zt(t.touchData.startPosition)),t.swipePanning?o.panBy({x:v[0]*h,y:v[1]*h}):f&&(t.swipePanning=!0,o.panBy({x:y*h,y:D*h}),et&&(et.unactivate(),t.redrawHint("select",!0),t.touchData.start=null))),d=t.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY),s[0]=d[0],s[1]=d[1])}for(g=0;g<s.length;g++)u[g]=s[g];r&&e.touches.length>0&&!t.hoverData.draggingEles&&!t.swipePanning&&null!=t.data.bgActivePosistion&&(t.data.bgActivePosistion=void 0,t.redrawHint("select",!0),t.redraw())}},!1),t.registerBinding(window,"touchcancel",z=function(e){var n=t.touchData.start;t.touchData.capture=!1,n&&n.unactivate()}),t.registerBinding(window,"touchend",L=function(r){var i=t.touchData.start;if(t.touchData.capture){0===r.touches.length&&(t.touchData.capture=!1),r.preventDefault();var a=t.selection;t.swipePanning=!1,t.hoverData.draggingEles=!1;var o,s=t.cy,u=s.zoom(),l=t.touchData.now,h=t.touchData.earlier;if(r.touches[0]){var d=t.projectIntoViewport(r.touches[0].clientX,r.touches[0].clientY);l[0]=d[0],l[1]=d[1]}if(r.touches[1]&&(d=t.projectIntoViewport(r.touches[1].clientX,r.touches[1].clientY),l[2]=d[0],l[3]=d[1]),r.touches[2]&&(d=t.projectIntoViewport(r.touches[2].clientX,r.touches[2].clientY),l[4]=d[0],l[5]=d[1]),i&&i.unactivate(),t.touchData.cxt){if(o={originalEvent:r,type:"cxttapend",position:{x:l[0],y:l[1]}},i?i.emit(o):s.emit(o),!t.touchData.cxtDragged){var f={originalEvent:r,type:"cxttap",position:{x:l[0],y:l[1]}};i?i.emit(f):s.emit(f)}return t.touchData.start&&(t.touchData.start._private.grabbed=!1),t.touchData.cxt=!1,t.touchData.start=null,void t.redraw()}if(!r.touches[2]&&s.boxSelectionEnabled()&&t.touchData.selecting){t.touchData.selecting=!1;var p=s.collection(t.getAllInBox(a[0],a[1],a[2],a[3]));a[0]=void 0,a[1]=void 0,a[2]=void 0,a[3]=void 0,a[4]=0,t.redrawHint("select",!0),s.emit({type:"boxend",originalEvent:r,position:{x:l[0],y:l[1]}}),p.emit("box").stdFilter((function(t){return t.selectable()&&!t.selected()})).select().emit("boxselect"),p.nonempty()&&t.redrawHint("eles",!0),t.redraw()}if(null!=i&&i.unactivate(),r.touches[2])t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);else if(r.touches[1]);else if(r.touches[0]);else if(!r.touches[0]){t.data.bgActivePosistion=void 0,t.redrawHint("select",!0);var v=t.dragData.touchDragEles;if(null!=i){var g=i._private.grabbed;c(v),t.redrawHint("drag",!0),t.redrawHint("eles",!0),g&&(i.emit("freeon"),v.emit("free"),t.dragData.didDrag&&(i.emit("dragfreeon"),v.emit("dragfree"))),n(i,["touchend","tapend","vmouseup","tapdragout"],r,{x:l[0],y:l[1]}),i.unactivate(),t.touchData.start=null}else{var y=t.findNearestElement(l[0],l[1],!0,!0);n(y,["touchend","tapend","vmouseup","tapdragout"],r,{x:l[0],y:l[1]})}var m=t.touchData.startPosition[0]-l[0],b=m*m,x=t.touchData.startPosition[1]-l[1],w=(b+x*x)*u*u;t.touchData.singleTouchMoved||(i||s.$(":selected").unselect(["tapunselect"]),n(i,["tap","vclick"],r,{x:l[0],y:l[1]})),null!=i&&!t.dragData.didDrag&&i._private.selectable&&w<t.touchTapThreshold2&&!t.pinching&&("single"===s.selectionType()?(s.$(e).unmerge(i).unselect(["tapunselect"]),i.select(["tapselect"])):i.selected()?i.unselect(["tapunselect"]):i.select(["tapselect"]),t.redrawHint("eles",!0)),t.touchData.singleTouchMoved=!0}for(var _=0;_<l.length;_++)h[_]=l[_];t.dragData.didDrag=!1,0===r.touches.length&&(t.touchData.dragDelta=[],t.touchData.startPosition=null,t.touchData.startGPosition=null,t.touchData.didSelect=!1),r.touches.length<2&&(1===r.touches.length&&(t.touchData.startGPosition=[r.touches[0].clientX,r.touches[0].clientY]),t.pinching=!1,t.redrawHint("eles",!0),t.redraw())}},!1),"undefined"==typeof TouchEvent){var q=[],F=function(t){return{clientX:t.clientX,clientY:t.clientY,force:1,identifier:t.pointerId,pageX:t.pageX,pageY:t.pageY,radiusX:t.width/2,radiusY:t.height/2,screenX:t.screenX,screenY:t.screenY,target:t.target}},V=function(t){for(var e=0;e<q.length;e++)if(q[e].event.pointerId===t.pointerId)return void q.splice(e,1)},W=function(t){t.touches=q.map((function(t){return t.touch}))},G=function(t){return"mouse"===t.pointerType||4===t.pointerType};t.registerBinding(t.container,"pointerdown",(function(t){G(t)||(t.preventDefault(),function(t){q.push(function(t){return{event:t,touch:F(t)}}(t))}(t),W(t),O(t))})),t.registerBinding(t.container,"pointerup",(function(t){G(t)||(V(t),W(t),L(t))})),t.registerBinding(t.container,"pointercancel",(function(t){G(t)||(V(t),W(t),z())})),t.registerBinding(t.container,"pointermove",(function(t){G(t)||(t.preventDefault(),function(t){var e=q.filter((function(e){return e.event.pointerId===t.pointerId}))[0];e.event=t,e.touch=F(t)}(t),W(t),A(t))}))}};var jo={generatePolygon:function(t,e){return this.nodeShapes[t]={renderer:this,name:t,points:e,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,a,o){return Se(i,a,this.points,t,e,n/2,r/2,o)},checkPoint:function(t,e,n,r,i,a,o){return xe(t,e,this.points,a,o,r,i,[0,-1],n)}}},generateEllipse:function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){return function(t,e,n,r,i,a){var o=n-t,s=r-e;o/=i,s/=a;var u=Math.sqrt(o*o+s*s),l=u-1;if(l<0)return[];var h=l/u;return[(n-t)*h+t,(r-e)*h+e]}(i,a,t,e,n/2+o,r/2+o)},checkPoint:function(t,e,n,r,i,a,o){return Me(t,e,r,i,a,o,n)}}},generateRoundPolygon:function(t,e){for(var n=new Array(2*e.length),r=0;r<e.length/2;r++){var i,a=2*r;i=r<e.length/2-1?2*(r+1):0,n[4*r]=e[a],n[4*r+1]=e[a+1];var o=e[i]-e[a],s=e[i+1]-e[a+1],u=Math.sqrt(o*o+s*s);n[4*r+2]=o/u,n[4*r+3]=s/u}return this.nodeShapes[t]={renderer:this,name:t,points:n,draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl("round-polygon",t,e,n,r,i,this.points)},intersectLine:function(t,e,n,r,i,a,o){return function(t,e,n,r,i,a,o,s){for(var u,l=[],h=new Array(n.length),c=a/2,d=o/2,f=Ne(a,o),p=0;p<n.length/4;p++){var v,g;g=0===p?n.length-2:4*p-2,v=4*p+2;var y=r+c*n[4*p],m=i+d*n[4*p+1],b=-n[g]*n[v]-n[g+1]*n[v+1],x=f/Math.tan(Math.acos(b)/2),w=y-x*n[g],_=m-x*n[g+1],M=y+x*n[v],E=m+x*n[v+1];0===p?(h[n.length-2]=w,h[n.length-1]=_):(h[4*p-2]=w,h[4*p-1]=_),h[4*p]=M,h[4*p+1]=E;var k=n[g+1],C=-n[g];k*n[v]+C*n[v+1]<0&&(k*=-1,C*=-1),0!==(u=Ee(t,e,r,i,w+k*f,_+C*f,f)).length&&l.push(u[0],u[1])}for(var S=0;S<h.length/4;S++)0!==(u=Ce(t,e,r,i,h[4*S],h[4*S+1],h[4*S+2],h[4*S+3],!1)).length&&l.push(u[0],u[1]);if(l.length>2){for(var P=[l[0],l[1]],T=Math.pow(P[0]-t,2)+Math.pow(P[1]-e,2),D=1;D<l.length/2;D++){var I=Math.pow(l[2*D]-t,2)+Math.pow(l[2*D+1]-e,2);I<=T&&(P[0]=l[2*D],P[1]=l[2*D+1],T=I)}return P}return l}(i,a,this.points,t,e,n,r)},checkPoint:function(t,e,n,r,i,a,o){return function(t,e,n,r,i,a,o){for(var s=new Array(n.length),u=a/2,l=o/2,h=Ne(a,o),c=h*h,d=0;d<n.length/4;d++){var f,p;p=0===d?n.length-2:4*d-2,f=4*d+2;var v=r+u*n[4*d],g=i+l*n[4*d+1],y=-n[p]*n[f]-n[p+1]*n[f+1],m=h/Math.tan(Math.acos(y)/2),b=v-m*n[p],x=g-m*n[p+1],w=v+m*n[f],_=g+m*n[f+1];s[4*d]=b,s[4*d+1]=x,s[4*d+2]=w,s[4*d+3]=_;var M=n[p+1],E=-n[p];M*n[f]+E*n[f+1]<0&&(M*=-1,E*=-1);var k=b+M*h,C=x+E*h;if(Math.pow(k-t,2)+Math.pow(C-e,2)<=c)return!0}return be(t,e,s)}(t,e,this.points,a,o,r,i)}}},generateRoundRectangle:function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Te(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){return pe(i,a,t,e,n,r,o)},checkPoint:function(t,e,n,r,i,a,o){var s=Be(r,i),u=2*s;return!!(xe(t,e,this.points,a,o,r,i-u,[0,-1],n)||xe(t,e,this.points,a,o,r-u,i,[0,-1],n)||Me(t,e,u,u,a-r/2+s,o-i/2+s,n)||Me(t,e,u,u,a+r/2-s,o-i/2+s,n)||Me(t,e,u,u,a+r/2-s,o+i/2-s,n)||Me(t,e,u,u,a-r/2+s,o+i/2-s,n))}}},generateCutRectangle:function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:8,points:Te(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},generateCutTrianglePts:function(t,e,n,r){var i=this.cornerLength,a=e/2,o=t/2,s=n-o,u=n+o,l=r-a,h=r+a;return{topLeft:[s,l+i,s+i,l,s+i,l+i],topRight:[u-i,l,u,l+i,u-i,l+i],bottomRight:[u,h-i,u-i,h,u-i,h-i],bottomLeft:[s+i,h,s,h-i,s+i,h-i]}},intersectLine:function(t,e,n,r,i,a,o){var s=this.generateCutTrianglePts(n+2*o,r+2*o,t,e),u=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return Se(i,a,u,t,e)},checkPoint:function(t,e,n,r,i,a,o){if(xe(t,e,this.points,a,o,r,i-2*this.cornerLength,[0,-1],n))return!0;if(xe(t,e,this.points,a,o,r-2*this.cornerLength,i,[0,-1],n))return!0;var s=this.generateCutTrianglePts(r,i,a,o);return be(t,e,s.topLeft)||be(t,e,s.topRight)||be(t,e,s.bottomRight)||be(t,e,s.bottomLeft)}}},generateBarrel:function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Te(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){var s=this.generateBarrelBezierPts(n+2*o,r+2*o,t,e),u=function(t){var e=re({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.15),n=re({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.5),r=re({x:t[0],y:t[1]},{x:t[2],y:t[3]},{x:t[4],y:t[5]},.85);return[t[0],t[1],e.x,e.y,n.x,n.y,r.x,r.y,t[4],t[5]]},l=[].concat(u(s.topLeft),u(s.topRight),u(s.bottomRight),u(s.bottomLeft));return Se(i,a,l,t,e)},generateBarrelBezierPts:function(t,e,n,r){var i=e/2,a=t/2,o=n-a,s=n+a,u=r-i,l=r+i,h=Oe(t,e),c=h.heightOffset,d=h.widthOffset,f=h.ctrlPtOffsetPct*t,p={topLeft:[o,u+c,o+f,u,o+d,u],topRight:[s-d,u,s-f,u,s,u+c],bottomRight:[s,l-c,s-f,l,s-d,l],bottomLeft:[o+d,l,o+f,l,o,l-c]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(t,e,n,r,i,a,o){var s=Oe(r,i),u=s.heightOffset,l=s.widthOffset;if(xe(t,e,this.points,a,o,r,i-2*u,[0,-1],n))return!0;if(xe(t,e,this.points,a,o,r-2*l,i,[0,-1],n))return!0;for(var h=this.generateBarrelBezierPts(r,i,a,o),c=function(t,e,n){var r,i,a=n[4],o=n[2],s=n[0],u=n[5],l=n[1],h=Math.min(a,s),c=Math.max(a,s),d=Math.min(u,l),f=Math.max(u,l);if(h<=t&&t<=c&&d<=e&&e<=f){var p=[(r=a)-2*(i=o)+s,2*(i-r),r],v=function(t,e,n,r){var i=e*e-4*t*(n-=r);if(i<0)return[];var a=Math.sqrt(i),o=2*t;return[(-e+a)/o,(-e-a)/o]}(p[0],p[1],p[2],t).filter((function(t){return 0<=t&&t<=1}));if(v.length>0)return v[0]}return null},d=Object.keys(h),f=0;f<d.length;f++){var p=h[d[f]],v=c(t,e,p);if(null!=v){var g=p[5],y=p[3],m=p[1],b=ne(g,y,m,v);if(p.isTop&&b<=e)return!0;if(p.isBottom&&e<=b)return!0}}return!1}}},generateBottomRoundrectangle:function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Te(4,0),draw:function(t,e,n,r,i){this.renderer.nodeShapeImpl(this.name,t,e,n,r,i)},intersectLine:function(t,e,n,r,i,a,o){var s=e-(r/2+o),u=Ce(i,a,t,e,t-(n/2+o),s,t+(n/2+o),s,!1);return u.length>0?u:pe(i,a,t,e,n,r,o)},checkPoint:function(t,e,n,r,i,a,o){var s=Be(r,i),u=2*s;if(xe(t,e,this.points,a,o,r,i-u,[0,-1],n))return!0;if(xe(t,e,this.points,a,o,r-u,i,[0,-1],n))return!0;var l=r/2+2*n,h=i/2+2*n;return!!be(t,e,[a-l,o-h,a-l,o,a+l,o,a+l,o-h])||!!Me(t,e,u,u,a+r/2-s,o+i/2-s,n)||!!Me(t,e,u,u,a-r/2+s,o+i/2-s,n)}}},registerNodeShapes:function(){var t=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Te(3,0)),this.generateRoundPolygon("round-triangle",Te(3,0)),this.generatePolygon("rectangle",Te(4,0)),t.square=t.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var n=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",n),this.generateRoundPolygon("round-diamond",n),this.generatePolygon("pentagon",Te(5,0)),this.generateRoundPolygon("round-pentagon",Te(5,0)),this.generatePolygon("hexagon",Te(6,0)),this.generateRoundPolygon("round-hexagon",Te(6,0)),this.generatePolygon("heptagon",Te(7,0)),this.generateRoundPolygon("round-heptagon",Te(7,0)),this.generatePolygon("octagon",Te(8,0)),this.generateRoundPolygon("round-octagon",Te(8,0));var r=new Array(20),i=Ie(5,0),a=Ie(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[2*s]*=o,a[2*s+1]*=o;for(s=0;s<5;s++)r[4*s]=i[2*s],r[4*s+1]=i[2*s+1],r[4*s+2]=a[2*s],r[4*s+3]=a[2*s+1];r=De(r),this.generatePolygon("star",r),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u),t.makePolygon=function(t){var n,r="polygon-"+t.join("$");return(n=this[r])?n:e.generatePolygon(r,t)}}},qo={timeToRender:function(){return this.redrawTotalTime/this.redrawCount},redraw:function(t){t=t||_t();var e=this;void 0===e.averageRedrawTime&&(e.averageRedrawTime=0),void 0===e.lastRedrawTime&&(e.lastRedrawTime=0),void 0===e.lastDrawTime&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=t},beforeRender:function(t,e){if(!this.destroyed){null==e&&gt("Priority is not optional for beforeRender");var n=this.beforeRenderCallbacks;n.push({fn:t,priority:e}),n.sort((function(t,e){return e.priority-t.priority}))}}},Fo=function(t,e,n){for(var r=t.beforeRenderCallbacks,i=0;i<r.length;i++)r[i].fn(e,n)};qo.startRenderLoop=function(){var t=this,e=t.cy;t.renderLoopStarted||(t.renderLoopStarted=!0,K((function n(r){if(!t.destroyed){if(e.batching());else if(t.requestedFrame&&!t.skipFrame){Fo(t,!0,r);var i=$();t.render(t.renderOptions);var a=t.lastDrawTime=$();void 0===t.averageRedrawTime&&(t.averageRedrawTime=a-i),void 0===t.redrawCount&&(t.redrawCount=0),t.redrawCount++,void 0===t.redrawTotalTime&&(t.redrawTotalTime=0);var o=a-i;t.redrawTotalTime+=o,t.lastRedrawTime=o,t.averageRedrawTime=t.averageRedrawTime/2+o/2,t.requestedFrame=!1}else Fo(t,!1,r);t.skipFrame=!1,K(n)}})))};var Vo=function(t){this.init(t)},Wo=Vo.prototype;Wo.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],Wo.init=function(t){var e=this;e.options=t,e.cy=t.cy;var n=e.container=t.cy.container();if(d){var r=d.document,i=r.head,a="__________cytoscape_stylesheet",o="__________cytoscape_container",s=null!=r.getElementById(a);if(n.className.indexOf(o)<0&&(n.className=(n.className||"")+" "+o),!s){var u=r.createElement("style");u.id=a,u.innerHTML="."+o+" { position: relative; }",i.insertBefore(u,i.children[0])}"static"===d.getComputedStyle(n).getPropertyValue("position")&&mt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=t.showFps,e.debug=t.debug,e.hideEdgesOnViewport=t.hideEdgesOnViewport,e.textureOnViewport=t.textureOnViewport,e.wheelSensitivity=t.wheelSensitivity,e.motionBlurEnabled=t.motionBlur,e.forcedPixelRatio=M(t.pixelRatio)?t.pixelRatio:null,e.motionBlur=t.motionBlur,e.motionBlurOpacity=t.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=t.desktopTapThreshold,e.desktopTapThreshold2=t.desktopTapThreshold*t.desktopTapThreshold,e.touchTapThreshold=t.touchTapThreshold,e.touchTapThreshold2=t.touchTapThreshold*t.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()},Wo.notify=function(t,e){var n=this,r=n.cy;this.destroyed||("init"!==t?"destroy"!==t?(("add"===t||"remove"===t||"move"===t&&r.hasCompoundNodes()||"load"===t||"zorder"===t||"mount"===t)&&n.invalidateCachedZSortedEles(),"viewport"===t&&n.redrawHint("select",!0),"load"!==t&&"resize"!==t&&"mount"!==t||(n.invalidateContainerClientCoordsCache(),n.matchCanvasSize(n.container)),n.redrawHint("eles",!0),n.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()):n.destroy():n.load())},Wo.destroy=function(){var t=this;t.destroyed=!0,t.cy.stopAnimationLoop();for(var e=0;e<t.bindings.length;e++){var n=t.bindings[e],r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(t.bindings=[],t.beforeRenderCallbacks=[],t.onUpdateEleCalcsFns=[],t.removeObserver&&t.removeObserver.disconnect(),t.styleObserver&&t.styleObserver.disconnect(),t.resizeObserver&&t.resizeObserver.disconnect(),t.labelCalcDiv)try{document.body.removeChild(t.labelCalcDiv)}catch(t){}},Wo.isHeadless=function(){return!1},[_o,zo,Lo,Ro,jo,qo].forEach((function(t){W(Wo,t)}));var Go=1e3/60,Xo=function(t){return function(){var e=this,n=this.renderer;if(!e.dequeueingSetup){e.dequeueingSetup=!0;var r=i((function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()}),t.deqRedrawThreshold),a=t.priority||vt;n.beforeRender((function(i,a){var o=$(),s=n.averageRedrawTime,u=n.lastRedrawTime,l=[],h=n.cy.extent(),c=n.getPixelRatio();for(i||n.flushRenderedStyleQueue();;){var d=$(),f=d-o,p=d-a;if(u<Go){var v=Go-(i?s:0);if(p>=t.deqFastCost*v)break}else if(i){if(f>=t.deqCost*u||f>=t.deqAvgCost*s)break}else if(p>=t.deqNoDrawCost*Go)break;var g=t.deq(e,c,h);if(!(g.length>0))break;for(var y=0;y<g.length;y++)l.push(g[y])}l.length>0&&(t.onDeqd(e,l),!i&&t.shouldRedraw(e,l,c,h)&&r())}),a(e))}}},Yo=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ft;s(this,t),this.idsByKey=new Pt,this.keyForId=new Pt,this.cachesByLvl=new Pt,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=n}return l(t,[{key:"getIdsFor",value:function(t){null==t&&gt("Can not get id list for null key");var e=this.idsByKey,n=this.idsByKey.get(t);return n||(n=new Dt,e.set(t,n)),n}},{key:"addIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).add(e)}},{key:"deleteIdForKey",value:function(t,e){null!=t&&this.getIdsFor(t).delete(e)}},{key:"getNumberOfIdsForKey",value:function(t){return null==t?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e),r=this.getKey(t);this.deleteIdForKey(n,e),this.addIdForKey(r,e),this.keyForId.set(e,r)}},{key:"deleteKeyMappingFor",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteIdForKey(n,e),this.keyForId.delete(e)}},{key:"keyHasChangedFor",value:function(t){var e=t.id();return this.keyForId.get(e)!==this.getKey(t)}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var e=this.cachesByLvl,n=this.lvls,r=e.get(t);return r||(r=new Pt,e.set(t,r),n.push(t)),r}},{key:"getCache",value:function(t,e){return this.getCachesAt(e).get(t)}},{key:"get",value:function(t,e){var n=this.getKey(t),r=this.getCache(n,e);return null!=r&&this.updateKeyMappingFor(t),r}},{key:"getForCachedKey",value:function(t,e){var n=this.keyForId.get(t.id());return this.getCache(n,e)}},{key:"hasCache",value:function(t,e){return this.getCachesAt(e).has(t)}},{key:"has",value:function(t,e){var n=this.getKey(t);return this.hasCache(n,e)}},{key:"setCache",value:function(t,e,n){n.key=t,this.getCachesAt(e).set(t,n)}},{key:"set",value:function(t,e,n){var r=this.getKey(t);this.setCache(r,e,n),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,e){this.getCachesAt(e).delete(t)}},{key:"delete",value:function(t,e){var n=this.getKey(t);this.deleteCache(n,e)}},{key:"invalidateKey",value:function(t){var e=this;this.lvls.forEach((function(n){return e.deleteCache(t,n)}))}},{key:"invalidate",value:function(t){var e=t.id(),n=this.keyForId.get(e);this.deleteKeyMappingFor(t);var r=this.doesEleInvalidateKey(t);return r&&this.invalidateKey(n),r||0===this.getNumberOfIdsForKey(n)}}]),t}(),Uo={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},Ho=Mt({getKey:null,doesEleInvalidateKey:ft,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:dt,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Zo=function(t,e){var n=this;n.renderer=t,n.onDequeues=[];var r=Ho(e);W(n,r),n.lookup=new Yo(r.getKey,r.doesEleInvalidateKey),n.setupDequeueing()},Ko=Zo.prototype;Ko.reasons=Uo,Ko.getTextureQueue=function(t){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[t]=e.eleImgCaches[t]||[]},Ko.getRetiredTextureQueue=function(t){var e=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return e[t]=e[t]||[]},Ko.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new a((function(t,e){return e.reqs-t.reqs}))},Ko.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},Ko.getElement=function(t,e,n,r,i){var a=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(0===e.w||0===e.h||isNaN(e.w)||isNaN(e.h)||!t.visible())return null;if(!a.allowEdgeTxrCaching&&t.isEdge()||!a.allowParentTxrCaching&&t.isParent())return null;if(null==r&&(r=Math.ceil($t(s*n))),r<-4)r=-4;else if(s>=7.99||r>3)return null;var l=Math.pow(2,r),h=e.h*l,c=e.w*l,d=o.eleTextBiggerThanMin(t,l);if(!this.isVisible(t,d))return null;var f,p=u.get(t,r);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;if(f=h<=25?25:h<=50?50:50*Math.ceil(h/50),h>1024||c>1024)return null;var v=a.getTextureQueue(f),g=v[v.length-2],y=function(){return a.recycleTexture(f,c)||a.addTexture(f,c)};g||(g=v[v.length-1]),g||(g=y()),g.width-g.usedWidth<c&&(g=y());for(var m,b=function(t){return t&&t.scaledLabelShown===d},x=i&&i===Uo.dequeue,w=i&&i===Uo.highQuality,_=i&&i===Uo.downscale,M=r+1;M<=3;M++){var E=u.get(t,M);if(E){m=E;break}}var k=m&&m.level===r+1?m:null,C=function(){g.context.drawImage(k.texture.canvas,k.x,0,k.width,k.height,g.usedWidth,0,c,h)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,c,f),b(k))C();else if(b(m)){if(!w)return a.queueElement(t,m.level-1),m;for(var S=m.level;S>r;S--)k=a.getElement(t,e,n,S,Uo.downscale);C()}else{var P;if(!x&&!w&&!_)for(var T=r-1;T>=-4;T--){var D=u.get(t,T);if(D){P=D;break}}if(b(P))return a.queueElement(t,r),P;g.context.translate(g.usedWidth,0),g.context.scale(l,l),this.drawElement(g.context,t,e,d,!1),g.context.scale(1/l,1/l),g.context.translate(-g.usedWidth,0)}return p={x:g.usedWidth,texture:g,level:r,scale:l,width:c,height:h,scaledLabelShown:d},g.usedWidth+=Math.ceil(c+8),g.eleCaches.push(p),u.set(t,r,p),a.checkTextureFullness(g),p},Ko.invalidateElements=function(t){for(var e=0;e<t.length;e++)this.invalidateElement(t[e])},Ko.invalidateElement=function(t){var e=this,n=e.lookup,r=[];if(n.isInvalid(t)){for(var i=-4;i<=3;i++){var a=n.getForCachedKey(t,i);a&&r.push(a)}if(n.invalidate(t))for(var o=0;o<r.length;o++){var s=r[o],u=s.texture;u.invalidatedWidth+=s.width,s.invalidated=!0,e.checkTextureUtility(u)}e.removeFromQueue(t)}},Ko.checkTextureUtility=function(t){t.invalidatedWidth>=.2*t.width&&this.retireTexture(t)},Ko.checkTextureFullness=function(t){var e=this.getTextureQueue(t.height);t.usedWidth/t.width>.8&&t.fullnessChecks>=10?Et(e,t):t.fullnessChecks++},Ko.retireTexture=function(t){var e=t.height,n=this.getTextureQueue(e),r=this.lookup;Et(n,t),t.retired=!0;for(var i=t.eleCaches,a=0;a<i.length;a++){var o=i[a];r.deleteCache(o.key,o.level)}kt(i),this.getRetiredTextureQueue(e).push(t)},Ko.addTexture=function(t,e){var n={};return this.getTextureQueue(t).push(n),n.eleCaches=[],n.height=t,n.width=Math.max(1024,e),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},Ko.recycleTexture=function(t,e){for(var n=this.getTextureQueue(t),r=this.getRetiredTextureQueue(t),i=0;i<r.length;i++){var a=r[i];if(a.width>=e)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,kt(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),Et(r,a),n.push(a),a}},Ko.queueElement=function(t,e){var n=this.getElementQueue(),r=this.getElementKeyToQueue(),i=this.getKey(t),a=r[i];if(a)a.level=Math.max(a.level,e),a.eles.merge(t),a.reqs++,n.updateItem(a);else{var o={eles:t.spawn().merge(t),level:e,reqs:1,key:i};n.push(o),r[i]=o}},Ko.dequeue=function(t){for(var e=this,n=e.getElementQueue(),r=e.getElementKeyToQueue(),i=[],a=e.lookup,o=0;o<1&&n.size()>0;o++){var s=n.pop(),u=s.key,l=s.eles[0],h=a.hasCache(l,s.level);if(r[u]=null,!h){i.push(s);var c=e.getBoundingBox(l);e.getElement(l,c,t,s.level,Uo.dequeue)}}return i},Ko.removeFromQueue=function(t){var e=this.getElementQueue(),n=this.getElementKeyToQueue(),r=this.getKey(t),i=n[r];null!=i&&(1===i.eles.length?(i.reqs=ct,e.updateItem(i),e.pop(),n[r]=null):i.eles.unmerge(t))},Ko.onDequeue=function(t){this.onDequeues.push(t)},Ko.offDequeue=function(t){Et(this.onDequeues,t)},Ko.setupDequeueing=Xo({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e,n){return t.dequeue(e,n)},onDeqd:function(t,e){for(var n=0;n<t.onDequeues.length;n++)(0,t.onDequeues[n])(e)},shouldRedraw:function(t,e,n,r){for(var i=0;i<e.length;i++)for(var a=e[i].eles,o=0;o<a.length;o++){var s=a[o].boundingBox();if(ce(s,r))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var $o=function(t){var e=this,n=e.renderer=t,r=n.cy;e.layersByLevel={},e.firstGet=!0,e.lastInvalidationTime=$()-500,e.skipping=!1,e.eleTxrDeqs=r.collection(),e.scheduleElementRefinement=i((function(){e.refineElementTextures(e.eleTxrDeqs),e.eleTxrDeqs.unmerge(e.eleTxrDeqs)}),50),n.beforeRender((function(t,n){n-e.lastInvalidationTime<=250?e.skipping=!0:e.skipping=!1}),n.beforeRenderPriorities.lyrTxrSkip),e.layersQueue=new a((function(t,e){return e.reqs-t.reqs})),e.setupDequeueing()},Qo=$o.prototype,Jo=0,ts=Math.pow(2,53)-1;Qo.makeLayer=function(t,e){var n=Math.pow(2,e),r=Math.ceil(t.w*n),i=Math.ceil(t.h*n),a=this.renderer.makeOffscreenCanvas(r,i),o={id:Jo=++Jo%ts,bb:t,level:e,width:r,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,l=-o.bb.y1;return s.scale(n,n),s.translate(u,l),o},Qo.getLayers=function(t,e,n){var r=this,i=r.renderer.cy.zoom(),a=r.firstGet;if(r.firstGet=!1,null==n)if((n=Math.ceil($t(i*e)))<-4)n=-4;else if(i>=3.99||n>2)return null;r.validateLayersElesOrdering(n,t);var o,s,u=r.layersByLevel,l=Math.pow(2,n),h=u[n]=u[n]||[];if(r.levelIsComplete(n,t))return h;!function(){var e=function(e){if(r.validateLayersElesOrdering(e,t),r.levelIsComplete(e,t))return s=u[e],!0},i=function(t){if(!s)for(var r=n+t;-4<=r&&r<=2&&!e(r);r+=t);};i(1),i(-1);for(var a=h.length-1;a>=0;a--){var o=h[a];o.invalid&&Et(h,o)}}();var c=function(e){var i=(e=e||{}).after;if(function(){if(!o){o=ae();for(var e=0;e<t.length;e++)n=o,r=t[e].boundingBox(),n.x1=Math.min(n.x1,r.x1),n.x2=Math.max(n.x2,r.x2),n.w=n.x2-n.x1,n.y1=Math.min(n.y1,r.y1),n.y2=Math.max(n.y2,r.y2),n.h=n.y2-n.y1}var n,r}(),o.w*l*(o.h*l)>16e6)return null;var a=r.makeLayer(o,n);if(null!=i){var s=h.indexOf(i)+1;h.splice(s,0,a)}else(void 0===e.insert||e.insert)&&h.unshift(a);return a};if(r.skipping&&!a)return null;for(var d=null,f=t.length/1,p=!a,v=0;v<t.length;v++){var g=t[v],y=g._private.rscratch,m=y.imgLayerCaches=y.imgLayerCaches||{},b=m[n];if(b)d=b;else{if((!d||d.eles.length>=f||!fe(d.bb,g.boundingBox()))&&!(d=c({insert:!0,after:d})))return null;s||p?r.queueLayer(d,g):r.drawEleInLayer(d,g,n,e),d.eles.push(g),m[n]=d}}return s||(p?null:h)},Qo.getEleLevelForLayerLevel=function(t,e){return t},Qo.drawEleInLayer=function(t,e,n,r){var i=this.renderer,a=t.context,o=e.boundingBox();0!==o.w&&0!==o.h&&e.visible()&&(n=this.getEleLevelForLayerLevel(n,r),i.setImgSmoothing(a,!1),i.drawCachedElement(a,e,null,null,n,!0),i.setImgSmoothing(a,!0))},Qo.levelIsComplete=function(t,e){var n=this.layersByLevel[t];if(!n||0===n.length)return!1;for(var r=0,i=0;i<n.length;i++){var a=n[i];if(a.reqs>0)return!1;if(a.invalid)return!1;r+=a.eles.length}return r===e.length},Qo.validateLayersElesOrdering=function(t,e){var n=this.layersByLevel[t];if(n)for(var r=0;r<n.length;r++){for(var i=n[r],a=-1,o=0;o<e.length;o++)if(i.eles[0]===e[o]){a=o;break}if(a<0)this.invalidateLayer(i);else{var s=a;for(o=0;o<i.eles.length;o++)if(i.eles[o]!==e[s+o]){this.invalidateLayer(i);break}}}},Qo.updateElementsInLayers=function(t,e){for(var n=C(t[0]),r=0;r<t.length;r++)for(var i=n?null:t[r],a=n?t[r]:t[r].ele,o=a._private.rscratch,s=o.imgLayerCaches=o.imgLayerCaches||{},u=-4;u<=2;u++){var l=s[u];l&&(i&&this.getEleLevelForLayerLevel(l.level)!==i.level||e(l,a,i))}},Qo.haveLayers=function(){for(var t=!1,e=-4;e<=2;e++){var n=this.layersByLevel[e];if(n&&n.length>0){t=!0;break}}return t},Qo.invalidateElements=function(t){var e=this;0!==t.length&&(e.lastInvalidationTime=$(),0!==t.length&&e.haveLayers()&&e.updateElementsInLayers(t,(function(t,n,r){e.invalidateLayer(t)})))},Qo.invalidateLayer=function(t){if(this.lastInvalidationTime=$(),!t.invalid){var e=t.level,n=t.eles,r=this.layersByLevel[e];Et(r,t),t.elesQueue=[],t.invalid=!0,t.replacement&&(t.replacement.invalid=!0);for(var i=0;i<n.length;i++){var a=n[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}},Qo.refineElementTextures=function(t){var e=this;e.updateElementsInLayers(t,(function(t,n,r){var i=t.replacement;if(i||((i=t.replacement=e.makeLayer(t.bb,t.level)).replaces=t,i.eles=t.eles),!i.reqs)for(var a=0;a<i.eles.length;a++)e.queueLayer(i,i.eles[a])}))},Qo.enqueueElementRefinement=function(t){this.eleTxrDeqs.merge(t),this.scheduleElementRefinement()},Qo.queueLayer=function(t,e){var n=this.layersQueue,r=t.elesQueue,i=r.hasId=r.hasId||{};if(!t.replacement){if(e){if(i[e.id()])return;r.push(e),i[e.id()]=!0}t.reqs?(t.reqs++,n.updateItem(t)):(t.reqs=1,n.push(t))}},Qo.dequeue=function(t){for(var e=this,n=e.layersQueue,r=[],i=0;i<1&&0!==n.size();){var a=n.peek();if(a.replacement)n.pop();else if(a.replaces&&a!==a.replaces.replacement)n.pop();else if(a.invalid)n.pop();else{var o=a.elesQueue.shift();o&&(e.drawEleInLayer(a,o,a.level,t),i++),0===r.length&&r.push(!0),0===a.elesQueue.length&&(n.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}}return r},Qo.applyLayerReplacement=function(t){var e=this.layersByLevel[t.level],n=t.replaces,r=e.indexOf(n);if(!(r<0||n.invalid)){e[r]=t;for(var i=0;i<t.eles.length;i++){var a=t.eles[i]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[t.level]=t)}this.requestRedraw()}},Qo.requestRedraw=i((function(){var t=this.renderer;t.redrawHint("eles",!0),t.redrawHint("drag",!0),t.redraw()}),100),Qo.setupDequeueing=Xo({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(t,e){return t.dequeue(e)},onDeqd:vt,shouldRedraw:dt,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var es,ns={};function rs(t,e){for(var n=0;n<e.length;n++){var r=e[n];t.lineTo(r.x,r.y)}}function is(t,e,n){for(var r,i=0;i<e.length;i++){var a=e[i];0===i&&(r=a),t.lineTo(a.x,a.y)}t.quadraticCurveTo(n.x,n.y,r.x,r.y)}function as(t,e,n){t.beginPath&&t.beginPath();for(var r=e,i=0;i<r.length;i++){var a=r[i];t.lineTo(a.x,a.y)}var o=n,s=n[0];for(t.moveTo(s.x,s.y),i=1;i<o.length;i++)a=o[i],t.lineTo(a.x,a.y);t.closePath&&t.closePath()}function os(t,e,n,r,i){t.beginPath&&t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1);var a=e,o=a[0];t.moveTo(o.x,o.y);for(var s=0;s<a.length;s++){var u=a[s];t.lineTo(u.x,u.y)}t.closePath&&t.closePath()}function ss(t,e,n,r){t.arc(e,n,r,0,2*Math.PI,!1)}ns.arrowShapeImpl=function(t){return(es||(es={polygon:rs,"triangle-backcurve":is,"triangle-tee":as,"circle-triangle":os,"triangle-cross":as,circle:ss}))[t]};var us={drawElement:function(t,e,n,r,i,a){e.isNode()?this.drawNode(t,e,n,r,i,a):this.drawEdge(t,e,n,r,i,a)},drawElementOverlay:function(t,e){e.isNode()?this.drawNodeOverlay(t,e):this.drawEdgeOverlay(t,e)},drawCachedElementPortion:function(t,e,n,r,i,a,o,s){var u=this,l=n.getBoundingBox(e);if(0!==l.w&&0!==l.h){var h=n.getElement(e,l,r,i,a);if(null!=h){var c=s(u,e);if(0===c)return;var d,f,p,v,g,y,m=o(u,e),b=l.x1,x=l.y1,w=l.w,_=l.h;if(0!==m){var M=n.getRotationPoint(e);p=M.x,v=M.y,t.translate(p,v),t.rotate(m),(g=u.getImgSmoothing(t))||u.setImgSmoothing(t,!0);var E=n.getRotationOffset(e);d=E.x,f=E.y}else d=b,f=x;1!==c&&(y=t.globalAlpha,t.globalAlpha=y*c),t.drawImage(h.texture.canvas,h.x,0,h.width,h.height,d,f,w,_),1!==c&&(t.globalAlpha=y),0!==m&&(t.rotate(-m),t.translate(-p,-v),g||u.setImgSmoothing(t,!1))}else n.drawElement(t,e)}}},ls=function(){return 0},hs=function(t,e){return t.getTextAngle(e,null)},cs=function(t,e){return t.getTextAngle(e,"source")},ds=function(t,e){return t.getTextAngle(e,"target")},fs=function(t,e){return e.effectiveOpacity()},ps=function(t,e){return e.pstyle("text-opacity").pfValue*e.effectiveOpacity()};us.drawCachedElement=function(t,e,n,r,i,a){var o=this,s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,h=s.slbTxrCache,c=s.tlbTxrCache,d=e.boundingBox(),f=!0===a?u.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&e.visible()&&(!r||ce(d,r))){var p=e.isEdge(),v=e.element()._private.rscratch.badLine;o.drawCachedElementPortion(t,e,u,n,i,f,ls,fs),p&&v||o.drawCachedElementPortion(t,e,l,n,i,f,hs,ps),p&&!v&&(o.drawCachedElementPortion(t,e,h,n,i,f,cs,ps),o.drawCachedElementPortion(t,e,c,n,i,f,ds,ps)),o.drawElementOverlay(t,e)}},us.drawElements=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];this.drawElement(t,r)}},us.drawCachedElements=function(t,e,n,r){for(var i=0;i<e.length;i++){var a=e[i];this.drawCachedElement(t,a,n,r)}},us.drawCachedNodes=function(t,e,n,r){for(var i=0;i<e.length;i++){var a=e[i];a.isNode()&&this.drawCachedElement(t,a,n,r)}},us.drawLayeredElements=function(t,e,n,r){var i=this.data.lyrTxrCache.getLayers(e,n);if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o.bb;0!==s.w&&0!==s.h&&t.drawImage(o.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(t,e,n,r)};for(var vs={drawEdge:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this,s=e._private.rscratch;if((!a||e.visible())&&!s.badLine&&null!=s.allpts&&!isNaN(s.allpts[0])){var u;n&&(u=n,t.translate(-u.x1,-u.y1));var l=a?e.pstyle("opacity").value:1,h=e.pstyle("line-style").value,c=e.pstyle("width").pfValue,d=e.pstyle("line-cap").value,f=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;t.lineWidth=c,t.lineCap=d,o.eleStrokeStyle(t,e,n),o.drawEdgePath(e,t,s.allpts,h),t.lineCap="butt"},p=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;o.drawArrowheads(t,e,n)};if(t.lineJoin="round","yes"===e.pstyle("ghost").value){var v=e.pstyle("ghost-offset-x").pfValue,g=e.pstyle("ghost-offset-y").pfValue,y=e.pstyle("ghost-opacity").value,m=l*y;t.translate(v,g),f(m),p(m),t.translate(-v,-g)}f(),p(),i&&o.drawEdgeOverlay(t,e),o.drawElementText(t,e,null,r),n&&t.translate(u.x1,u.y1)}},drawEdgeOverlay:function(t,e){if(e.visible()){var n=e.pstyle("overlay-opacity").value;if(0!==n){var r=this,i=r.usePaths(),a=e._private.rscratch,o=2*e.pstyle("overlay-padding").pfValue,s=e.pstyle("overlay-color").value;t.lineWidth=o,"self"!==a.edgeType||i?t.lineCap="round":t.lineCap="butt",r.colorStrokeStyle(t,s[0],s[1],s[2],n),r.drawEdgePath(e,t,a.allpts,"solid")}}},drawEdgePath:function(t,e,n,r){var i,a=t._private.rscratch,o=e,s=!1,u=this.usePaths(),l=t.pstyle("line-dash-pattern").pfValue,h=t.pstyle("line-dash-offset").pfValue;if(u){var c=n.join("$");a.pathCacheKey&&a.pathCacheKey===c?(i=e=a.pathCache,s=!0):(i=e=new Path2D,a.pathCacheKey=c,a.pathCache=i)}if(o.setLineDash)switch(r){case"dotted":o.setLineDash([1,1]);break;case"dashed":o.setLineDash(l),o.lineDashOffset=h;break;case"solid":o.setLineDash([])}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(n[0],n[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<n.length;d+=4)e.quadraticCurveTo(n[d],n[d+1],n[d+2],n[d+3]);break;case"straight":case"segments":case"haystack":for(var f=2;f+1<n.length;f+=2)e.lineTo(n[f],n[f+1])}e=o,u?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])},drawArrowheads:function(t,e,n){var r=e._private.rscratch,i="haystack"===r.edgeType;i||this.drawArrowhead(t,e,"source",r.arrowStartX,r.arrowStartY,r.srcArrowAngle,n),this.drawArrowhead(t,e,"mid-target",r.midX,r.midY,r.midtgtArrowAngle,n),this.drawArrowhead(t,e,"mid-source",r.midX,r.midY,r.midsrcArrowAngle,n),i||this.drawArrowhead(t,e,"target",r.arrowEndX,r.arrowEndY,r.tgtArrowAngle,n)},drawArrowhead:function(t,e,n,r,i,a,o){if(!(isNaN(r)||null==r||isNaN(i)||null==i||isNaN(a)||null==a)){var s=this,u=e.pstyle(n+"-arrow-shape").value;if("none"!==u){var l="hollow"===e.pstyle(n+"-arrow-fill").value?"both":"filled",h=e.pstyle(n+"-arrow-fill").value,c=e.pstyle("width").pfValue,d=e.pstyle("opacity").value;void 0===o&&(o=d);var f=t.globalCompositeOperation;1===o&&"hollow"!==h||(t.globalCompositeOperation="destination-out",s.colorFillStyle(t,255,255,255,1),s.colorStrokeStyle(t,255,255,255,1),s.drawArrowShape(e,t,l,c,u,r,i,a),t.globalCompositeOperation=f);var p=e.pstyle(n+"-arrow-color").value;s.colorFillStyle(t,p[0],p[1],p[2],o),s.colorStrokeStyle(t,p[0],p[1],p[2],o),s.drawArrowShape(e,t,h,c,u,r,i,a)}}},drawArrowShape:function(t,e,n,r,i,a,o,s){var u,l=this,h=this.usePaths()&&"triangle-cross"!==i,c=!1,d=e,f={x:a,y:o},p=t.pstyle("arrow-scale").value,v=this.getArrowWidth(r,p),g=l.arrowShapes[i];if(h){var y=l.arrowPathCache=l.arrowPathCache||[],m=at(i),b=y[m];null!=b?(u=e=b,c=!0):(u=e=new Path2D,y[m]=u)}c||(e.beginPath&&e.beginPath(),h?g.draw(e,1,0,{x:0,y:0},1):g.draw(e,v,s,f,r),e.closePath&&e.closePath()),e=d,h&&(e.translate(a,o),e.rotate(s),e.scale(v,v)),"filled"!==n&&"both"!==n||(h?e.fill(u):e.fill()),"hollow"!==n&&"both"!==n||(e.lineWidth=(g.matchEdgeWidth?r:1)/(h?v:1),e.lineJoin="miter",h?e.stroke(u):e.stroke()),h&&(e.scale(1/v,1/v),e.rotate(-s),e.translate(-a,-o))}},gs={safeDrawImage:function(t,e,n,r,i,a,o,s,u,l){i<=0||a<=0||u<=0||l<=0||t.drawImage(e,n,r,i,a,o,s,u,l)},drawInscribedImage:function(t,e,n,r,i){var a=this,o=n.position(),s=o.x,u=o.y,l=n.cy().style(),h=l.getIndexedStyle.bind(l),c=h(n,"background-fit","value",r),d=h(n,"background-repeat","value",r),f=n.width(),p=n.height(),v=2*n.padding(),g=f+("inner"===h(n,"background-width-relative-to","value",r)?0:v),y=p+("inner"===h(n,"background-height-relative-to","value",r)?0:v),m=n._private.rscratch,b="node"===h(n,"background-clip","value",r),x=h(n,"background-image-opacity","value",r)*i,w=e.width||e.cachedW,_=e.height||e.cachedH;null!=w&&null!=_||(document.body.appendChild(e),w=e.cachedW=e.width||e.offsetWidth,_=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var M=w,E=_;if("auto"!==h(n,"background-width","value",r)&&(M="%"===h(n,"background-width","units",r)?h(n,"background-width","pfValue",r)*g:h(n,"background-width","pfValue",r)),"auto"!==h(n,"background-height","value",r)&&(E="%"===h(n,"background-height","units",r)?h(n,"background-height","pfValue",r)*y:h(n,"background-height","pfValue",r)),0!==M&&0!==E){if("contain"===c)M*=k=Math.min(g/M,y/E),E*=k;else if("cover"===c){var k;M*=k=Math.max(g/M,y/E),E*=k}var C=s-g/2,S=h(n,"background-position-x","units",r),P=h(n,"background-position-x","pfValue",r);C+="%"===S?(g-M)*P:P;var T=h(n,"background-offset-x","units",r),D=h(n,"background-offset-x","pfValue",r);C+="%"===T?(g-M)*D:D;var I=u-y/2,B=h(n,"background-position-y","units",r),N=h(n,"background-position-y","pfValue",r);I+="%"===B?(y-E)*N:N;var O=h(n,"background-offset-y","units",r),A=h(n,"background-offset-y","pfValue",r);I+="%"===O?(y-E)*A:A,m.pathCache&&(C-=s,I-=u,s=0,u=0);var z=t.globalAlpha;if(t.globalAlpha=x,"no-repeat"===d)b&&(t.save(),m.pathCache?t.clip(m.pathCache):(a.nodeShapes[a.getNodeShape(n)].draw(t,s,u,g,y),t.clip())),a.safeDrawImage(t,e,0,0,w,_,C,I,M,E),b&&t.restore();else{var L=t.createPattern(e,d);t.fillStyle=L,a.nodeShapes[a.getNodeShape(n)].draw(t,s,u,g,y),t.translate(C,I),t.fill(),t.translate(-C,-I)}t.globalAlpha=z}}},ys={eleTextBiggerThanMin:function(t,e){if(!e){var n=t.cy().zoom(),r=this.getPixelRatio(),i=Math.ceil($t(n*r));e=Math.pow(2,i)}return!(t.pstyle("font-size").pfValue*e<t.pstyle("min-zoomed-font-size").pfValue)},drawElementText:function(t,e,n,r,i){var a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=this;if(null==r){if(a&&!o.eleTextBiggerThanMin(e))return}else if(!1===r)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);t.textAlign=u,t.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,h=e.pstyle("label"),c=e.pstyle("source-label"),d=e.pstyle("target-label");if(l||(!h||!h.value)&&(!c||!c.value)&&(!d||!d.value))return;t.textAlign="center",t.textBaseline="bottom"}var f,p=!n;n&&(f=n,t.translate(-f.x1,-f.y1)),null==i?(o.drawText(t,e,null,p,a),e.isEdge()&&(o.drawText(t,e,"source",p,a),o.drawText(t,e,"target",p,a))):o.drawText(t,e,i,p,a),n&&t.translate(f.x1,f.y1)},getFontCache:function(t){var e;this.fontCaches=this.fontCaches||[];for(var n=0;n<this.fontCaches.length;n++)if((e=this.fontCaches[n]).context===t)return e;return e={context:t},this.fontCaches.push(e),e},setupTextStyle:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=n?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,h=e.pstyle("text-outline-color").value;t.font=r+" "+o+" "+i+" "+a,t.lineJoin="round",this.colorFillStyle(t,l[0],l[1],l[2],s),this.colorStrokeStyle(t,h[0],h[1],h[2],u)},getTextAngle:function(t,e){var n=t._private.rscratch,r=e?e+"-":"",i=t.pstyle(r+"text-rotation"),a=Ct(n,"labelAngle",e);return"autorotate"===i.strValue?t.isEdge()?a:0:"none"===i.strValue?0:i.pfValue},drawText:function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=e._private.rscratch,o=i?e.effectiveOpacity():1;if(!i||0!==o&&0!==e.pstyle("text-opacity").value){"main"===n&&(n=null);var s,u,l=Ct(a,"labelX",n),h=Ct(a,"labelY",n),c=this.getLabelText(e,n);if(null!=c&&""!==c&&!isNaN(l)&&!isNaN(h)){this.setupTextStyle(t,e,i);var d,f=n?n+"-":"",p=Ct(a,"labelWidth",n),v=Ct(a,"labelHeight",n),g=e.pstyle(f+"text-margin-x").pfValue,y=e.pstyle(f+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle("text-halign").value,x=e.pstyle("text-valign").value;switch(m&&(b="center",x="center"),l+=g,h+=y,0!==(d=r?this.getTextAngle(e,n):0)&&(s=l,u=h,t.translate(s,u),t.rotate(d),l=0,h=0),x){case"top":break;case"center":h+=v/2;break;case"bottom":h+=v}var w=e.pstyle("text-background-opacity").value,_=e.pstyle("text-border-opacity").value,M=e.pstyle("text-border-width").pfValue,E=e.pstyle("text-background-padding").pfValue;if(w>0||M>0&&_>0){var k=l-E;switch(b){case"left":k-=p;break;case"center":k-=p/2}var C=h-v-E,S=p+2*E,P=v+2*E;if(w>0){var T=t.fillStyle,D=e.pstyle("text-background-color").value;t.fillStyle="rgba("+D[0]+","+D[1]+","+D[2]+","+w*o+")",0===e.pstyle("text-background-shape").strValue.indexOf("round")?function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;t.beginPath(),t.moveTo(e+a,n),t.lineTo(e+r-a,n),t.quadraticCurveTo(e+r,n,e+r,n+a),t.lineTo(e+r,n+i-a),t.quadraticCurveTo(e+r,n+i,e+r-a,n+i),t.lineTo(e+a,n+i),t.quadraticCurveTo(e,n+i,e,n+i-a),t.lineTo(e,n+a),t.quadraticCurveTo(e,n,e+a,n),t.closePath(),t.fill()}(t,k,C,S,P,2):t.fillRect(k,C,S,P),t.fillStyle=T}if(M>0&&_>0){var I=t.strokeStyle,B=t.lineWidth,N=e.pstyle("text-border-color").value,O=e.pstyle("text-border-style").value;if(t.strokeStyle="rgba("+N[0]+","+N[1]+","+N[2]+","+_*o+")",t.lineWidth=M,t.setLineDash)switch(O){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"double":t.lineWidth=M/4,t.setLineDash([]);break;case"solid":t.setLineDash([])}if(t.strokeRect(k,C,S,P),"double"===O){var A=M/2;t.strokeRect(k+A,C+A,S-2*A,P-2*A)}t.setLineDash&&t.setLineDash([]),t.lineWidth=B,t.strokeStyle=I}}var z=2*e.pstyle("text-outline-width").pfValue;if(z>0&&(t.lineWidth=z),"wrap"===e.pstyle("text-wrap").value){var L=Ct(a,"labelWrapCachedLines",n),R=Ct(a,"labelLineHeight",n),j=p/2,q=this.getLabelJustification(e);switch("auto"===q||("left"===b?"left"===q?l+=-p:"center"===q&&(l+=-j):"center"===b?"left"===q?l+=-j:"right"===q&&(l+=j):"right"===b&&("center"===q?l+=j:"right"===q&&(l+=p))),x){case"top":case"center":case"bottom":h-=(L.length-1)*R}for(var F=0;F<L.length;F++)z>0&&t.strokeText(L[F],l,h),t.fillText(L[F],l,h),h+=R}else z>0&&t.strokeText(c,l,h),t.fillText(c,l,h);0!==d&&(t.rotate(-d),t.translate(-s,-u))}}}},ms={drawNode:function(t,e,n){var r,i,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=this,l=e._private,h=l.rscratch,c=e.position();if(M(c.x)&&M(c.y)&&(!s||e.visible())){var d,f,p=s?e.effectiveOpacity():1,v=u.usePaths(),g=!1,y=e.padding();r=e.width()+2*y,i=e.height()+2*y,n&&(f=n,t.translate(-f.x1,-f.y1));for(var m=e.pstyle("background-image").value,b=new Array(m.length),x=new Array(m.length),w=0,_=0;_<m.length;_++){var E=m[_];if(b[_]=null!=E&&"none"!==E){var k=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",_);w++,x[_]=u.getCachedImage(E,k,(function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")}))}}var C=e.pstyle("background-blacken").value,S=e.pstyle("border-width").pfValue,P=e.pstyle("background-opacity").value*p,T=e.pstyle("border-color").value,D=e.pstyle("border-style").value,I=e.pstyle("border-opacity").value*p;t.lineJoin="miter";var B=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;u.eleFillStyle(t,e,n)},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;u.colorStrokeStyle(t,T[0],T[1],T[2],e)},O=e.pstyle("shape").strValue,A=e.pstyle("shape-polygon-points").pfValue;if(v){t.translate(c.x,c.y);var z=u.nodePathCache=u.nodePathCache||[],L=ot("polygon"===O?O+","+A.join(","):O,""+i,""+r),R=z[L];null!=R?(d=R,g=!0,h.pathCache=d):(d=new Path2D,z[L]=h.pathCache=d)}var j=function(){if(!g){var n=c;v&&(n={x:0,y:0}),u.nodeShapes[u.getNodeShape(e)].draw(d||t,n.x,n.y,r,i)}v?t.fill(d):t.fill()},q=function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=l.backgrounding,i=0,a=0;a<x.length;a++)b[a]&&x[a].complete&&!x[a].error&&(i++,u.drawInscribedImage(t,x[a],e,a,n));l.backgrounding=!(i===w),r!==l.backgrounding&&e.updateStyle(!1)},F=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;u.hasPie(e)&&(u.drawPie(t,e,a),n&&(v||u.nodeShapes[u.getNodeShape(e)].draw(t,c.x,c.y,r,i)))},V=function(){var e=(C>0?C:-C)*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p),n=C>0?0:255;0!==C&&(u.colorFillStyle(t,n,n,n,e),v?t.fill(d):t.fill())},W=function(){if(S>0){if(t.lineWidth=S,t.lineCap="butt",t.setLineDash)switch(D){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash([4,2]);break;case"solid":case"double":t.setLineDash([])}if(v?t.stroke(d):t.stroke(),"double"===D){t.lineWidth=S/3;var e=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",v?t.stroke(d):t.stroke(),t.globalCompositeOperation=e}t.setLineDash&&t.setLineDash([])}};if("yes"===e.pstyle("ghost").value){var G=e.pstyle("ghost-offset-x").pfValue,X=e.pstyle("ghost-offset-y").pfValue,Y=e.pstyle("ghost-opacity").value,U=Y*p;t.translate(G,X),B(Y*P),j(),q(U),F(0!==C||0!==S),V(U),N(Y*I),W(),t.translate(-G,-X)}B(),j(),q(),F(0!==C||0!==S),V(),N(),W(),v&&t.translate(-c.x,-c.y),u.drawElementText(t,e,null,a),o&&u.drawNodeOverlay(t,e,c,r,i),n&&t.translate(f.x1,f.y1)}},drawNodeOverlay:function(t,e,n,r,i){if(e.visible()){var a=e.pstyle("overlay-padding").pfValue,o=e.pstyle("overlay-opacity").value,s=e.pstyle("overlay-color").value;if(o>0){if(n=n||e.position(),null==r||null==i){var u=e.padding();r=e.width()+2*u,i=e.height()+2*u}this.colorFillStyle(t,s[0],s[1],s[2],o),this.nodeShapes.roundrectangle.draw(t,n.x,n.y,r+2*a,i+2*a),t.fill()}}},hasPie:function(t){return(t=t[0])._private.hasPie},drawPie:function(t,e,n,r){e=e[0],r=r||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),o=r.x,s=r.y,u=e.width(),l=e.height(),h=Math.min(u,l)/2,c=0;this.usePaths()&&(o=0,s=0),"%"===a.units?h*=a.pfValue:void 0!==a.pfValue&&(h=a.pfValue/2);for(var d=1;d<=i.pieBackgroundN;d++){var f=e.pstyle("pie-"+d+"-background-size").value,p=e.pstyle("pie-"+d+"-background-color").value,v=e.pstyle("pie-"+d+"-background-opacity").value*n,g=f/100;g+c>1&&(g=1-c);var y=1.5*Math.PI+2*Math.PI*c,m=y+2*Math.PI*g;0===f||c>=1||c+g>1||(t.beginPath(),t.moveTo(o,s),t.arc(o,s,h,y,m),t.closePath(),this.colorFillStyle(t,p[0],p[1],p[2],v),t.fill(),c+=g)}}},bs={getPixelRatio:function(){var t=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e},paintCache:function(t){for(var e,n=this.paintCaches=this.paintCaches||[],r=!0,i=0;i<n.length;i++)if((e=n[i]).context===t){r=!1;break}return r&&(e={context:t},n.push(e)),e},createGradientStyleFor:function(t,e,n,r,i){var a,o=this.usePaths(),s=n.pstyle(e+"-gradient-stop-colors").value,u=n.pstyle(e+"-gradient-stop-positions").pfValue;if("radial-gradient"===r)if(n.isEdge()){var l=n.sourceEndpoint(),h=n.targetEndpoint(),c=n.midpoint(),d=Jt(l,c),f=Jt(h,c);a=t.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(d,f))}else{var p=o?{x:0,y:0}:n.position(),v=n.paddedWidth(),g=n.paddedHeight();a=t.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(v,g))}else if(n.isEdge()){var y=n.sourceEndpoint(),m=n.targetEndpoint();a=t.createLinearGradient(y.x,y.y,m.x,m.y)}else{var b=o?{x:0,y:0}:n.position(),x=n.paddedWidth()/2,w=n.paddedHeight()/2;switch(n.pstyle("background-gradient-direction").value){case"to-bottom":a=t.createLinearGradient(b.x,b.y-w,b.x,b.y+w);break;case"to-top":a=t.createLinearGradient(b.x,b.y+w,b.x,b.y-w);break;case"to-left":a=t.createLinearGradient(b.x+x,b.y,b.x-x,b.y);break;case"to-right":a=t.createLinearGradient(b.x-x,b.y,b.x+x,b.y);break;case"to-bottom-right":case"to-right-bottom":a=t.createLinearGradient(b.x-x,b.y-w,b.x+x,b.y+w);break;case"to-top-right":case"to-right-top":a=t.createLinearGradient(b.x-x,b.y+w,b.x+x,b.y-w);break;case"to-bottom-left":case"to-left-bottom":a=t.createLinearGradient(b.x+x,b.y-w,b.x-x,b.y+w);break;case"to-top-left":case"to-left-top":a=t.createLinearGradient(b.x+x,b.y+w,b.x-x,b.y-w)}}if(!a)return null;for(var _=u.length===s.length,M=s.length,E=0;E<M;E++)a.addColorStop(_?u[E]:E/(M-1),"rgba("+s[E][0]+","+s[E][1]+","+s[E][2]+","+i+")");return a},gradientFillStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"background",e,n,r);if(!i)return null;t.fillStyle=i},colorFillStyle:function(t,e,n,r,i){t.fillStyle="rgba("+e+","+n+","+r+","+i+")"},eleFillStyle:function(t,e,n){var r=e.pstyle("background-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientFillStyle(t,e,r,n);else{var i=e.pstyle("background-color").value;this.colorFillStyle(t,i[0],i[1],i[2],n)}},gradientStrokeStyle:function(t,e,n,r){var i=this.createGradientStyleFor(t,"line",e,n,r);if(!i)return null;t.strokeStyle=i},colorStrokeStyle:function(t,e,n,r,i){t.strokeStyle="rgba("+e+","+n+","+r+","+i+")"},eleStrokeStyle:function(t,e,n){var r=e.pstyle("line-fill").value;if("linear-gradient"===r||"radial-gradient"===r)this.gradientStrokeStyle(t,e,r,n);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(t,i[0],i[1],i[2],n)}},matchCanvasSize:function(t){var e=this,n=e.data,r=e.findContainerClientCoords(),i=r[2],a=r[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]&&t!==e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG]||(o=s);var u,l=i*o,h=a*o;if(l!==e.canvasWidth||h!==e.canvasHeight){e.fontCaches=null;var c=n.canvasContainer;c.style.width=i+"px",c.style.height=a+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)(u=n.canvases[d]).width=l,u.height=h,u.style.width=i+"px",u.style.height=a+"px";for(d=0;d<e.BUFFER_COUNT;d++)(u=n.bufferCanvases[d]).width=l,u.height=h,u.style.width=i+"px",u.style.height=a+"px";e.textureMult=1,o<=1&&(u=n.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,u.width=l*e.textureMult,u.height=h*e.textureMult),e.canvasWidth=l,e.canvasHeight=h}},renderTo:function(t,e,n,r){this.render({forcedContext:t,forcedZoom:e,forcedPan:n,drawAllLayers:!0,forcedPxRatio:r})},render:function(t){var e=(t=t||_t()).forcedContext,n=t.drawAllLayers,r=t.drawOnlyNodeLayer,i=t.forcedZoom,a=t.forcedPan,o=this,s=void 0===t.forcedPxRatio?this.getPixelRatio():t.forcedPxRatio,u=o.cy,l=o.data,h=l.canvasNeedsRedraw,c=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),d=void 0!==t.motionBlur?t.motionBlur:o.motionBlur,f=o.motionBlurPxRatio,p=u.hasCompoundNodes(),v=o.hoverData.draggingEles,g=!(!o.hoverData.selecting&&!o.touchData.selecting),y=d=d&&!e&&o.motionBlurEnabled&&!g;e||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),d&&(null==o.mbFrames&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(y=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!c&&(h[o.NODE]=!0,h[o.SELECT_BOX]=!0);var m=u.style(),b=u.zoom(),x=void 0!==i?i:b,w=u.pan(),_={x:w.x,y:w.y},M={zoom:b,pan:{x:w.x,y:w.y}},E=o.prevViewport;void 0===E||M.zoom!==E.zoom||M.pan.x!==E.pan.x||M.pan.y!==E.pan.y||v&&!p||(o.motionBlurPxRatio=1),a&&(_=a),x*=s,_.x*=s,_.y*=s;var k=o.getCachedZSortedEles();function C(t,e,n,r,i){var a=t.globalCompositeOperation;t.globalCompositeOperation="destination-out",o.colorFillStyle(t,255,255,255,o.motionBlurTransparency),t.fillRect(e,n,r,i),t.globalCompositeOperation=a}function S(t,r){var s,u,h,c;o.clearingMotionBlur||t!==l.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]&&t!==l.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]?(s=_,u=x,h=o.canvasWidth,c=o.canvasHeight):(s={x:w.x*f,y:w.y*f},u=b*f,h=o.canvasWidth*f,c=o.canvasHeight*f),t.setTransform(1,0,0,1,0,0),"motionBlur"===r?C(t,0,0,h,c):e||void 0!==r&&!r||t.clearRect(0,0,h,c),n||(t.translate(s.x,s.y),t.scale(u,u)),a&&t.translate(a.x,a.y),i&&t.scale(i,i)}if(c||(o.textureDrawLastFrame=!1),c){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=u.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var P=o.data.bufferContexts[o.TEXTURE_BUFFER];P.setTransform(1,0,0,1,0,0),P.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:P,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult}),(M=o.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:o.canvasWidth,height:o.canvasHeight}).mpan={x:(0-M.pan.x)/M.zoom,y:(0-M.pan.y)/M.zoom}}h[o.DRAG]=!1,h[o.NODE]=!1;var T=l.contexts[o.NODE],D=o.textureCache.texture;M=o.textureCache.viewport,T.setTransform(1,0,0,1,0,0),d?C(T,0,0,M.width,M.height):T.clearRect(0,0,M.width,M.height);var I=m.core("outside-texture-bg-color").value,B=m.core("outside-texture-bg-opacity").value;o.colorFillStyle(T,I[0],I[1],I[2],B),T.fillRect(0,0,M.width,M.height),b=u.zoom(),S(T,!1),T.clearRect(M.mpan.x,M.mpan.y,M.width/M.zoom/s,M.height/M.zoom/s),T.drawImage(D,M.mpan.x,M.mpan.y,M.width/M.zoom/s,M.height/M.zoom/s)}else o.textureOnViewport&&!e&&(o.textureCache=null);var N=u.extent(),O=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),A=o.hideEdgesOnViewport&&O,z=[];if(z[o.NODE]=!h[o.NODE]&&d&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,z[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),z[o.DRAG]=!h[o.DRAG]&&d&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,z[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),h[o.NODE]||n||r||z[o.NODE]){var L=d&&!z[o.NODE]&&1!==f;S(T=e||(L?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:l.contexts[o.NODE]),d&&!L?"motionBlur":void 0),A?o.drawCachedNodes(T,k.nondrag,s,N):o.drawLayeredElements(T,k.nondrag,s,N),o.debug&&o.drawDebugPoints(T,k.nondrag),n||d||(h[o.NODE]=!1)}if(!r&&(h[o.DRAG]||n||z[o.DRAG])&&(L=d&&!z[o.DRAG]&&1!==f,S(T=e||(L?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:l.contexts[o.DRAG]),d&&!L?"motionBlur":void 0),A?o.drawCachedNodes(T,k.drag,s,N):o.drawCachedElements(T,k.drag,s,N),o.debug&&o.drawDebugPoints(T,k.drag),n||d||(h[o.DRAG]=!1)),o.showFps||!r&&h[o.SELECT_BOX]&&!n){if(S(T=e||l.contexts[o.SELECT_BOX]),1==o.selection[4]&&(o.hoverData.selecting||o.touchData.selecting)){b=o.cy.zoom();var R=m.core("selection-box-border-width").value/b;T.lineWidth=R,T.fillStyle="rgba("+m.core("selection-box-color").value[0]+","+m.core("selection-box-color").value[1]+","+m.core("selection-box-color").value[2]+","+m.core("selection-box-opacity").value+")",T.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),R>0&&(T.strokeStyle="rgba("+m.core("selection-box-border-color").value[0]+","+m.core("selection-box-border-color").value[1]+","+m.core("selection-box-border-color").value[2]+","+m.core("selection-box-opacity").value+")",T.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(l.bgActivePosistion&&!o.hoverData.selecting){b=o.cy.zoom();var j=l.bgActivePosistion;T.fillStyle="rgba("+m.core("active-bg-color").value[0]+","+m.core("active-bg-color").value[1]+","+m.core("active-bg-color").value[2]+","+m.core("active-bg-opacity").value+")",T.beginPath(),T.arc(j.x,j.y,m.core("active-bg-size").pfValue/b,0,2*Math.PI),T.fill()}var q=o.lastRedrawTime;if(o.showFps&&q){q=Math.round(q);var F=Math.round(1e3/q);T.setTransform(1,0,0,1,0,0),T.fillStyle="rgba(255, 0, 0, 0.75)",T.strokeStyle="rgba(255, 0, 0, 0.75)",T.lineWidth=1,T.fillText("1 frame = "+q+" ms = "+F+" fps",0,20),T.strokeRect(0,30,250,20),T.fillRect(0,30,250*Math.min(F/60,1),20)}n||(h[o.SELECT_BOX]=!1)}if(d&&1!==f){var V=l.contexts[o.NODE],W=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],G=l.contexts[o.DRAG],X=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],Y=function(t,e,n){t.setTransform(1,0,0,1,0,0),n||!y?t.clearRect(0,0,o.canvasWidth,o.canvasHeight):C(t,0,0,o.canvasWidth,o.canvasHeight);var r=f;t.drawImage(e,0,0,o.canvasWidth*r,o.canvasHeight*r,0,0,o.canvasWidth,o.canvasHeight)};(h[o.NODE]||z[o.NODE])&&(Y(V,W,z[o.NODE]),h[o.NODE]=!1),(h[o.DRAG]||z[o.DRAG])&&(Y(G,X,z[o.DRAG]),h[o.DRAG]=!1)}o.prevViewport=M,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),d&&(o.motionBlurTimeout=setTimeout((function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!c,o.mbFrames=0,h[o.NODE]=!0,h[o.DRAG]=!0,o.redraw()}),100)),e||u.emit("render")}},xs={drawPolygonPath:function(t,e,n,r,i,a){var o=r/2,s=i/2;t.beginPath&&t.beginPath(),t.moveTo(e+o*a[0],n+s*a[1]);for(var u=1;u<a.length/2;u++)t.lineTo(e+o*a[2*u],n+s*a[2*u+1]);t.closePath()},drawRoundPolygonPath:function(t,e,n,r,i,a){var o=r/2,s=i/2,u=Ne(r,i);t.beginPath&&t.beginPath();for(var l=0;l<a.length/4;l++){var h,c;c=0===l?a.length-2:4*l-2,h=4*l+2;var d=e+o*a[4*l],f=n+s*a[4*l+1],p=-a[c]*a[h]-a[c+1]*a[h+1],v=u/Math.tan(Math.acos(p)/2),g=d-v*a[c],y=f-v*a[c+1],m=d+v*a[h],b=f+v*a[h+1];0===l?t.moveTo(g,y):t.lineTo(g,y),t.arcTo(d,f,m,b,u)}t.closePath()},drawRoundRectanglePath:function(t,e,n,r,i){var a=r/2,o=i/2,s=Be(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-o),t.arcTo(e+a,n-o,e+a,n,s),t.arcTo(e+a,n+o,e,n+o,s),t.arcTo(e-a,n+o,e-a,n,s),t.arcTo(e-a,n-o,e,n-o,s),t.lineTo(e,n-o),t.closePath()},drawBottomRoundRectanglePath:function(t,e,n,r,i){var a=r/2,o=i/2,s=Be(r,i);t.beginPath&&t.beginPath(),t.moveTo(e,n-o),t.lineTo(e+a,n-o),t.lineTo(e+a,n),t.arcTo(e+a,n+o,e,n+o,s),t.arcTo(e-a,n+o,e-a,n,s),t.lineTo(e-a,n-o),t.lineTo(e,n-o),t.closePath()},drawCutRectanglePath:function(t,e,n,r,i){var a=r/2,o=i/2;t.beginPath&&t.beginPath(),t.moveTo(e-a+8,n-o),t.lineTo(e+a-8,n-o),t.lineTo(e+a,n-o+8),t.lineTo(e+a,n+o-8),t.lineTo(e+a-8,n+o),t.lineTo(e-a+8,n+o),t.lineTo(e-a,n+o-8),t.lineTo(e-a,n-o+8),t.closePath()},drawBarrelPath:function(t,e,n,r,i){var a=r/2,o=i/2,s=e-a,u=e+a,l=n-o,h=n+o,c=Oe(r,i),d=c.widthOffset,f=c.heightOffset,p=c.ctrlPtOffsetPct*d;t.beginPath&&t.beginPath(),t.moveTo(s,l+f),t.lineTo(s,h-f),t.quadraticCurveTo(s+p,h,s+d,h),t.lineTo(u-d,h),t.quadraticCurveTo(u-p,h,u,h-f),t.lineTo(u,l+f),t.quadraticCurveTo(u-p,l,u-d,l),t.lineTo(s+d,l),t.quadraticCurveTo(s+p,l,s,l+f),t.closePath()}},ws=Math.sin(0),_s=Math.cos(0),Ms={},Es={},ks=Math.PI/40,Cs=0*Math.PI;Cs<2*Math.PI;Cs+=ks)Ms[Cs]=Math.sin(Cs),Es[Cs]=Math.cos(Cs);xs.drawEllipsePath=function(t,e,n,r,i){if(t.beginPath&&t.beginPath(),t.ellipse)t.ellipse(e,n,r/2,i/2,0,0,2*Math.PI);else for(var a,o,s=r/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=ks)a=e-s*Ms[l]*ws+s*Es[l]*_s,o=n+u*Es[l]*ws+u*Ms[l]*_s,0===l?t.moveTo(a,o):t.lineTo(a,o);t.closePath()};var Ss={};function Ps(t){var e=t.indexOf(",");return t.substr(e+1)}function Ts(t,e,n){var r=function(){return e.toDataURL(n,t.quality)};switch(t.output){case"blob-promise":return new Yn((function(r,i){try{e.toBlob((function(t){null!=t?r(t):i(new Error("`canvas.toBlob()` sent a null value in its callback"))}),n,t.quality)}catch(t){i(t)}}));case"blob":return function(t,e){for(var n=atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return new Blob([r],{type:e})}(Ps(r()),n);case"base64":return Ps(r());default:return r()}}Ss.createBuffer=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,[n,n.getContext("2d")]},Ss.bufferCanvasImage=function(t){var e=this.cy,n=e.mutableElements().boundingBox(),r=this.findContainerClientCoords(),i=t.full?Math.ceil(n.w):r[2],a=t.full?Math.ceil(n.h):r[3],o=M(t.maxWidth)||M(t.maxHeight),s=this.getPixelRatio(),u=1;if(void 0!==t.scale)i*=t.scale,a*=t.scale,u=t.scale;else if(o){var l=1/0,h=1/0;M(t.maxWidth)&&(l=u*t.maxWidth/i),M(t.maxHeight)&&(h=u*t.maxHeight/a),i*=u=Math.min(l,h),a*=u}o||(i*=s,a*=s,u*=s);var c=document.createElement("canvas");c.width=i,c.height=a,c.style.width=i+"px",c.style.height=a+"px";var d=c.getContext("2d");if(i>0&&a>0){d.clearRect(0,0,i,a),d.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(t.full)d.translate(-n.x1*u,-n.y1*u),d.scale(u,u),this.drawElements(d,f),d.scale(1/u,1/u),d.translate(n.x1*u,n.y1*u);else{var p=e.pan(),v={x:p.x*u,y:p.y*u};u*=e.zoom(),d.translate(v.x,v.y),d.scale(u,u),this.drawElements(d,f),d.scale(1/u,1/u),d.translate(-v.x,-v.y)}t.bg&&(d.globalCompositeOperation="destination-over",d.fillStyle=t.bg,d.rect(0,0,i,a),d.fill())}return c},Ss.png=function(t){return Ts(t,this.bufferCanvasImage(t),"image/png")},Ss.jpg=function(t){return Ts(t,this.bufferCanvasImage(t),"image/jpeg")};var Ds=Bs,Is=Bs.prototype;function Bs(t){var e=this;e.data={canvases:new Array(Is.CANVAS_LAYERS),contexts:new Array(Is.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Is.CANVAS_LAYERS),bufferCanvases:new Array(Is.BUFFER_COUNT),bufferContexts:new Array(Is.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",r="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var i=e.data.canvasContainer.style;e.data.canvasContainer.style[n]=r,i.position="relative",i.zIndex="0",i.overflow="hidden";var a=t.cy.container();a.appendChild(e.data.canvasContainer),a.style[n]=r;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};f&&f.userAgent.match(/msie|trident|edge/i)&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<Is.CANVAS_LAYERS;s++){var u=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=u.getContext("2d"),Object.keys(o).forEach((function(t){u.style[t]=o[t]})),u.style.position="absolute",u.setAttribute("data-id","layer"+s),u.style.zIndex=String(Is.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(u),e.data.canvasNeedsRedraw[s]=!1}for(e.data.topCanvas=e.data.canvases[0],e.data.canvases[Is.NODE].setAttribute("data-id","layer"+Is.NODE+"-node"),e.data.canvases[Is.SELECT_BOX].setAttribute("data-id","layer"+Is.SELECT_BOX+"-selectbox"),e.data.canvases[Is.DRAG].setAttribute("data-id","layer"+Is.DRAG+"-drag"),s=0;s<Is.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var l=ae(),h=function(t){return{x:-t.w/2,y:-t.h/2}},c=function(t){return t.boundingBox(),t[0]._private.bodyBounds},d=function(t){return t.boundingBox(),t[0]._private.labelBounds.main||l},p=function(t){return t.boundingBox(),t[0]._private.labelBounds.source||l},v=function(t){return t.boundingBox(),t[0]._private.labelBounds.target||l},g=function(t,e){return e},y=function(t,e,n){var r=t?t+"-":"";return{x:e.x+n.pstyle(r+"text-margin-x").pfValue,y:e.y+n.pstyle(r+"text-margin-y").pfValue}},m=function(t,e,n){var r=t[0]._private.rscratch;return{x:r[e],y:r[n]}},b=e.data.eleTxrCache=new Zo(e,{getKey:function(t){return t[0]._private.nodeKey},doesEleInvalidateKey:function(t){var e=t[0]._private;return!(e.oldBackgroundTimestamp===e.backgroundTimestamp)},drawElement:function(t,n,r,i,a){return e.drawElement(t,n,r,!1,!1,a)},getBoundingBox:c,getRotationPoint:function(t){return{x:((e=c(t)).x1+e.x2)/2,y:(e.y1+e.y2)/2};var e},getRotationOffset:function(t){return h(c(t))},allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),x=e.data.lblTxrCache=new Zo(e,{getKey:function(t){return t[0]._private.labelStyleKey},drawElement:function(t,n,r,i,a){return e.drawElementText(t,n,r,i,"main",a)},getBoundingBox:d,getRotationPoint:function(t){return y("",m(t,"labelX","labelY"),t)},getRotationOffset:function(t){var e=d(t),n=h(d(t));if(t.isNode()){switch(t.pstyle("text-halign").value){case"left":n.x=-e.w;break;case"right":n.x=0}switch(t.pstyle("text-valign").value){case"top":n.y=-e.h;break;case"bottom":n.y=0}}return n},isVisible:g}),w=e.data.slbTxrCache=new Zo(e,{getKey:function(t){return t[0]._private.sourceLabelStyleKey},drawElement:function(t,n,r,i,a){return e.drawElementText(t,n,r,i,"source",a)},getBoundingBox:p,getRotationPoint:function(t){return y("source",m(t,"sourceLabelX","sourceLabelY"),t)},getRotationOffset:function(t){return h(p(t))},isVisible:g}),_=e.data.tlbTxrCache=new Zo(e,{getKey:function(t){return t[0]._private.targetLabelStyleKey},drawElement:function(t,n,r,i,a){return e.drawElementText(t,n,r,i,"target",a)},getBoundingBox:v,getRotationPoint:function(t){return y("target",m(t,"targetLabelX","targetLabelY"),t)},getRotationOffset:function(t){return h(v(t))},isVisible:g}),M=e.data.lyrTxrCache=new $o(e);e.onUpdateEleCalcs((function(t,e){b.invalidateElements(e),x.invalidateElements(e),w.invalidateElements(e),_.invalidateElements(e),M.invalidateElements(e);for(var n=0;n<e.length;n++){var r=e[n]._private;r.oldBackgroundTimestamp=r.backgroundTimestamp}}));var E=function(t){for(var e=0;e<t.length;e++)M.enqueueElementRefinement(t[e].ele)};b.onDequeue(E),x.onDequeue(E),w.onDequeue(E),_.onDequeue(E)}Is.CANVAS_LAYERS=3,Is.SELECT_BOX=0,Is.DRAG=1,Is.NODE=2,Is.BUFFER_COUNT=3,Is.TEXTURE_BUFFER=0,Is.MOTIONBLUR_BUFFER_NODE=1,Is.MOTIONBLUR_BUFFER_DRAG=2,Is.redrawHint=function(t,e){var n=this;switch(t){case"eles":n.data.canvasNeedsRedraw[Is.NODE]=e;break;case"drag":n.data.canvasNeedsRedraw[Is.DRAG]=e;break;case"select":n.data.canvasNeedsRedraw[Is.SELECT_BOX]=e}};var Ns="undefined"!=typeof Path2D;Is.path2dEnabled=function(t){if(void 0===t)return this.pathsEnabled;this.pathsEnabled=!!t},Is.usePaths=function(){return Ns&&this.pathsEnabled},Is.setImgSmoothing=function(t,e){null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled=e:(t.webkitImageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e)},Is.getImgSmoothing=function(t){return null!=t.imageSmoothingEnabled?t.imageSmoothingEnabled:t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled},Is.makeOffscreenCanvas=function(t,e){var n;return"undefined"!==("undefined"==typeof OffscreenCanvas?"undefined":o(OffscreenCanvas))?n=new OffscreenCanvas(t,e):((n=document.createElement("canvas")).width=t,n.height=e),n},[ns,us,vs,gs,ys,ms,bs,xs,Ss,{nodeShapeImpl:function(t,e,n,r,i,a,o){switch(t){case"ellipse":return this.drawEllipsePath(e,n,r,i,a);case"polygon":return this.drawPolygonPath(e,n,r,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(e,n,r,i,a,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,n,r,i,a);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,n,r,i,a);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,n,r,i,a);case"barrel":return this.drawBarrelPath(e,n,r,i,a)}}}].forEach((function(t){W(Is,t)}));var Os=[{type:"layout",extensions:mo},{type:"renderer",extensions:[{name:"null",impl:bo},{name:"base",impl:Vo},{name:"canvas",impl:Ds}]}],As={},zs={};function Ls(t,e,n){var r=n,i=function(n){gt("Can not register `"+e+"` for `"+t+"` since `"+n+"` already exists in the prototype and can not be overridden")};if("core"===t){if(Ia.prototype[e])return i(e);Ia.prototype[e]=n}else if("collection"===t){if(Ui.prototype[e])return i(e);Ui.prototype[e]=n}else if("layout"===t){for(var a=function(t){this.options=t,n.call(this,t),_(this._private)||(this._private={}),this._private.cy=t.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(n.prototype),s=[],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var h=n.prototype.stop;o.stop=function(){var t=this.options;if(t&&t.animate){var e=this.animations;if(e)for(var n=0;n<e.length;n++)e[n].stop()}return h?h.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var c=function(t){return t._private.cy},d={addEventFields:function(t,e){e.layout=t,e.cy=c(t),e.target=t},bubble:function(){return!0},parent:function(t){return c(t)}};W(o,{createEmitter:function(){return this._private.emitter=new ci(d,this),this},emitter:function(){return this._private.emitter},on:function(t,e){return this.emitter().on(t,e),this},one:function(t,e){return this.emitter().one(t,e),this},once:function(t,e){return this.emitter().one(t,e),this},removeListener:function(t,e){return this.emitter().removeListener(t,e),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(t,e){return this.emitter().emit(t,e),this}}),Qn.eventAliasesOn(o),r=a}else if("renderer"===t&&"null"!==e&&"base"!==e){var f=Rs("renderer","base"),p=f.prototype,v=n,g=n.prototype,y=function(){f.apply(this,arguments),v.apply(this,arguments)},m=y.prototype;for(var b in p){var x=p[b];if(null!=g[b])return i(b);m[b]=x}for(var w in g)m[w]=g[w];p.clientFunctions.forEach((function(t){m[t]=m[t]||function(){gt("Renderer does not implement `renderer."+t+"()` on its prototype")}})),r=y}return X({map:As,keys:[t,e],value:r})}function Rs(t,e){return Y({map:As,keys:[t,e]})}function js(t,e,n,r,i){return X({map:zs,keys:[t,e,n,r],value:i})}function qs(t,e,n,r){return Y({map:zs,keys:[t,e,n,r]})}var Fs=function(){return 2===arguments.length?Rs.apply(null,arguments):3===arguments.length?Ls.apply(null,arguments):4===arguments.length?qs.apply(null,arguments):5===arguments.length?js.apply(null,arguments):void gt("Invalid extension access syntax")};Ia.prototype.extension=Fs,Os.forEach((function(t){t.extensions.forEach((function(e){Ls(t.type,e.name,e.impl)}))}));var Vs=function t(){if(!(this instanceof t))return new t;this.length=0},Ws=Vs.prototype;Ws.instanceString=function(){return"stylesheet"},Ws.selector=function(t){return this[this.length++]={selector:t,properties:[]},this},Ws.css=function(t,e){var n=this.length-1;if(b(t))this[n].properties.push({name:t,value:e});else if(_(t))for(var r=t,i=Object.keys(r),a=0;a<i.length;a++){var o=i[a],s=r[o];if(null!=s){var u=Ca.properties[o]||Ca.properties[O(o)];if(null!=u){var l=u.name,h=s;this[n].properties.push({name:l,value:h})}}}return this},Ws.style=Ws.css,Ws.generateStyle=function(t){var e=new Ca(t);return this.appendToStyle(e)},Ws.appendToStyle=function(t){for(var e=0;e<this.length;e++){var n=this[e],r=n.selector,i=n.properties;t.selector(r);for(var a=0;a<i.length;a++){var o=i[a];t.css(o.name,o.value)}}return t};var Gs=function(t){return void 0===t&&(t={}),_(t)?new Ia(t):b(t)?Fs.apply(Fs,arguments):void 0};Gs.use=function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Gs),t.apply(null,e),this},Gs.warnings=function(t){return yt(t)},Gs.version="3.15.1",Gs.stylesheet=Gs.Stylesheet=Vs,t.exports=Gs},485:(t,e,n)=>{t.exports=n(894)},894:function(t,e){var n,r,i;(function(){var a,o,s,u,l,h,c,d,f,p,v,g,y,m,b;s=Math.floor,p=Math.min,o=function(t,e){return t<e?-1:t>e?1:0},f=function(t,e,n,r,i){var a;if(null==n&&(n=0),null==i&&(i=o),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=t.length);n<r;)i(e,t[a=s((n+r)/2)])<0?r=a:n=a+1;return[].splice.apply(t,[n,n-n].concat(e)),e},h=function(t,e,n){return null==n&&(n=o),t.push(e),m(t,0,t.length-1,n)},l=function(t,e){var n,r;return null==e&&(e=o),n=t.pop(),t.length?(r=t[0],t[0]=n,b(t,0,e)):r=n,r},d=function(t,e,n){var r;return null==n&&(n=o),r=t[0],t[0]=e,b(t,0,n),r},c=function(t,e,n){var r;return null==n&&(n=o),t.length&&n(t[0],e)<0&&(e=(r=[t[0],e])[0],t[0]=r[1],b(t,0,n)),e},u=function(t,e){var n,r,i,a,u,l;for(null==e&&(e=o),u=[],r=0,i=(a=function(){l=[];for(var e=0,n=s(t.length/2);0<=n?e<n:e>n;0<=n?e++:e--)l.push(e);return l}.apply(this).reverse()).length;r<i;r++)n=a[r],u.push(b(t,n,e));return u},y=function(t,e,n){var r;if(null==n&&(n=o),-1!==(r=t.indexOf(e)))return m(t,0,r,n),b(t,r,n)},v=function(t,e,n){var r,i,a,s,l;if(null==n&&(n=o),!(i=t.slice(0,e)).length)return i;for(u(i,n),a=0,s=(l=t.slice(e)).length;a<s;a++)r=l[a],c(i,r,n);return i.sort(n).reverse()},g=function(t,e,n){var r,i,a,s,h,c,d,v,g;if(null==n&&(n=o),10*e<=t.length){if(!(a=t.slice(0,e).sort(n)).length)return a;for(i=a[a.length-1],s=0,c=(d=t.slice(e)).length;s<c;s++)n(r=d[s],i)<0&&(f(a,r,0,null,n),a.pop(),i=a[a.length-1]);return a}for(u(t,n),g=[],h=0,v=p(e,t.length);0<=v?h<v:h>v;0<=v?++h:--h)g.push(l(t,n));return g},m=function(t,e,n,r){var i,a,s;for(null==r&&(r=o),i=t[n];n>e&&r(i,a=t[s=n-1>>1])<0;)t[n]=a,n=s;return t[n]=i},b=function(t,e,n){var r,i,a,s,u;for(null==n&&(n=o),i=t.length,u=e,a=t[e],r=2*e+1;r<i;)(s=r+1)<i&&!(n(t[r],t[s])<0)&&(r=s),t[e]=t[r],r=2*(e=r)+1;return t[e]=a,m(t,u,e,n)},a=function(){function t(t){this.cmp=null!=t?t:o,this.nodes=[]}return t.push=h,t.pop=l,t.replace=d,t.pushpop=c,t.heapify=u,t.updateItem=y,t.nlargest=v,t.nsmallest=g,t.prototype.push=function(t){return h(this.nodes,t,this.cmp)},t.prototype.pop=function(){return l(this.nodes,this.cmp)},t.prototype.peek=function(){return this.nodes[0]},t.prototype.contains=function(t){return-1!==this.nodes.indexOf(t)},t.prototype.replace=function(t){return d(this.nodes,t,this.cmp)},t.prototype.pushpop=function(t){return c(this.nodes,t,this.cmp)},t.prototype.heapify=function(){return u(this.nodes,this.cmp)},t.prototype.updateItem=function(t){return y(this.nodes,t,this.cmp)},t.prototype.clear=function(){return this.nodes=[]},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.size=function(){return this.nodes.length},t.prototype.clone=function(){var e;return(e=new t).nodes=this.nodes.slice(0),e},t.prototype.toArray=function(){return this.nodes.slice(0)},t.prototype.insert=t.prototype.push,t.prototype.top=t.prototype.peek,t.prototype.front=t.prototype.peek,t.prototype.has=t.prototype.contains,t.prototype.copy=t.prototype.clone,t}(),r=[],void 0===(i="function"==typeof(n=function(){return a})?n.apply(e,r):n)||(t.exports=i)}).call(this)},296:(t,e,n)=>{var r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,h=u||l||Function("return this")(),c=Object.prototype.toString,d=Math.max,f=Math.min,p=function(){return h.Date.now()};function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==c.call(t)}(t))return NaN;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var n=a.test(t);return n||o.test(t)?s(t.slice(2),n?2:8):i.test(t)?NaN:+t}t.exports=function(t,e,n){var r,i,a,o,s,u,l=0,h=!1,c=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=r,a=i;return r=i=void 0,l=e,o=t.apply(a,n)}function b(t){var n=t-u;return void 0===u||n>=e||n<0||c&&t-l>=a}function x(){var t=p();if(b(t))return w(t);s=setTimeout(x,function(t){var n=e-(t-u);return c?f(n,a-(t-l)):n}(t))}function w(t){return s=void 0,y&&r?m(t):(r=i=void 0,o)}function _(){var t=p(),n=b(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return function(t){return l=t,s=setTimeout(x,e),h?m(t):o}(u);if(c)return s=setTimeout(x,e),m(u)}return void 0===s&&(s=setTimeout(x,e)),o}return e=g(e)||0,v(n)&&(h=!!n.leading,a=(c="maxWait"in n)?d(g(n.maxWait)||0,e):a,y="trailing"in n?!!n.trailing:y),_.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},_.flush=function(){return void 0===s?o:w(p())},_}},486:function(t,e,n){var r;t=n.nmd(t),function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,h=1/0,c=9007199254740991,d=NaN,f=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],v="[object Arguments]",g="[object Array]",y="[object Boolean]",m="[object Date]",b="[object Error]",x="[object Function]",w="[object GeneratorFunction]",_="[object Map]",M="[object Number]",E="[object Object]",k="[object Promise]",C="[object RegExp]",S="[object Set]",P="[object String]",T="[object Symbol]",D="[object WeakMap]",I="[object ArrayBuffer]",B="[object DataView]",N="[object Float32Array]",O="[object Float64Array]",A="[object Int8Array]",z="[object Int16Array]",L="[object Int32Array]",R="[object Uint8Array]",j="[object Uint8ClampedArray]",q="[object Uint16Array]",F="[object Uint32Array]",V=/\b__p \+= '';/g,W=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,X=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,U=RegExp(X.source),H=RegExp(Y.source),Z=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+/,it=/\s/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,st=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ht=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,vt=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,mt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,wt="\\ud800-\\udfff",_t="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Mt="\\u2700-\\u27bf",Et="a-z\\xdf-\\xf6\\xf8-\\xff",kt="A-Z\\xc0-\\xd6\\xd8-\\xde",Ct="\\ufe0e\\ufe0f",St="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pt="["+wt+"]",Tt="["+St+"]",Dt="["+_t+"]",It="\\d+",Bt="["+Mt+"]",Nt="["+Et+"]",Ot="[^"+wt+St+It+Mt+Et+kt+"]",At="\\ud83c[\\udffb-\\udfff]",zt="[^"+wt+"]",Lt="(?:\\ud83c[\\udde6-\\uddff]){2}",Rt="[\\ud800-\\udbff][\\udc00-\\udfff]",jt="["+kt+"]",qt="\\u200d",Ft="(?:"+Nt+"|"+Ot+")",Vt="(?:"+jt+"|"+Ot+")",Wt="(?:['’](?:d|ll|m|re|s|t|ve))?",Gt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Xt="(?:"+Dt+"|"+At+")?",Yt="["+Ct+"]?",Ut=Yt+Xt+"(?:"+qt+"(?:"+[zt,Lt,Rt].join("|")+")"+Yt+Xt+")*",Ht="(?:"+[Bt,Lt,Rt].join("|")+")"+Ut,Zt="(?:"+[zt+Dt+"?",Dt,Lt,Rt,Pt].join("|")+")",Kt=RegExp("['’]","g"),$t=RegExp(Dt,"g"),Qt=RegExp(At+"(?="+At+")|"+Zt+Ut,"g"),Jt=RegExp([jt+"?"+Nt+"+"+Wt+"(?="+[Tt,jt,"$"].join("|")+")",Vt+"+"+Gt+"(?="+[Tt,jt+Ft,"$"].join("|")+")",jt+"?"+Ft+"+"+Wt,jt+"+"+Gt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",It,Ht].join("|"),"g"),te=RegExp("["+qt+wt+_t+Ct+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ne=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ie={};ie[N]=ie[O]=ie[A]=ie[z]=ie[L]=ie[R]=ie[j]=ie[q]=ie[F]=!0,ie[v]=ie[g]=ie[I]=ie[y]=ie[B]=ie[m]=ie[b]=ie[x]=ie[_]=ie[M]=ie[E]=ie[C]=ie[S]=ie[P]=ie[D]=!1;var ae={};ae[v]=ae[g]=ae[I]=ae[B]=ae[y]=ae[m]=ae[N]=ae[O]=ae[A]=ae[z]=ae[L]=ae[_]=ae[M]=ae[E]=ae[C]=ae[S]=ae[P]=ae[T]=ae[R]=ae[j]=ae[q]=ae[F]=!0,ae[b]=ae[x]=ae[D]=!1;var oe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},se=parseFloat,ue=parseInt,le="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,he="object"==typeof self&&self&&self.Object===Object&&self,ce=le||he||Function("return this")(),de=e&&!e.nodeType&&e,fe=de&&t&&!t.nodeType&&t,pe=fe&&fe.exports===de,ve=pe&&le.process,ge=function(){try{return fe&&fe.require&&fe.require("util").types||ve&&ve.binding&&ve.binding("util")}catch(t){}}(),ye=ge&&ge.isArrayBuffer,me=ge&&ge.isDate,be=ge&&ge.isMap,xe=ge&&ge.isRegExp,we=ge&&ge.isSet,_e=ge&&ge.isTypedArray;function Me(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ee(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}function ke(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Ce(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Se(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}function Te(t,e){return!(null==t||!t.length)&&je(t,e,0)>-1}function De(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Ie(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Be(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Ne(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function Oe(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var ze=We("length");function Le(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Re(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function je(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Re(t,Fe,n)}function qe(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}function Fe(t){return t!=t}function Ve(t,e){var n=null==t?0:t.length;return n?Ye(t,e)/n:d}function We(t){return function(e){return null==e?i:e[t]}}function Ge(t){return function(e){return null==t?i:t[e]}}function Xe(t,e,n,r,i){return i(t,(function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)})),n}function Ye(t,e){for(var n,r=-1,a=t.length;++r<a;){var o=e(t[r]);o!==i&&(n=n===i?o:n+o)}return n}function Ue(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function He(t){return t?t.slice(0,dn(t)+1).replace(rt,""):t}function Ze(t){return function(e){return t(e)}}function Ke(t,e){return Ie(e,(function(e){return t[e]}))}function $e(t,e){return t.has(e)}function Qe(t,e){for(var n=-1,r=t.length;++n<r&&je(e,t[n],0)>-1;);return n}function Je(t,e){for(var n=t.length;n--&&je(e,t[n],0)>-1;);return n}var tn=Ge({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),en=Ge({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nn(t){return"\\"+oe[t]}function rn(t){return te.test(t)}function an(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function on(t,e){return function(n){return t(e(n))}}function sn(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n];o!==e&&o!==s||(t[n]=s,a[i++]=n)}return a}function un(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function hn(t){return rn(t)?function(t){for(var e=Qt.lastIndex=0;Qt.test(t);)++e;return e}(t):ze(t)}function cn(t){return rn(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.split("")}(t)}function dn(t){for(var e=t.length;e--&&it.test(t.charAt(e)););return e}var fn=Ge({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function t(e){var n,r=(e=null==e?ce:pn.defaults(ce.Object(),e,pn.pick(ce,ne))).Array,it=e.Date,wt=e.Error,_t=e.Function,Mt=e.Math,Et=e.Object,kt=e.RegExp,Ct=e.String,St=e.TypeError,Pt=r.prototype,Tt=_t.prototype,Dt=Et.prototype,It=e["__core-js_shared__"],Bt=Tt.toString,Nt=Dt.hasOwnProperty,Ot=0,At=(n=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",zt=Dt.toString,Lt=Bt.call(Et),Rt=ce._,jt=kt("^"+Bt.call(Nt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qt=pe?e.Buffer:i,Ft=e.Symbol,Vt=e.Uint8Array,Wt=qt?qt.allocUnsafe:i,Gt=on(Et.getPrototypeOf,Et),Xt=Et.create,Yt=Dt.propertyIsEnumerable,Ut=Pt.splice,Ht=Ft?Ft.isConcatSpreadable:i,Zt=Ft?Ft.iterator:i,Qt=Ft?Ft.toStringTag:i,te=function(){try{var t=ua(Et,"defineProperty");return t({},"",{}),t}catch(t){}}(),oe=e.clearTimeout!==ce.clearTimeout&&e.clearTimeout,le=it&&it.now!==ce.Date.now&&it.now,he=e.setTimeout!==ce.setTimeout&&e.setTimeout,de=Mt.ceil,fe=Mt.floor,ve=Et.getOwnPropertySymbols,ge=qt?qt.isBuffer:i,ze=e.isFinite,Ge=Pt.join,vn=on(Et.keys,Et),gn=Mt.max,yn=Mt.min,mn=it.now,bn=e.parseInt,xn=Mt.random,wn=Pt.reverse,_n=ua(e,"DataView"),Mn=ua(e,"Map"),En=ua(e,"Promise"),kn=ua(e,"Set"),Cn=ua(e,"WeakMap"),Sn=ua(Et,"create"),Pn=Cn&&new Cn,Tn={},Dn=za(_n),In=za(Mn),Bn=za(En),Nn=za(kn),On=za(Cn),An=Ft?Ft.prototype:i,zn=An?An.valueOf:i,Ln=An?An.toString:i;function Rn(t){if(ts(t)&&!Wo(t)&&!(t instanceof Vn)){if(t instanceof Fn)return t;if(Nt.call(t,"__wrapped__"))return La(t)}return new Fn(t)}var jn=function(){function t(){}return function(e){if(!Jo(e))return{};if(Xt)return Xt(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function qn(){}function Fn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Vn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Xn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Xn;++e<n;)this.add(t[e])}function Un(t){var e=this.__data__=new Gn(t);this.size=e.size}function Hn(t,e){var n=Wo(t),r=!n&&Vo(t),i=!n&&!r&&Uo(t),a=!n&&!r&&!i&&us(t),o=n||r||i||a,s=o?Ue(t.length,Ct):[],u=s.length;for(var l in t)!e&&!Nt.call(t,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||va(l,u))||s.push(l);return s}function Zn(t){var e=t.length;return e?t[Xr(0,e-1)]:i}function Kn(t,e){return Ia(Ci(t),ar(e,0,t.length))}function $n(t){return Ia(Ci(t))}function Qn(t,e,n){(n!==i&&!jo(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Jn(t,e,n){var r=t[e];Nt.call(t,e)&&jo(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(jo(t[n][0],e))return n;return-1}function er(t,e,n,r){return hr(t,(function(t,i,a){e(r,t,n(t),a)})),r}function nr(t,e){return t&&Si(e,Ds(e),t)}function rr(t,e,n){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,a=e.length,o=r(a),s=null==t;++n<a;)o[n]=s?i:ks(t,e[n]);return o}function ar(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function or(t,e,n,r,a,o){var s,u=1&e,l=2&e,h=4&e;if(n&&(s=a?n(t,r,a,o):n(t)),s!==i)return s;if(!Jo(t))return t;var c=Wo(t);if(c){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Nt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Ci(t,s)}else{var d=ca(t),f=d==x||d==w;if(Uo(t))return xi(t,u);if(d==E||d==v||f&&!a){if(s=l||f?{}:fa(t),!u)return l?function(t,e){return Si(t,ha(t),e)}(t,function(t,e){return t&&Si(e,Is(e),t)}(s,t)):function(t,e){return Si(t,la(t),e)}(t,nr(s,t))}else{if(!ae[d])return a?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case I:return wi(t);case y:case m:return new i(+t);case B:return function(t,e){var n=e?wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case N:case O:case A:case z:case L:case R:case j:case q:case F:return _i(t,n);case _:return new i;case M:case P:return new i(t);case C:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case S:return new i;case T:return r=t,zn?Et(zn.call(r)):{}}}(t,d,u)}}o||(o=new Un);var p=o.get(t);if(p)return p;o.set(t,s),as(t)?t.forEach((function(r){s.add(or(r,e,n,r,t,o))})):es(t)&&t.forEach((function(r,i){s.set(i,or(r,e,n,i,t,o))}));var g=c?i:(h?l?ea:ta:l?Is:Ds)(t);return ke(g||t,(function(r,i){g&&(r=t[i=r]),Jn(s,i,or(r,e,n,i,t,o))})),s}function sr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Et(t);r--;){var a=n[r],o=e[a],s=t[a];if(s===i&&!(a in t)||!o(s))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new St(a);return Sa((function(){t.apply(i,n)}),e)}function lr(t,e,n,r){var i=-1,a=Te,o=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=Ie(e,Ze(n))),r?(a=De,o=!1):e.length>=200&&(a=$e,o=!1,e=new Yn(e));t:for(;++i<s;){var h=t[i],c=null==n?h:n(h);if(h=r||0!==h?h:0,o&&c==c){for(var d=l;d--;)if(e[d]===c)continue t;u.push(h)}else a(e,c,r)||u.push(h)}return u}Rn.templateSettings={escape:Z,evaluate:K,interpolate:$,variable:"",imports:{_:Rn}},Rn.prototype=qn.prototype,Rn.prototype.constructor=Rn,Fn.prototype=jn(qn.prototype),Fn.prototype.constructor=Fn,Vn.prototype=jn(qn.prototype),Vn.prototype.constructor=Vn,Wn.prototype.clear=function(){this.__data__=Sn?Sn(null):{},this.size=0},Wn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Wn.prototype.get=function(t){var e=this.__data__;if(Sn){var n=e[t];return n===o?i:n}return Nt.call(e,t)?e[t]:i},Wn.prototype.has=function(t){var e=this.__data__;return Sn?e[t]!==i:Nt.call(e,t)},Wn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Sn&&e===i?o:e,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():Ut.call(e,n,1),--this.size,0))},Gn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},Gn.prototype.has=function(t){return tr(this.__data__,t)>-1},Gn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Xn.prototype.clear=function(){this.size=0,this.__data__={hash:new Wn,map:new(Mn||Gn),string:new Wn}},Xn.prototype.delete=function(t){var e=oa(this,t).delete(t);return this.size-=e?1:0,e},Xn.prototype.get=function(t){return oa(this,t).get(t)},Xn.prototype.has=function(t){return oa(this,t).has(t)},Xn.prototype.set=function(t,e){var n=oa(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(t){return this.__data__.set(t,o),this},Yn.prototype.has=function(t){return this.__data__.has(t)},Un.prototype.clear=function(){this.__data__=new Gn,this.size=0},Un.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Un.prototype.get=function(t){return this.__data__.get(t)},Un.prototype.has=function(t){return this.__data__.has(t)},Un.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!Mn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Xn(r)}return n.set(t,e),this.size=n.size,this};var hr=Di(mr),cr=Di(br,!0);function dr(t,e){var n=!0;return hr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function fr(t,e,n){for(var r=-1,a=t.length;++r<a;){var o=t[r],s=e(o);if(null!=s&&(u===i?s==s&&!ss(s):n(s,u)))var u=s,l=o}return l}function pr(t,e){var n=[];return hr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function vr(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=pa),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?vr(s,e-1,n,r,i):Be(i,s):r||(i[i.length]=s)}return i}var gr=Ii(),yr=Ii(!0);function mr(t,e){return t&&gr(t,e,Ds)}function br(t,e){return t&&yr(t,e,Ds)}function xr(t,e){return Pe(e,(function(e){return Ko(t[e])}))}function wr(t,e){for(var n=0,r=(e=gi(e,t)).length;null!=t&&n<r;)t=t[Aa(e[n++])];return n&&n==r?t:i}function _r(t,e,n){var r=e(t);return Wo(t)?r:Be(r,n(t))}function Mr(t){return null==t?t===i?"[object Undefined]":"[object Null]":Qt&&Qt in Et(t)?function(t){var e=Nt.call(t,Qt),n=t[Qt];try{t[Qt]=i;var r=!0}catch(t){}var a=zt.call(t);return r&&(e?t[Qt]=n:delete t[Qt]),a}(t):function(t){return zt.call(t)}(t)}function Er(t,e){return t>e}function kr(t,e){return null!=t&&Nt.call(t,e)}function Cr(t,e){return null!=t&&e in Et(t)}function Sr(t,e,n){for(var a=n?De:Te,o=t[0].length,s=t.length,u=s,l=r(s),h=1/0,c=[];u--;){var d=t[u];u&&e&&(d=Ie(d,Ze(e))),h=yn(d.length,h),l[u]=!n&&(e||o>=120&&d.length>=120)?new Yn(u&&d):i}d=t[0];var f=-1,p=l[0];t:for(;++f<o&&c.length<h;){var v=d[f],g=e?e(v):v;if(v=n||0!==v?v:0,!(p?$e(p,g):a(c,g,n))){for(u=s;--u;){var y=l[u];if(!(y?$e(y,g):a(t[u],g,n)))continue t}p&&p.push(g),c.push(v)}}return c}function Pr(t,e,n){var r=null==(t=Ea(t,e=gi(e,t)))?t:t[Aa(Ha(e))];return null==r?i:Me(r,t,n)}function Tr(t){return ts(t)&&Mr(t)==v}function Dr(t,e,n,r,a){return t===e||(null==t||null==e||!ts(t)&&!ts(e)?t!=t&&e!=e:function(t,e,n,r,a,o){var s=Wo(t),u=Wo(e),l=s?g:ca(t),h=u?g:ca(e),c=(l=l==v?E:l)==E,d=(h=h==v?E:h)==E,f=l==h;if(f&&Uo(t)){if(!Uo(e))return!1;s=!0,c=!1}if(f&&!c)return o||(o=new Un),s||us(t)?Qi(t,e,n,r,a,o):function(t,e,n,r,i,a,o){switch(n){case B:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case I:return!(t.byteLength!=e.byteLength||!a(new Vt(t),new Vt(e)));case y:case m:case M:return jo(+t,+e);case b:return t.name==e.name&&t.message==e.message;case C:case P:return t==e+"";case _:var s=an;case S:var u=1&r;if(s||(s=un),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;r|=2,o.set(t,e);var h=Qi(s(t),s(e),r,i,a,o);return o.delete(t),h;case T:if(zn)return zn.call(t)==zn.call(e)}return!1}(t,e,l,n,r,a,o);if(!(1&n)){var p=c&&Nt.call(t,"__wrapped__"),x=d&&Nt.call(e,"__wrapped__");if(p||x){var w=p?t.value():t,k=x?e.value():e;return o||(o=new Un),a(w,k,n,r,o)}}return!!f&&(o||(o=new Un),function(t,e,n,r,a,o){var s=1&n,u=ta(t),l=u.length;if(l!=ta(e).length&&!s)return!1;for(var h=l;h--;){var c=u[h];if(!(s?c in e:Nt.call(e,c)))return!1}var d=o.get(t),f=o.get(e);if(d&&f)return d==e&&f==t;var p=!0;o.set(t,e),o.set(e,t);for(var v=s;++h<l;){var g=t[c=u[h]],y=e[c];if(r)var m=s?r(y,g,c,e,t,o):r(g,y,c,t,e,o);if(!(m===i?g===y||a(g,y,n,r,o):m)){p=!1;break}v||(v="constructor"==c)}if(p&&!v){var b=t.constructor,x=e.constructor;b==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,n,r,a,o))}(t,e,n,r,Dr,a))}function Ir(t,e,n,r){var a=n.length,o=a,s=!r;if(null==t)return!o;for(t=Et(t);a--;){var u=n[a];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++a<o;){var l=(u=n[a])[0],h=t[l],c=u[1];if(s&&u[2]){if(h===i&&!(l in t))return!1}else{var d=new Un;if(r)var f=r(h,c,l,t,e,d);if(!(f===i?Dr(c,h,3,r,d):f))return!1}}return!0}function Br(t){return!(!Jo(t)||(e=t,At&&At in e))&&(Ko(t)?jt:vt).test(za(t));var e}function Nr(t){return"function"==typeof t?t:null==t?nu:"object"==typeof t?Wo(t)?Rr(t[0],t[1]):Lr(t):cu(t)}function Or(t){if(!xa(t))return vn(t);var e=[];for(var n in Et(t))Nt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ar(t,e){return t<e}function zr(t,e){var n=-1,i=Xo(t)?r(t.length):[];return hr(t,(function(t,r,a){i[++n]=e(t,r,a)})),i}function Lr(t){var e=sa(t);return 1==e.length&&e[0][2]?_a(e[0][0],e[0][1]):function(n){return n===t||Ir(n,t,e)}}function Rr(t,e){return ya(t)&&wa(e)?_a(Aa(t),e):function(n){var r=ks(n,t);return r===i&&r===e?Cs(n,t):Dr(e,r,3)}}function jr(t,e,n,r,a){t!==e&&gr(e,(function(o,s){if(a||(a=new Un),Jo(o))!function(t,e,n,r,a,o,s){var u=ka(t,n),l=ka(e,n),h=s.get(l);if(h)Qn(t,n,h);else{var c=o?o(u,l,n+"",t,e,s):i,d=c===i;if(d){var f=Wo(l),p=!f&&Uo(l),v=!f&&!p&&us(l);c=l,f||p||v?Wo(u)?c=u:Yo(u)?c=Ci(u):p?(d=!1,c=xi(l,!0)):v?(d=!1,c=_i(l,!0)):c=[]:rs(l)||Vo(l)?(c=u,Vo(u)?c=gs(u):Jo(u)&&!Ko(u)||(c=fa(l))):d=!1}d&&(s.set(l,c),a(c,l,r,o,s),s.delete(l)),Qn(t,n,c)}}(t,e,s,n,jr,r,a);else{var u=r?r(ka(t,s),o,s+"",t,e,a):i;u===i&&(u=o),Qn(t,s,u)}}),Is)}function qr(t,e){var n=t.length;if(n)return va(e+=e<0?n:0,n)?t[e]:i}function Fr(t,e,n){e=e.length?Ie(e,(function(t){return Wo(t)?function(e){return wr(e,1===t.length?t[0]:t)}:t})):[nu];var r=-1;e=Ie(e,Ze(aa()));var i=zr(t,(function(t,n,i){var a=Ie(e,(function(e){return e(t)}));return{criteria:a,index:++r,value:t}}));return function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var u=Mi(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(i)}function Vr(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var o=e[r],s=wr(t,o);n(s,o)&&Kr(a,gi(o,t),s)}return a}function Wr(t,e,n,r){var i=r?qe:je,a=-1,o=e.length,s=t;for(t===e&&(e=Ci(e)),n&&(s=Ie(t,Ze(n)));++a<o;)for(var u=0,l=e[a],h=n?n(l):l;(u=i(s,h,u,r))>-1;)s!==t&&Ut.call(s,u,1),Ut.call(t,u,1);return t}function Gr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;va(i)?Ut.call(t,i,1):ui(t,i)}}return t}function Xr(t,e){return t+fe(xn()*(e-t+1))}function Yr(t,e){var n="";if(!t||e<1||e>c)return n;do{e%2&&(n+=t),(e=fe(e/2))&&(t+=t)}while(e);return n}function Ur(t,e){return Pa(Ma(t,e,nu),t+"")}function Hr(t){return Zn(js(t))}function Zr(t,e){var n=js(t);return Ia(n,ar(e,0,n.length))}function Kr(t,e,n,r){if(!Jo(t))return t;for(var a=-1,o=(e=gi(e,t)).length,s=o-1,u=t;null!=u&&++a<o;){var l=Aa(e[a]),h=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(a!=s){var c=u[l];(h=r?r(c,l,u):i)===i&&(h=Jo(c)?c:va(e[a+1])?[]:{})}Jn(u,l,h),u=u[l]}return t}var $r=Pn?function(t,e){return Pn.set(t,e),t}:nu,Qr=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Js(e),writable:!0})}:nu;function Jr(t){return Ia(js(t))}function ti(t,e,n){var i=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(n=n>a?a:n)<0&&(n+=a),a=e>n?0:n-e>>>0,e>>>=0;for(var o=r(a);++i<a;)o[i]=t[i+e];return o}function ei(t,e){var n;return hr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var a=r+i>>>1,o=t[a];null!==o&&!ss(o)&&(n?o<=e:o<e)?r=a+1:i=a}return i}return ri(t,e,nu,n)}function ri(t,e,n,r){var a=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!=e,u=null===e,l=ss(e),h=e===i;a<o;){var c=fe((a+o)/2),d=n(t[c]),f=d!==i,p=null===d,v=d==d,g=ss(d);if(s)var y=r||v;else y=h?v&&(r||f):u?v&&f&&(r||!p):l?v&&f&&!p&&(r||!g):!p&&!g&&(r?d<=e:d<e);y?a=c+1:o=c}return yn(o,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n],s=e?e(o):o;if(!n||!jo(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function ai(t){return"number"==typeof t?t:ss(t)?d:+t}function oi(t){if("string"==typeof t)return t;if(Wo(t))return Ie(t,oi)+"";if(ss(t))return Ln?Ln.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function si(t,e,n){var r=-1,i=Te,a=t.length,o=!0,s=[],u=s;if(n)o=!1,i=De;else if(a>=200){var l=e?null:Yi(t);if(l)return un(l);o=!1,i=$e,u=new Yn}else u=e?[]:s;t:for(;++r<a;){var h=t[r],c=e?e(h):h;if(h=n||0!==h?h:0,o&&c==c){for(var d=u.length;d--;)if(u[d]===c)continue t;e&&u.push(c),s.push(h)}else i(u,c,n)||(u!==s&&u.push(c),s.push(h))}return s}function ui(t,e){return null==(t=Ea(t,e=gi(e,t)))||delete t[Aa(Ha(e))]}function li(t,e,n,r){return Kr(t,e,n(wr(t,e)),r)}function hi(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?ti(t,r?0:a,r?a+1:i):ti(t,r?a+1:0,r?i:a)}function ci(t,e){var n=t;return n instanceof Vn&&(n=n.value()),Ne(e,(function(t,e){return e.func.apply(e.thisArg,Be([t],e.args))}),n)}function di(t,e,n){var i=t.length;if(i<2)return i?si(t[0]):[];for(var a=-1,o=r(i);++a<i;)for(var s=t[a],u=-1;++u<i;)u!=a&&(o[a]=lr(o[a]||s,t[u],e,n));return si(vr(o,1),e,n)}function fi(t,e,n){for(var r=-1,a=t.length,o=e.length,s={};++r<a;){var u=r<o?e[r]:i;n(s,t[r],u)}return s}function pi(t){return Yo(t)?t:[]}function vi(t){return"function"==typeof t?t:nu}function gi(t,e){return Wo(t)?t:ya(t,e)?[t]:Oa(ys(t))}var yi=Ur;function mi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var bi=oe||function(t){return ce.clearTimeout(t)};function xi(t,e){if(e)return t.slice();var n=t.length,r=Wt?Wt(n):new t.constructor(n);return t.copy(r),r}function wi(t){var e=new t.constructor(t.byteLength);return new Vt(e).set(new Vt(t)),e}function _i(t,e){var n=e?wi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Mi(t,e){if(t!==e){var n=t!==i,r=null===t,a=t==t,o=ss(t),s=e!==i,u=null===e,l=e==e,h=ss(e);if(!u&&!h&&!o&&t>e||o&&s&&l&&!u&&!h||r&&s&&l||!n&&l||!a)return 1;if(!r&&!o&&!h&&t<e||h&&n&&a&&!r&&!o||u&&n&&a||!s&&a||!l)return-1}return 0}function Ei(t,e,n,i){for(var a=-1,o=t.length,s=n.length,u=-1,l=e.length,h=gn(o-s,0),c=r(l+h),d=!i;++u<l;)c[u]=e[u];for(;++a<s;)(d||a<o)&&(c[n[a]]=t[a]);for(;h--;)c[u++]=t[a++];return c}function ki(t,e,n,i){for(var a=-1,o=t.length,s=-1,u=n.length,l=-1,h=e.length,c=gn(o-u,0),d=r(c+h),f=!i;++a<c;)d[a]=t[a];for(var p=a;++l<h;)d[p+l]=e[l];for(;++s<u;)(f||a<o)&&(d[p+n[s]]=t[a++]);return d}function Ci(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Si(t,e,n,r){var a=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var u=e[o],l=r?r(n[u],t[u],u,n,t):i;l===i&&(l=t[u]),a?rr(n,u,l):Jn(n,u,l)}return n}function Pi(t,e){return function(n,r){var i=Wo(n)?Ee:er,a=e?e():{};return i(n,t,aa(r,2),a)}}function Ti(t){return Ur((function(e,n){var r=-1,a=n.length,o=a>1?n[a-1]:i,s=a>2?n[2]:i;for(o=t.length>3&&"function"==typeof o?(a--,o):i,s&&ga(n[0],n[1],s)&&(o=a<3?i:o,a=1),e=Et(e);++r<a;){var u=n[r];u&&t(e,u,r,o)}return e}))}function Di(t,e){return function(n,r){if(null==n)return n;if(!Xo(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Et(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Ii(t){return function(e,n,r){for(var i=-1,a=Et(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}function Bi(t){return function(e){var n=rn(e=ys(e))?cn(e):i,r=n?n[0]:e.charAt(0),a=n?mi(n,1).join(""):e.slice(1);return r[t]()+a}}function Ni(t){return function(e){return Ne(Ks(Vs(e).replace(Kt,"")),t,"")}}function Oi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=jn(t.prototype),r=t.apply(n,e);return Jo(r)?r:n}}function Ai(t){return function(e,n,r){var a=Et(e);if(!Xo(e)){var o=aa(n,3);e=Ds(e),n=function(t){return o(a[t],t,a)}}var s=t(e,n,r);return s>-1?a[o?e[s]:s]:i}}function zi(t){return Ji((function(e){var n=e.length,r=n,o=Fn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new St(a);if(o&&!u&&"wrapper"==ra(s))var u=new Fn([],!0)}for(r=u?r:n;++r<n;){var l=ra(s=e[r]),h="wrapper"==l?na(s):i;u=h&&ma(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?u[ra(h[0])].apply(u,h[3]):1==s.length&&ma(s)?u[l]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Wo(r))return u.plant(r).value();for(var i=0,a=n?e[i].apply(this,t):r;++i<n;)a=e[i].call(this,a);return a}}))}function Li(t,e,n,a,o,s,u,h,c,d){var f=e&l,p=1&e,v=2&e,g=24&e,y=512&e,m=v?i:Oi(t);return function l(){for(var b=arguments.length,x=r(b),w=b;w--;)x[w]=arguments[w];if(g)var _=ia(l),M=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(x,_);if(a&&(x=Ei(x,a,o,g)),s&&(x=ki(x,s,u,g)),b-=M,g&&b<d){var E=sn(x,_);return Gi(t,e,Li,l.placeholder,n,x,E,h,c,d-b)}var k=p?n:this,C=v?k[t]:t;return b=x.length,h?x=function(t,e){for(var n=t.length,r=yn(e.length,n),a=Ci(t);r--;){var o=e[r];t[r]=va(o,n)?a[o]:i}return t}(x,h):y&&b>1&&x.reverse(),f&&c<b&&(x.length=c),this&&this!==ce&&this instanceof l&&(C=m||Oi(C)),C.apply(k,x)}}function Ri(t,e){return function(n,r){return function(t,e,n,r){return mr(t,(function(t,i,a){e(r,n(t),i,a)})),r}(n,t,e(r),{})}}function ji(t,e){return function(n,r){var a;if(n===i&&r===i)return e;if(n!==i&&(a=n),r!==i){if(a===i)return r;"string"==typeof n||"string"==typeof r?(n=oi(n),r=oi(r)):(n=ai(n),r=ai(r)),a=t(n,r)}return a}}function qi(t){return Ji((function(e){return e=Ie(e,Ze(aa())),Ur((function(n){var r=this;return t(e,(function(t){return Me(t,r,n)}))}))}))}function Fi(t,e){var n=(e=e===i?" ":oi(e)).length;if(n<2)return n?Yr(e,t):e;var r=Yr(e,de(t/hn(e)));return rn(e)?mi(cn(r),0,t).join(""):r.slice(0,t)}function Vi(t){return function(e,n,a){return a&&"number"!=typeof a&&ga(e,n,a)&&(n=a=i),e=ds(e),n===i?(n=e,e=0):n=ds(n),function(t,e,n,i){for(var a=-1,o=gn(de((e-t)/(n||1)),0),s=r(o);o--;)s[i?o:++a]=t,t+=n;return s}(e,n,a=a===i?e<n?1:-1:ds(a),t)}}function Wi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vs(e),n=vs(n)),t(e,n)}}function Gi(t,e,n,r,a,o,s,l,h,c){var d=8&e;e|=d?u:64,4&(e&=~(d?64:u))||(e&=-4);var f=[t,e,a,d?o:i,d?s:i,d?i:o,d?i:s,l,h,c],p=n.apply(i,f);return ma(t)&&Ca(p,f),p.placeholder=r,Ta(p,t,e)}function Xi(t){var e=Mt[t];return function(t,n){if(t=vs(t),(n=null==n?0:yn(fs(n),292))&&ze(t)){var r=(ys(t)+"e").split("e");return+((r=(ys(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Yi=kn&&1/un(new kn([,-0]))[1]==h?function(t){return new kn(t)}:su;function Ui(t){return function(e){var n=ca(e);return n==_?an(e):n==S?ln(e):function(t,e){return Ie(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Hi(t,e,n,o,h,c,d,f){var p=2&e;if(!p&&"function"!=typeof t)throw new St(a);var v=o?o.length:0;if(v||(e&=-97,o=h=i),d=d===i?d:gn(fs(d),0),f=f===i?f:fs(f),v-=h?h.length:0,64&e){var g=o,y=h;o=h=i}var m=p?i:na(t),b=[t,e,n,o,h,g,y,c,d,f];if(m&&function(t,e){var n=t[1],r=e[1],i=n|r,a=i<131,o=r==l&&8==n||r==l&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!a&&!o)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var h=t[3];t[3]=h?Ei(h,u,e[4]):u,t[4]=h?sn(t[3],s):e[4]}(u=e[5])&&(h=t[5],t[5]=h?ki(h,u,e[6]):u,t[6]=h?sn(t[5],s):e[6]),(u=e[7])&&(t[7]=u),r&l&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,m),t=b[0],e=b[1],n=b[2],o=b[3],h=b[4],!(f=b[9]=b[9]===i?p?0:t.length:gn(b[9]-v,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||16==e?function(t,e,n){var a=Oi(t);return function o(){for(var s=arguments.length,u=r(s),l=s,h=ia(o);l--;)u[l]=arguments[l];var c=s<3&&u[0]!==h&&u[s-1]!==h?[]:sn(u,h);return(s-=c.length)<n?Gi(t,e,Li,o.placeholder,i,u,c,i,i,n-s):Me(this&&this!==ce&&this instanceof o?a:t,this,u)}}(t,e,f):e!=u&&33!=e||h.length?Li.apply(i,b):function(t,e,n,i){var a=1&e,o=Oi(t);return function e(){for(var s=-1,u=arguments.length,l=-1,h=i.length,c=r(h+u),d=this&&this!==ce&&this instanceof e?o:t;++l<h;)c[l]=i[l];for(;u--;)c[l++]=arguments[++s];return Me(d,a?n:this,c)}}(t,e,n,o);else var x=function(t,e,n){var r=1&e,i=Oi(t);return function e(){return(this&&this!==ce&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Ta((m?$r:Ca)(x,b),t,e)}function Zi(t,e,n,r){return t===i||jo(t,Dt[n])&&!Nt.call(r,n)?e:t}function Ki(t,e,n,r,a,o){return Jo(t)&&Jo(e)&&(o.set(e,t),jr(t,e,i,Ki,o),o.delete(e)),t}function $i(t){return rs(t)?i:t}function Qi(t,e,n,r,a,o){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var h=o.get(t),c=o.get(e);if(h&&c)return h==e&&c==t;var d=-1,f=!0,p=2&n?new Yn:i;for(o.set(t,e),o.set(e,t);++d<u;){var v=t[d],g=e[d];if(r)var y=s?r(g,v,d,e,t,o):r(v,g,d,t,e,o);if(y!==i){if(y)continue;f=!1;break}if(p){if(!Ae(e,(function(t,e){if(!$e(p,e)&&(v===t||a(v,t,n,r,o)))return p.push(e)}))){f=!1;break}}else if(v!==g&&!a(v,g,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Ji(t){return Pa(Ma(t,i,Wa),t+"")}function ta(t){return _r(t,Ds,la)}function ea(t){return _r(t,Is,ha)}var na=Pn?function(t){return Pn.get(t)}:su;function ra(t){for(var e=t.name+"",n=Tn[e],r=Nt.call(Tn,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function ia(t){return(Nt.call(Rn,"placeholder")?Rn:t).placeholder}function aa(){var t=Rn.iteratee||ru;return t=t===ru?Nr:t,arguments.length?t(arguments[0],arguments[1]):t}function oa(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function sa(t){for(var e=Ds(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,wa(i)]}return e}function ua(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Br(n)?n:i}var la=ve?function(t){return null==t?[]:(t=Et(t),Pe(ve(t),(function(e){return Yt.call(t,e)})))}:pu,ha=ve?function(t){for(var e=[];t;)Be(e,la(t)),t=Gt(t);return e}:pu,ca=Mr;function da(t,e,n){for(var r=-1,i=(e=gi(e,t)).length,a=!1;++r<i;){var o=Aa(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&Qo(i)&&va(o,i)&&(Wo(t)||Vo(t))}function fa(t){return"function"!=typeof t.constructor||xa(t)?{}:jn(Gt(t))}function pa(t){return Wo(t)||Vo(t)||!!(Ht&&t&&t[Ht])}function va(t,e){var n=typeof t;return!!(e=null==e?c:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e}function ga(t,e,n){if(!Jo(n))return!1;var r=typeof e;return!!("number"==r?Xo(n)&&va(e,n.length):"string"==r&&e in n)&&jo(n[e],t)}function ya(t,e){if(Wo(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ss(t))||J.test(t)||!Q.test(t)||null!=e&&t in Et(e)}function ma(t){var e=ra(t),n=Rn[e];if("function"!=typeof n||!(e in Vn.prototype))return!1;if(t===n)return!0;var r=na(n);return!!r&&t===r[0]}(_n&&ca(new _n(new ArrayBuffer(1)))!=B||Mn&&ca(new Mn)!=_||En&&ca(En.resolve())!=k||kn&&ca(new kn)!=S||Cn&&ca(new Cn)!=D)&&(ca=function(t){var e=Mr(t),n=e==E?t.constructor:i,r=n?za(n):"";if(r)switch(r){case Dn:return B;case In:return _;case Bn:return k;case Nn:return S;case On:return D}return e});var ba=It?Ko:vu;function xa(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dt)}function wa(t){return t==t&&!Jo(t)}function _a(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Et(n))}}function Ma(t,e,n){return e=gn(e===i?t.length-1:e,0),function(){for(var i=arguments,a=-1,o=gn(i.length-e,0),s=r(o);++a<o;)s[a]=i[e+a];a=-1;for(var u=r(e+1);++a<e;)u[a]=i[a];return u[e]=n(s),Me(t,this,u)}}function Ea(t,e){return e.length<2?t:wr(t,ti(e,0,-1))}function ka(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Ca=Da($r),Sa=he||function(t,e){return ce.setTimeout(t,e)},Pa=Da(Qr);function Ta(t,e,n){var r=e+"";return Pa(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(at,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ke(p,(function(n){var r="_."+n[0];e&n[1]&&!Te(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ot);return e?e[1].split(st):[]}(r),n)))}function Da(t){var e=0,n=0;return function(){var r=mn(),a=16-(r-n);if(n=r,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Ia(t,e){var n=-1,r=t.length,a=r-1;for(e=e===i?r:e;++n<e;){var o=Xr(n,a),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var Ba,Na,Oa=(Ba=No((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ht,"$1"):n||t)})),e}),(function(t){return 500===Na.size&&Na.clear(),t})),Na=Ba.cache,Ba);function Aa(t){if("string"==typeof t||ss(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function za(t){if(null!=t){try{return Bt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function La(t){if(t instanceof Vn)return t.clone();var e=new Fn(t.__wrapped__,t.__chain__);return e.__actions__=Ci(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ra=Ur((function(t,e){return Yo(t)?lr(t,vr(e,1,Yo,!0)):[]})),ja=Ur((function(t,e){var n=Ha(e);return Yo(n)&&(n=i),Yo(t)?lr(t,vr(e,1,Yo,!0),aa(n,2)):[]})),qa=Ur((function(t,e){var n=Ha(e);return Yo(n)&&(n=i),Yo(t)?lr(t,vr(e,1,Yo,!0),i,n):[]}));function Fa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=gn(r+i,0)),Re(t,aa(e,3),i)}function Va(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=r-1;return n!==i&&(a=fs(n),a=n<0?gn(r+a,0):yn(a,r-1)),Re(t,aa(e,3),a,!0)}function Wa(t){return null!=t&&t.length?vr(t,1):[]}function Ga(t){return t&&t.length?t[0]:i}var Xa=Ur((function(t){var e=Ie(t,pi);return e.length&&e[0]===t[0]?Sr(e):[]})),Ya=Ur((function(t){var e=Ha(t),n=Ie(t,pi);return e===Ha(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Sr(n,aa(e,2)):[]})),Ua=Ur((function(t){var e=Ha(t),n=Ie(t,pi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Sr(n,i,e):[]}));function Ha(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Za=Ur(Ka);function Ka(t,e){return t&&t.length&&e&&e.length?Wr(t,e):t}var $a=Ji((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return Gr(t,Ie(e,(function(t){return va(t,n)?+t:t})).sort(Mi)),r}));function Qa(t){return null==t?t:wn.call(t)}var Ja=Ur((function(t){return si(vr(t,1,Yo,!0))})),to=Ur((function(t){var e=Ha(t);return Yo(e)&&(e=i),si(vr(t,1,Yo,!0),aa(e,2))})),eo=Ur((function(t){var e=Ha(t);return e="function"==typeof e?e:i,si(vr(t,1,Yo,!0),i,e)}));function no(t){if(!t||!t.length)return[];var e=0;return t=Pe(t,(function(t){if(Yo(t))return e=gn(t.length,e),!0})),Ue(e,(function(e){return Ie(t,We(e))}))}function ro(t,e){if(!t||!t.length)return[];var n=no(t);return null==e?n:Ie(n,(function(t){return Me(e,i,t)}))}var io=Ur((function(t,e){return Yo(t)?lr(t,e):[]})),ao=Ur((function(t){return di(Pe(t,Yo))})),oo=Ur((function(t){var e=Ha(t);return Yo(e)&&(e=i),di(Pe(t,Yo),aa(e,2))})),so=Ur((function(t){var e=Ha(t);return e="function"==typeof e?e:i,di(Pe(t,Yo),i,e)})),uo=Ur(no),lo=Ur((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,ro(t,n)}));function ho(t){var e=Rn(t);return e.__chain__=!0,e}function co(t,e){return e(t)}var fo=Ji((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,a=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Vn&&va(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:co,args:[a],thisArg:i}),new Fn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(a)})),po=Pi((function(t,e,n){Nt.call(t,n)?++t[n]:rr(t,n,1)})),vo=Ai(Fa),go=Ai(Va);function yo(t,e){return(Wo(t)?ke:hr)(t,aa(e,3))}function mo(t,e){return(Wo(t)?Ce:cr)(t,aa(e,3))}var bo=Pi((function(t,e,n){Nt.call(t,n)?t[n].push(e):rr(t,n,[e])})),xo=Ur((function(t,e,n){var i=-1,a="function"==typeof e,o=Xo(t)?r(t.length):[];return hr(t,(function(t){o[++i]=a?Me(e,t,n):Pr(t,e,n)})),o})),wo=Pi((function(t,e,n){rr(t,n,e)}));function _o(t,e){return(Wo(t)?Ie:zr)(t,aa(e,3))}var Mo=Pi((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Eo=Ur((function(t,e){if(null==t)return[];var n=e.length;return n>1&&ga(t,e[0],e[1])?e=[]:n>2&&ga(e[0],e[1],e[2])&&(e=[e[0]]),Fr(t,vr(e,1),[])})),ko=le||function(){return ce.Date.now()};function Co(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Hi(t,l,i,i,i,i,e)}function So(t,e){var n;if("function"!=typeof e)throw new St(a);return t=fs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Po=Ur((function(t,e,n){var r=1;if(n.length){var i=sn(n,ia(Po));r|=u}return Hi(t,r,e,n,i)})),To=Ur((function(t,e,n){var r=3;if(n.length){var i=sn(n,ia(To));r|=u}return Hi(e,r,t,n,i)}));function Do(t,e,n){var r,o,s,u,l,h,c=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new St(a);function v(e){var n=r,a=o;return r=o=i,c=e,u=t.apply(a,n)}function g(t){var n=t-h;return h===i||n>=e||n<0||f&&t-c>=s}function y(){var t=ko();if(g(t))return m(t);l=Sa(y,function(t){var n=e-(t-h);return f?yn(n,s-(t-c)):n}(t))}function m(t){return l=i,p&&r?v(t):(r=o=i,u)}function b(){var t=ko(),n=g(t);if(r=arguments,o=this,h=t,n){if(l===i)return function(t){return c=t,l=Sa(y,e),d?v(t):u}(h);if(f)return bi(l),l=Sa(y,e),v(h)}return l===i&&(l=Sa(y,e)),u}return e=vs(e)||0,Jo(n)&&(d=!!n.leading,s=(f="maxWait"in n)?gn(vs(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){l!==i&&bi(l),c=0,r=h=o=l=i},b.flush=function(){return l===i?u:m(ko())},b}var Io=Ur((function(t,e){return ur(t,1,e)})),Bo=Ur((function(t,e,n){return ur(t,vs(e)||0,n)}));function No(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new St(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(No.Cache||Xn),n}function Oo(t){if("function"!=typeof t)throw new St(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}No.Cache=Xn;var Ao=yi((function(t,e){var n=(e=1==e.length&&Wo(e[0])?Ie(e[0],Ze(aa())):Ie(vr(e,1),Ze(aa()))).length;return Ur((function(r){for(var i=-1,a=yn(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return Me(t,this,r)}))})),zo=Ur((function(t,e){var n=sn(e,ia(zo));return Hi(t,u,i,e,n)})),Lo=Ur((function(t,e){var n=sn(e,ia(Lo));return Hi(t,64,i,e,n)})),Ro=Ji((function(t,e){return Hi(t,256,i,i,i,e)}));function jo(t,e){return t===e||t!=t&&e!=e}var qo=Wi(Er),Fo=Wi((function(t,e){return t>=e})),Vo=Tr(function(){return arguments}())?Tr:function(t){return ts(t)&&Nt.call(t,"callee")&&!Yt.call(t,"callee")},Wo=r.isArray,Go=ye?Ze(ye):function(t){return ts(t)&&Mr(t)==I};function Xo(t){return null!=t&&Qo(t.length)&&!Ko(t)}function Yo(t){return ts(t)&&Xo(t)}var Uo=ge||vu,Ho=me?Ze(me):function(t){return ts(t)&&Mr(t)==m};function Zo(t){if(!ts(t))return!1;var e=Mr(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!rs(t)}function Ko(t){if(!Jo(t))return!1;var e=Mr(t);return e==x||e==w||"[object AsyncFunction]"==e||"[object Proxy]"==e}function $o(t){return"number"==typeof t&&t==fs(t)}function Qo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function Jo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ts(t){return null!=t&&"object"==typeof t}var es=be?Ze(be):function(t){return ts(t)&&ca(t)==_};function ns(t){return"number"==typeof t||ts(t)&&Mr(t)==M}function rs(t){if(!ts(t)||Mr(t)!=E)return!1;var e=Gt(t);if(null===e)return!0;var n=Nt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Bt.call(n)==Lt}var is=xe?Ze(xe):function(t){return ts(t)&&Mr(t)==C},as=we?Ze(we):function(t){return ts(t)&&ca(t)==S};function os(t){return"string"==typeof t||!Wo(t)&&ts(t)&&Mr(t)==P}function ss(t){return"symbol"==typeof t||ts(t)&&Mr(t)==T}var us=_e?Ze(_e):function(t){return ts(t)&&Qo(t.length)&&!!ie[Mr(t)]},ls=Wi(Ar),hs=Wi((function(t,e){return t<=e}));function cs(t){if(!t)return[];if(Xo(t))return os(t)?cn(t):Ci(t);if(Zt&&t[Zt])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Zt]());var e=ca(t);return(e==_?an:e==S?un:js)(t)}function ds(t){return t?(t=vs(t))===h||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function fs(t){var e=ds(t),n=e%1;return e==e?n?e-n:e:0}function ps(t){return t?ar(fs(t),0,f):0}function vs(t){if("number"==typeof t)return t;if(ss(t))return d;if(Jo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Jo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=He(t);var n=pt.test(t);return n||gt.test(t)?ue(t.slice(2),n?2:8):ft.test(t)?d:+t}function gs(t){return Si(t,Is(t))}function ys(t){return null==t?"":oi(t)}var ms=Ti((function(t,e){if(xa(e)||Xo(e))Si(e,Ds(e),t);else for(var n in e)Nt.call(e,n)&&Jn(t,n,e[n])})),bs=Ti((function(t,e){Si(e,Is(e),t)})),xs=Ti((function(t,e,n,r){Si(e,Is(e),t,r)})),ws=Ti((function(t,e,n,r){Si(e,Ds(e),t,r)})),_s=Ji(ir),Ms=Ur((function(t,e){t=Et(t);var n=-1,r=e.length,a=r>2?e[2]:i;for(a&&ga(e[0],e[1],a)&&(r=1);++n<r;)for(var o=e[n],s=Is(o),u=-1,l=s.length;++u<l;){var h=s[u],c=t[h];(c===i||jo(c,Dt[h])&&!Nt.call(t,h))&&(t[h]=o[h])}return t})),Es=Ur((function(t){return t.push(i,Ki),Me(Ns,i,t)}));function ks(t,e,n){var r=null==t?i:wr(t,e);return r===i?n:r}function Cs(t,e){return null!=t&&da(t,e,Cr)}var Ss=Ri((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),t[e]=n}),Js(nu)),Ps=Ri((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=zt.call(e)),Nt.call(t,e)?t[e].push(n):t[e]=[n]}),aa),Ts=Ur(Pr);function Ds(t){return Xo(t)?Hn(t):Or(t)}function Is(t){return Xo(t)?Hn(t,!0):function(t){if(!Jo(t))return function(t){var e=[];if(null!=t)for(var n in Et(t))e.push(n);return e}(t);var e=xa(t),n=[];for(var r in t)("constructor"!=r||!e&&Nt.call(t,r))&&n.push(r);return n}(t)}var Bs=Ti((function(t,e,n){jr(t,e,n)})),Ns=Ti((function(t,e,n,r){jr(t,e,n,r)})),Os=Ji((function(t,e){var n={};if(null==t)return n;var r=!1;e=Ie(e,(function(e){return e=gi(e,t),r||(r=e.length>1),e})),Si(t,ea(t),n),r&&(n=or(n,7,$i));for(var i=e.length;i--;)ui(n,e[i]);return n})),As=Ji((function(t,e){return null==t?{}:function(t,e){return Vr(t,e,(function(e,n){return Cs(t,n)}))}(t,e)}));function zs(t,e){if(null==t)return{};var n=Ie(ea(t),(function(t){return[t]}));return e=aa(e),Vr(t,n,(function(t,n){return e(t,n[0])}))}var Ls=Ui(Ds),Rs=Ui(Is);function js(t){return null==t?[]:Ke(t,Ds(t))}var qs=Ni((function(t,e,n){return e=e.toLowerCase(),t+(n?Fs(e):e)}));function Fs(t){return Zs(ys(t).toLowerCase())}function Vs(t){return(t=ys(t))&&t.replace(mt,tn).replace($t,"")}var Ws=Ni((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Gs=Ni((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Xs=Bi("toLowerCase"),Ys=Ni((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Us=Ni((function(t,e,n){return t+(n?" ":"")+Zs(e)})),Hs=Ni((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Zs=Bi("toUpperCase");function Ks(t,e,n){return t=ys(t),(e=n?i:e)===i?function(t){return ee.test(t)}(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.match(ut)||[]}(t):t.match(e)||[]}var $s=Ur((function(t,e){try{return Me(t,i,e)}catch(t){return Zo(t)?t:new wt(t)}})),Qs=Ji((function(t,e){return ke(e,(function(e){e=Aa(e),rr(t,e,Po(t[e],t))})),t}));function Js(t){return function(){return t}}var tu=zi(),eu=zi(!0);function nu(t){return t}function ru(t){return Nr("function"==typeof t?t:or(t,1))}var iu=Ur((function(t,e){return function(n){return Pr(n,t,e)}})),au=Ur((function(t,e){return function(n){return Pr(t,n,e)}}));function ou(t,e,n){var r=Ds(e),i=xr(e,r);null!=n||Jo(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=xr(e,Ds(e)));var a=!(Jo(n)&&"chain"in n&&!n.chain),o=Ko(t);return ke(i,(function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=Ci(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Be([this.value()],arguments))})})),t}function su(){}var uu=qi(Ie),lu=qi(Se),hu=qi(Ae);function cu(t){return ya(t)?We(Aa(t)):function(t){return function(e){return wr(e,t)}}(t)}var du=Vi(),fu=Vi(!0);function pu(){return[]}function vu(){return!1}var gu,yu=ji((function(t,e){return t+e}),0),mu=Xi("ceil"),bu=ji((function(t,e){return t/e}),1),xu=Xi("floor"),wu=ji((function(t,e){return t*e}),1),_u=Xi("round"),Mu=ji((function(t,e){return t-e}),0);return Rn.after=function(t,e){if("function"!=typeof e)throw new St(a);return t=fs(t),function(){if(--t<1)return e.apply(this,arguments)}},Rn.ary=Co,Rn.assign=ms,Rn.assignIn=bs,Rn.assignInWith=xs,Rn.assignWith=ws,Rn.at=_s,Rn.before=So,Rn.bind=Po,Rn.bindAll=Qs,Rn.bindKey=To,Rn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Wo(t)?t:[t]},Rn.chain=ho,Rn.chunk=function(t,e,n){e=(n?ga(t,e,n):e===i)?1:gn(fs(e),0);var a=null==t?0:t.length;if(!a||e<1)return[];for(var o=0,s=0,u=r(de(a/e));o<a;)u[s++]=ti(t,o,o+=e);return u},Rn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},Rn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Be(Wo(n)?Ci(n):[n],vr(e,1))},Rn.cond=function(t){var e=null==t?0:t.length,n=aa();return t=e?Ie(t,(function(t){if("function"!=typeof t[1])throw new St(a);return[n(t[0]),t[1]]})):[],Ur((function(n){for(var r=-1;++r<e;){var i=t[r];if(Me(i[0],this,n))return Me(i[1],this,n)}}))},Rn.conforms=function(t){return function(t){var e=Ds(t);return function(n){return sr(n,t,e)}}(or(t,1))},Rn.constant=Js,Rn.countBy=po,Rn.create=function(t,e){var n=jn(t);return null==e?n:nr(n,e)},Rn.curry=function t(e,n,r){var a=Hi(e,8,i,i,i,i,i,n=r?i:n);return a.placeholder=t.placeholder,a},Rn.curryRight=function t(e,n,r){var a=Hi(e,16,i,i,i,i,i,n=r?i:n);return a.placeholder=t.placeholder,a},Rn.debounce=Do,Rn.defaults=Ms,Rn.defaultsDeep=Es,Rn.defer=Io,Rn.delay=Bo,Rn.difference=Ra,Rn.differenceBy=ja,Rn.differenceWith=qa,Rn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:fs(e))<0?0:e,r):[]},Rn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:fs(e)))<0?0:e):[]},Rn.dropRightWhile=function(t,e){return t&&t.length?hi(t,aa(e,3),!0,!0):[]},Rn.dropWhile=function(t,e){return t&&t.length?hi(t,aa(e,3),!0):[]},Rn.fill=function(t,e,n,r){var a=null==t?0:t.length;return a?(n&&"number"!=typeof n&&ga(t,e,n)&&(n=0,r=a),function(t,e,n,r){var a=t.length;for((n=fs(n))<0&&(n=-n>a?0:a+n),(r=r===i||r>a?a:fs(r))<0&&(r+=a),r=n>r?0:ps(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},Rn.filter=function(t,e){return(Wo(t)?Pe:pr)(t,aa(e,3))},Rn.flatMap=function(t,e){return vr(_o(t,e),1)},Rn.flatMapDeep=function(t,e){return vr(_o(t,e),h)},Rn.flatMapDepth=function(t,e,n){return n=n===i?1:fs(n),vr(_o(t,e),n)},Rn.flatten=Wa,Rn.flattenDeep=function(t){return null!=t&&t.length?vr(t,h):[]},Rn.flattenDepth=function(t,e){return null!=t&&t.length?vr(t,e=e===i?1:fs(e)):[]},Rn.flip=function(t){return Hi(t,512)},Rn.flow=tu,Rn.flowRight=eu,Rn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Rn.functions=function(t){return null==t?[]:xr(t,Ds(t))},Rn.functionsIn=function(t){return null==t?[]:xr(t,Is(t))},Rn.groupBy=bo,Rn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},Rn.intersection=Xa,Rn.intersectionBy=Ya,Rn.intersectionWith=Ua,Rn.invert=Ss,Rn.invertBy=Ps,Rn.invokeMap=xo,Rn.iteratee=ru,Rn.keyBy=wo,Rn.keys=Ds,Rn.keysIn=Is,Rn.map=_o,Rn.mapKeys=function(t,e){var n={};return e=aa(e,3),mr(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},Rn.mapValues=function(t,e){var n={};return e=aa(e,3),mr(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},Rn.matches=function(t){return Lr(or(t,1))},Rn.matchesProperty=function(t,e){return Rr(t,or(e,1))},Rn.memoize=No,Rn.merge=Bs,Rn.mergeWith=Ns,Rn.method=iu,Rn.methodOf=au,Rn.mixin=ou,Rn.negate=Oo,Rn.nthArg=function(t){return t=fs(t),Ur((function(e){return qr(e,t)}))},Rn.omit=Os,Rn.omitBy=function(t,e){return zs(t,Oo(aa(e)))},Rn.once=function(t){return So(2,t)},Rn.orderBy=function(t,e,n,r){return null==t?[]:(Wo(e)||(e=null==e?[]:[e]),Wo(n=r?i:n)||(n=null==n?[]:[n]),Fr(t,e,n))},Rn.over=uu,Rn.overArgs=Ao,Rn.overEvery=lu,Rn.overSome=hu,Rn.partial=zo,Rn.partialRight=Lo,Rn.partition=Mo,Rn.pick=As,Rn.pickBy=zs,Rn.property=cu,Rn.propertyOf=function(t){return function(e){return null==t?i:wr(t,e)}},Rn.pull=Za,Rn.pullAll=Ka,Rn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,aa(n,2)):t},Rn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Wr(t,e,i,n):t},Rn.pullAt=$a,Rn.range=du,Rn.rangeRight=fu,Rn.rearg=Ro,Rn.reject=function(t,e){return(Wo(t)?Pe:pr)(t,Oo(aa(e,3)))},Rn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=aa(e,3);++r<a;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return Gr(t,i),n},Rn.rest=function(t,e){if("function"!=typeof t)throw new St(a);return Ur(t,e=e===i?e:fs(e))},Rn.reverse=Qa,Rn.sampleSize=function(t,e,n){return e=(n?ga(t,e,n):e===i)?1:fs(e),(Wo(t)?Kn:Zr)(t,e)},Rn.set=function(t,e,n){return null==t?t:Kr(t,e,n)},Rn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Kr(t,e,n,r)},Rn.shuffle=function(t){return(Wo(t)?$n:Jr)(t)},Rn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ga(t,e,n)?(e=0,n=r):(e=null==e?0:fs(e),n=n===i?r:fs(n)),ti(t,e,n)):[]},Rn.sortBy=Eo,Rn.sortedUniq=function(t){return t&&t.length?ii(t):[]},Rn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,aa(e,2)):[]},Rn.split=function(t,e,n){return n&&"number"!=typeof n&&ga(t,e,n)&&(e=n=i),(n=n===i?f:n>>>0)?(t=ys(t))&&("string"==typeof e||null!=e&&!is(e))&&!(e=oi(e))&&rn(t)?mi(cn(t),0,n):t.split(e,n):[]},Rn.spread=function(t,e){if("function"!=typeof t)throw new St(a);return e=null==e?0:gn(fs(e),0),Ur((function(n){var r=n[e],i=mi(n,0,e);return r&&Be(i,r),Me(t,this,i)}))},Rn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},Rn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:fs(e))<0?0:e):[]},Rn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:fs(e)))<0?0:e,r):[]},Rn.takeRightWhile=function(t,e){return t&&t.length?hi(t,aa(e,3),!1,!0):[]},Rn.takeWhile=function(t,e){return t&&t.length?hi(t,aa(e,3)):[]},Rn.tap=function(t,e){return e(t),t},Rn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new St(a);return Jo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Do(t,e,{leading:r,maxWait:e,trailing:i})},Rn.thru=co,Rn.toArray=cs,Rn.toPairs=Ls,Rn.toPairsIn=Rs,Rn.toPath=function(t){return Wo(t)?Ie(t,Aa):ss(t)?[t]:Ci(Oa(ys(t)))},Rn.toPlainObject=gs,Rn.transform=function(t,e,n){var r=Wo(t),i=r||Uo(t)||us(t);if(e=aa(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:Jo(t)&&Ko(a)?jn(Gt(t)):{}}return(i?ke:mr)(t,(function(t,r,i){return e(n,t,r,i)})),n},Rn.unary=function(t){return Co(t,1)},Rn.union=Ja,Rn.unionBy=to,Rn.unionWith=eo,Rn.uniq=function(t){return t&&t.length?si(t):[]},Rn.uniqBy=function(t,e){return t&&t.length?si(t,aa(e,2)):[]},Rn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?si(t,i,e):[]},Rn.unset=function(t,e){return null==t||ui(t,e)},Rn.unzip=no,Rn.unzipWith=ro,Rn.update=function(t,e,n){return null==t?t:li(t,e,vi(n))},Rn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:li(t,e,vi(n),r)},Rn.values=js,Rn.valuesIn=function(t){return null==t?[]:Ke(t,Is(t))},Rn.without=io,Rn.words=Ks,Rn.wrap=function(t,e){return zo(vi(e),t)},Rn.xor=ao,Rn.xorBy=oo,Rn.xorWith=so,Rn.zip=uo,Rn.zipObject=function(t,e){return fi(t||[],e||[],Jn)},Rn.zipObjectDeep=function(t,e){return fi(t||[],e||[],Kr)},Rn.zipWith=lo,Rn.entries=Ls,Rn.entriesIn=Rs,Rn.extend=bs,Rn.extendWith=xs,ou(Rn,Rn),Rn.add=yu,Rn.attempt=$s,Rn.camelCase=qs,Rn.capitalize=Fs,Rn.ceil=mu,Rn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=vs(n))==n?n:0),e!==i&&(e=(e=vs(e))==e?e:0),ar(vs(t),e,n)},Rn.clone=function(t){return or(t,4)},Rn.cloneDeep=function(t){return or(t,5)},Rn.cloneDeepWith=function(t,e){return or(t,5,e="function"==typeof e?e:i)},Rn.cloneWith=function(t,e){return or(t,4,e="function"==typeof e?e:i)},Rn.conformsTo=function(t,e){return null==e||sr(t,e,Ds(e))},Rn.deburr=Vs,Rn.defaultTo=function(t,e){return null==t||t!=t?e:t},Rn.divide=bu,Rn.endsWith=function(t,e,n){t=ys(t),e=oi(e);var r=t.length,a=n=n===i?r:ar(fs(n),0,r);return(n-=e.length)>=0&&t.slice(n,a)==e},Rn.eq=jo,Rn.escape=function(t){return(t=ys(t))&&H.test(t)?t.replace(Y,en):t},Rn.escapeRegExp=function(t){return(t=ys(t))&&nt.test(t)?t.replace(et,"\\$&"):t},Rn.every=function(t,e,n){var r=Wo(t)?Se:dr;return n&&ga(t,e,n)&&(e=i),r(t,aa(e,3))},Rn.find=vo,Rn.findIndex=Fa,Rn.findKey=function(t,e){return Le(t,aa(e,3),mr)},Rn.findLast=go,Rn.findLastIndex=Va,Rn.findLastKey=function(t,e){return Le(t,aa(e,3),br)},Rn.floor=xu,Rn.forEach=yo,Rn.forEachRight=mo,Rn.forIn=function(t,e){return null==t?t:gr(t,aa(e,3),Is)},Rn.forInRight=function(t,e){return null==t?t:yr(t,aa(e,3),Is)},Rn.forOwn=function(t,e){return t&&mr(t,aa(e,3))},Rn.forOwnRight=function(t,e){return t&&br(t,aa(e,3))},Rn.get=ks,Rn.gt=qo,Rn.gte=Fo,Rn.has=function(t,e){return null!=t&&da(t,e,kr)},Rn.hasIn=Cs,Rn.head=Ga,Rn.identity=nu,Rn.includes=function(t,e,n,r){t=Xo(t)?t:js(t),n=n&&!r?fs(n):0;var i=t.length;return n<0&&(n=gn(i+n,0)),os(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&je(t,e,n)>-1},Rn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:fs(n);return i<0&&(i=gn(r+i,0)),je(t,e,i)},Rn.inRange=function(t,e,n){return e=ds(e),n===i?(n=e,e=0):n=ds(n),function(t,e,n){return t>=yn(e,n)&&t<gn(e,n)}(t=vs(t),e,n)},Rn.invoke=Ts,Rn.isArguments=Vo,Rn.isArray=Wo,Rn.isArrayBuffer=Go,Rn.isArrayLike=Xo,Rn.isArrayLikeObject=Yo,Rn.isBoolean=function(t){return!0===t||!1===t||ts(t)&&Mr(t)==y},Rn.isBuffer=Uo,Rn.isDate=Ho,Rn.isElement=function(t){return ts(t)&&1===t.nodeType&&!rs(t)},Rn.isEmpty=function(t){if(null==t)return!0;if(Xo(t)&&(Wo(t)||"string"==typeof t||"function"==typeof t.splice||Uo(t)||us(t)||Vo(t)))return!t.length;var e=ca(t);if(e==_||e==S)return!t.size;if(xa(t))return!Or(t).length;for(var n in t)if(Nt.call(t,n))return!1;return!0},Rn.isEqual=function(t,e){return Dr(t,e)},Rn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Dr(t,e,i,n):!!r},Rn.isError=Zo,Rn.isFinite=function(t){return"number"==typeof t&&ze(t)},Rn.isFunction=Ko,Rn.isInteger=$o,Rn.isLength=Qo,Rn.isMap=es,Rn.isMatch=function(t,e){return t===e||Ir(t,e,sa(e))},Rn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Ir(t,e,sa(e),n)},Rn.isNaN=function(t){return ns(t)&&t!=+t},Rn.isNative=function(t){if(ba(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Br(t)},Rn.isNil=function(t){return null==t},Rn.isNull=function(t){return null===t},Rn.isNumber=ns,Rn.isObject=Jo,Rn.isObjectLike=ts,Rn.isPlainObject=rs,Rn.isRegExp=is,Rn.isSafeInteger=function(t){return $o(t)&&t>=-9007199254740991&&t<=c},Rn.isSet=as,Rn.isString=os,Rn.isSymbol=ss,Rn.isTypedArray=us,Rn.isUndefined=function(t){return t===i},Rn.isWeakMap=function(t){return ts(t)&&ca(t)==D},Rn.isWeakSet=function(t){return ts(t)&&"[object WeakSet]"==Mr(t)},Rn.join=function(t,e){return null==t?"":Ge.call(t,e)},Rn.kebabCase=Ws,Rn.last=Ha,Rn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var a=r;return n!==i&&(a=(a=fs(n))<0?gn(r+a,0):yn(a,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,a):Re(t,Fe,a,!0)},Rn.lowerCase=Gs,Rn.lowerFirst=Xs,Rn.lt=ls,Rn.lte=hs,Rn.max=function(t){return t&&t.length?fr(t,nu,Er):i},Rn.maxBy=function(t,e){return t&&t.length?fr(t,aa(e,2),Er):i},Rn.mean=function(t){return Ve(t,nu)},Rn.meanBy=function(t,e){return Ve(t,aa(e,2))},Rn.min=function(t){return t&&t.length?fr(t,nu,Ar):i},Rn.minBy=function(t,e){return t&&t.length?fr(t,aa(e,2),Ar):i},Rn.stubArray=pu,Rn.stubFalse=vu,Rn.stubObject=function(){return{}},Rn.stubString=function(){return""},Rn.stubTrue=function(){return!0},Rn.multiply=wu,Rn.nth=function(t,e){return t&&t.length?qr(t,fs(e)):i},Rn.noConflict=function(){return ce._===this&&(ce._=Rt),this},Rn.noop=su,Rn.now=ko,Rn.pad=function(t,e,n){t=ys(t);var r=(e=fs(e))?hn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Fi(fe(i),n)+t+Fi(de(i),n)},Rn.padEnd=function(t,e,n){t=ys(t);var r=(e=fs(e))?hn(t):0;return e&&r<e?t+Fi(e-r,n):t},Rn.padStart=function(t,e,n){t=ys(t);var r=(e=fs(e))?hn(t):0;return e&&r<e?Fi(e-r,n)+t:t},Rn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(ys(t).replace(rt,""),e||0)},Rn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ga(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=ds(t),e===i?(e=t,t=0):e=ds(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var a=xn();return yn(t+a*(e-t+se("1e-"+((a+"").length-1))),e)}return Xr(t,e)},Rn.reduce=function(t,e,n){var r=Wo(t)?Ne:Xe,i=arguments.length<3;return r(t,aa(e,4),n,i,hr)},Rn.reduceRight=function(t,e,n){var r=Wo(t)?Oe:Xe,i=arguments.length<3;return r(t,aa(e,4),n,i,cr)},Rn.repeat=function(t,e,n){return e=(n?ga(t,e,n):e===i)?1:fs(e),Yr(ys(t),e)},Rn.replace=function(){var t=arguments,e=ys(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Rn.result=function(t,e,n){var r=-1,a=(e=gi(e,t)).length;for(a||(a=1,t=i);++r<a;){var o=null==t?i:t[Aa(e[r])];o===i&&(r=a,o=n),t=Ko(o)?o.call(t):o}return t},Rn.round=_u,Rn.runInContext=t,Rn.sample=function(t){return(Wo(t)?Zn:Hr)(t)},Rn.size=function(t){if(null==t)return 0;if(Xo(t))return os(t)?hn(t):t.length;var e=ca(t);return e==_||e==S?t.size:Or(t).length},Rn.snakeCase=Ys,Rn.some=function(t,e,n){var r=Wo(t)?Ae:ei;return n&&ga(t,e,n)&&(e=i),r(t,aa(e,3))},Rn.sortedIndex=function(t,e){return ni(t,e)},Rn.sortedIndexBy=function(t,e,n){return ri(t,e,aa(n,2))},Rn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&jo(t[r],e))return r}return-1},Rn.sortedLastIndex=function(t,e){return ni(t,e,!0)},Rn.sortedLastIndexBy=function(t,e,n){return ri(t,e,aa(n,2),!0)},Rn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(jo(t[n],e))return n}return-1},Rn.startCase=Us,Rn.startsWith=function(t,e,n){return t=ys(t),n=null==n?0:ar(fs(n),0,t.length),e=oi(e),t.slice(n,n+e.length)==e},Rn.subtract=Mu,Rn.sum=function(t){return t&&t.length?Ye(t,nu):0},Rn.sumBy=function(t,e){return t&&t.length?Ye(t,aa(e,2)):0},Rn.template=function(t,e,n){var r=Rn.templateSettings;n&&ga(t,e,n)&&(e=i),t=ys(t),e=xs({},e,r,Zi);var a,o,s=xs({},e.imports,r.imports,Zi),u=Ds(s),l=Ke(s,u),h=0,c=e.interpolate||bt,d="__p += '",f=kt((e.escape||bt).source+"|"+c.source+"|"+(c===$?ct:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Nt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(f,(function(e,n,r,i,s,u){return r||(r=i),d+=t.slice(h,u).replace(xt,nn),n&&(a=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e})),d+="';\n";var v=Nt.call(e,"variable")&&e.variable;if(v){if(lt.test(v))throw new wt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(V,""):d).replace(W,"$1").replace(G,"$1;"),d="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=$s((function(){return _t(u,p+"return "+d).apply(i,l)}));if(g.source=d,Zo(g))throw g;return g},Rn.times=function(t,e){if((t=fs(t))<1||t>c)return[];var n=f,r=yn(t,f);e=aa(e),t-=f;for(var i=Ue(r,e);++n<t;)e(n);return i},Rn.toFinite=ds,Rn.toInteger=fs,Rn.toLength=ps,Rn.toLower=function(t){return ys(t).toLowerCase()},Rn.toNumber=vs,Rn.toSafeInteger=function(t){return t?ar(fs(t),-9007199254740991,c):0===t?t:0},Rn.toString=ys,Rn.toUpper=function(t){return ys(t).toUpperCase()},Rn.trim=function(t,e,n){if((t=ys(t))&&(n||e===i))return He(t);if(!t||!(e=oi(e)))return t;var r=cn(t),a=cn(e);return mi(r,Qe(r,a),Je(r,a)+1).join("")},Rn.trimEnd=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.slice(0,dn(t)+1);if(!t||!(e=oi(e)))return t;var r=cn(t);return mi(r,0,Je(r,cn(e))+1).join("")},Rn.trimStart=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=oi(e)))return t;var r=cn(t);return mi(r,Qe(r,cn(e))).join("")},Rn.truncate=function(t,e){var n=30,r="...";if(Jo(e)){var a="separator"in e?e.separator:a;n="length"in e?fs(e.length):n,r="omission"in e?oi(e.omission):r}var o=(t=ys(t)).length;if(rn(t)){var s=cn(t);o=s.length}if(n>=o)return t;var u=n-hn(r);if(u<1)return r;var l=s?mi(s,0,u).join(""):t.slice(0,u);if(a===i)return l+r;if(s&&(u+=l.length-u),is(a)){if(t.slice(u).search(a)){var h,c=l;for(a.global||(a=kt(a.source,ys(dt.exec(a))+"g")),a.lastIndex=0;h=a.exec(c);)var d=h.index;l=l.slice(0,d===i?u:d)}}else if(t.indexOf(oi(a),u)!=u){var f=l.lastIndexOf(a);f>-1&&(l=l.slice(0,f))}return l+r},Rn.unescape=function(t){return(t=ys(t))&&U.test(t)?t.replace(X,fn):t},Rn.uniqueId=function(t){var e=++Ot;return ys(t)+e},Rn.upperCase=Hs,Rn.upperFirst=Zs,Rn.each=yo,Rn.eachRight=mo,Rn.first=Ga,ou(Rn,(gu={},mr(Rn,(function(t,e){Nt.call(Rn.prototype,e)||(gu[e]=t)})),gu),{chain:!1}),Rn.VERSION="4.17.21",ke(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Rn[t].placeholder=Rn})),ke(["drop","take"],(function(t,e){Vn.prototype[t]=function(n){n=n===i?1:gn(fs(n),0);var r=this.__filtered__&&!e?new Vn(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,f),type:t+(r.__dir__<0?"Right":"")}),r},Vn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ke(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Vn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:aa(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),ke(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Vn.prototype[t]=function(){return this[n](1).value()[0]}})),ke(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Vn.prototype[t]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(nu)},Vn.prototype.find=function(t){return this.filter(t).head()},Vn.prototype.findLast=function(t){return this.reverse().find(t)},Vn.prototype.invokeMap=Ur((function(t,e){return"function"==typeof t?new Vn(this):this.map((function(n){return Pr(n,t,e)}))})),Vn.prototype.reject=function(t){return this.filter(Oo(aa(t)))},Vn.prototype.slice=function(t,e){t=fs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Vn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=fs(e))<0?n.dropRight(-e):n.take(e-t)),n)},Vn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Vn.prototype.toArray=function(){return this.take(f)},mr(Vn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),a=Rn[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);a&&(Rn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Vn,l=s[0],h=u||Wo(e),c=function(t){var e=a.apply(Rn,Be([t],s));return r&&d?e[0]:e};h&&n&&"function"==typeof l&&1!=l.length&&(u=h=!1);var d=this.__chain__,f=!!this.__actions__.length,p=o&&!d,v=u&&!f;if(!o&&h){e=v?e:new Vn(this);var g=t.apply(e,s);return g.__actions__.push({func:co,args:[c],thisArg:i}),new Fn(g,d)}return p&&v?t.apply(this,s):(g=this.thru(c),p?r?g.value()[0]:g.value():g)})})),ke(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Pt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Rn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Wo(i)?i:[],t)}return this[n]((function(n){return e.apply(Wo(n)?n:[],t)}))}})),mr(Vn.prototype,(function(t,e){var n=Rn[e];if(n){var r=n.name+"";Nt.call(Tn,r)||(Tn[r]=[]),Tn[r].push({name:e,func:n})}})),Tn[Li(i,2).name]=[{name:"wrapper",func:i}],Vn.prototype.clone=function(){var t=new Vn(this.__wrapped__);return t.__actions__=Ci(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ci(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ci(this.__views__),t},Vn.prototype.reverse=function(){if(this.__filtered__){var t=new Vn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Vn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Wo(t),r=e<0,i=n?t.length:0,a=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=yn(e,t+o);break;case"takeRight":t=gn(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=r?s:o-1,h=this.__iteratees__,c=h.length,d=0,f=yn(u,this.__takeCount__);if(!n||!r&&i==u&&f==u)return ci(t,this.__actions__);var p=[];t:for(;u--&&d<f;){for(var v=-1,g=t[l+=e];++v<c;){var y=h[v],m=y.iteratee,b=y.type,x=m(g);if(2==b)g=x;else if(!x){if(1==b)continue t;break t}}p[d++]=g}return p},Rn.prototype.at=fo,Rn.prototype.chain=function(){return ho(this)},Rn.prototype.commit=function(){return new Fn(this.value(),this.__chain__)},Rn.prototype.next=function(){this.__values__===i&&(this.__values__=cs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},Rn.prototype.plant=function(t){for(var e,n=this;n instanceof qn;){var r=La(n);r.__index__=0,r.__values__=i,e?a.__wrapped__=r:e=r;var a=r;n=n.__wrapped__}return a.__wrapped__=t,e},Rn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Vn){var e=t;return this.__actions__.length&&(e=new Vn(this)),(e=e.reverse()).__actions__.push({func:co,args:[Qa],thisArg:i}),new Fn(e,this.__chain__)}return this.thru(Qa)},Rn.prototype.toJSON=Rn.prototype.valueOf=Rn.prototype.value=function(){return ci(this.__wrapped__,this.__actions__)},Rn.prototype.first=Rn.prototype.head,Zt&&(Rn.prototype[Zt]=function(){return this}),Rn}();ce._=pn,(r=function(){return pn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},703:(t,e,n)=>{"use strict";var r=n(414);function i(){}function a(){}a.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},697:(t,e,n)=>{t.exports=n(703)()},414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var a={},o=[],s=0;s<t.length;s++){var u=t[s],l=r.base?u[0]+r.base:u[0],h=a[l]||0,c="".concat(l," ").concat(h);a[l]=h+1;var d=n(c),f={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==d)e[d].references++,e[d].updater(f);else{var p=i(f,r);r.byIndex=s,e.splice(s,0,{identifier:c,updater:p,references:1})}o.push(c)}return o}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var a=r(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<a.length;o++){var s=n(a[o]);e[s].references--}for(var u=r(t,i),l=0;l<a.length;l++){var h=n(a[l]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}a=u}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.nc=void 0;var r={};(()=>{"use strict";n.r(r),n.d(r,{Cytoscape:()=>ar});var t=n(379),e=n.n(t),i=n(795),a=n.n(i),o=n(569),s=n.n(o),u=n(565),l=n.n(u),h=n(216),c=n.n(h),d=n(589),f=n.n(d),p=n(372),v={};v.styleTagTransform=f(),v.setAttributes=l(),v.insert=s().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=c(),e()(p.Z,v),p.Z&&p.Z.locals&&p.Z.locals;const g=window.React;var y=n.n(g),m=n(697),b=n.n(m),x=n(58),w=n.n(x);const{string:_,array:M,object:E,number:k,bool:C,oneOfType:S,any:P,func:T}=b(),D={id:_,className:_,style:S([_,E]),elements:S([M,P]),stylesheet:S([M,P]),layout:S([E,P]),pan:S([E,P]),zoom:k,panningEnabled:C,userPanningEnabled:C,minZoom:k,maxZoom:k,zoomingEnabled:C,userZoomingEnabled:C,boxSelectionEnabled:C,autoungrabify:C,autolock:C,autounselectify:C,get:T,toJson:T,diff:T,forEach:T,cy:T,headless:C,styleEnabled:C,hideEdgesOnViewport:C,textureOnViewport:C,motionBlur:C,motionBlurOpacity:k,wheelSensitivity:k,pixelRatio:S([_,E])},I=(t,e)=>{if(((t,e)=>null==t||null==e)(t,e)&&(null!=t||null!=e))return!0;if(t===e)return!1;if("object"!=typeof t||"object"!=typeof e)return t!==e;const n=Object.keys(t),r=Object.keys(e),i=n=>t[n]!==e[n];return n.length!==r.length||!(!n.some(i)&&!r.some(i))},B=(t,e)=>null!=t?t[e]:null,N={diff:I,get:B,toJson:t=>t,forEach:(t,e)=>t.forEach(e),elements:[{data:{id:"a",label:"Example node A"}},{data:{id:"b",label:"Example node B"}},{data:{id:"e",source:"a",target:"b"}}],stylesheet:[{selector:"node",style:{label:"data(label)"}}],zoom:1,pan:{x:0,y:0}},O=(t,e,n,r)=>n(B(t,r),B(e,r)),A=(t,e,n,r,i,a)=>{const o=i(i(n,"data"),"id"),s=t.getElementById(o),u={};["data","position","selected","selectable","locked","grabbable","classes"].forEach((t=>{const o=i(n,t);a(o,i(e,t))&&(u[t]=r(o))}));const l=i(n,"scratch");a(l,i(e,"scratch"))&&s.scratch(r(l)),Object.keys(u).length>0&&s.json(u)};class z extends y().Component{static get propTypes(){return D}static get defaultProps(){return N}static normalizeElements(t){if(null!=t.length)return t;{let{nodes:e,edges:n}=t;return null==e&&(e=[]),null==n&&(n=[]),e.concat(n)}}constructor(t){super(t),this.displayName="CytoscapeComponent",this.containerRef=y().createRef()}componentDidMount(){const t=this.containerRef.current,{global:e,headless:n,styleEnabled:r,hideEdgesOnViewport:i,textureOnViewport:a,motionBlur:o,motionBlurOpacity:s,wheelSensitivity:u,pixelRatio:l}=this.props,h=this._cy=new(w())({container:t,headless:n,styleEnabled:r,hideEdgesOnViewport:i,textureOnViewport:a,motionBlur:o,motionBlurOpacity:s,wheelSensitivity:u,pixelRatio:l});e&&(window[e]=h),this.updateCytoscape(null,this.props)}updateCytoscape(t,e){const n=this._cy,{diff:r,toJson:i,get:a,forEach:o}=e;((t,e,n,r,i,a,o)=>{t.batch((()=>{(r===I||O(e,n,r,"elements"))&&((t,e,n,r,i,a,o)=>{const s=[],u=t.collection(),l=[],h={},c={},d=t=>i(i(t,"data"),"id");a(n,(t=>{const e=d(t);c[e]=t})),null!=e&&a(e,(e=>{const n=d(e);h[n]=e,(t=>null!=c[t])(n)||u.merge(t.getElementById(n))})),a(n,(t=>{const e=d(t),n=(t=>h[t])(e);(t=>null!=h[t])(e)?l.push({ele1:n,ele2:t}):s.push(r(t))})),u.length>0&&t.remove(u),s.length>0&&t.add(s),l.forEach((({ele1:e,ele2:n})=>A(t,e,n,r,i,o)))})(t,B(e,"elements"),B(n,"elements"),i,a,o,r),O(e,n,r,"stylesheet")&&((t,e,n,r)=>{const i=t.style();null!=i&&i.fromJson(r(n)).update()})(t,B(e,"stylesheet"),B(n,"stylesheet"),i),["zoom","minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","pan","panningEnabled","userPanningEnabled","boxSelectionEnabled","autoungrabify","autolock","autounselectify"].forEach((a=>{O(e,n,r,a)&&((t,e,n,r,i)=>{t[e](i(r))})(t,a,B(e,a),B(n,a),i)}))})),O(e,n,r,"layout")&&((t,e,n,r)=>{const i=r(n);null!=i&&t.layout(i).run()})(t,B(e,"layout"),B(n,"layout"),i)})(n,t,e,r,i,a,o),null!=e.cy&&e.cy(n)}componentDidUpdate(t){this.updateCytoscape(t,this.props)}componentWillUnmount(){this._cy.destroy()}render(){const{id:t,className:e,style:n}=this.props;return y().createElement("div",{ref:this.containerRef,id:t,className:e,style:n})}}var L=n(486),R=n.n(L);const j={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let q;const F=new Uint8Array(16);function V(){if(!q&&(q="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!q))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return q(F)}const W=[];for(let t=0;t<256;++t)W.push((t+256).toString(16).slice(1));const G=function(t,e,n){if(j.randomUUID&&!e&&!t)return j.randomUUID();const r=(t=t||{}).random||(t.rng||V)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(let t=0;t<16;++t)e[n+t]=r[t];return e}return function(t,e=0){return W[t[e+0]]+W[t[e+1]]+W[t[e+2]]+W[t[e+3]]+"-"+W[t[e+4]]+W[t[e+5]]+"-"+W[t[e+6]]+W[t[e+7]]+"-"+W[t[e+8]]+W[t[e+9]]+"-"+W[t[e+10]]+W[t[e+11]]+W[t[e+12]]+W[t[e+13]]+W[t[e+14]]+W[t[e+15]]}(r)};function X(t){return X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X(t)}function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==X(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==X(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===X(i)?i:String(i)),r)}var i}var U=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shouldResize=!1,this.cy=e,this.curr={},this.prev={},this.marginPercentage={},this.containedZoomMargin=.05,this.toggle=this.toggle.bind(this),this.getViewport=this.getViewport.bind(this),this.updateViewport=this.updateViewport.bind(this),this._xConstrainedZoom=this._xConstrainedZoom.bind(this),this._xChangeMargin=this._xChangeMargin.bind(this),this._yConstrainedZoom=this._yConstrainedZoom.bind(this),this._yChangeMargin=this._yChangeMargin.bind(this),this.resize=this.resize.bind(this)}var e,n;return e=t,n=[{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.shouldResize,e=this.cy;t!==this.shouldResize&&(t?(e.on("render",this.updateViewport),e.on("resize",this.resize),this.updateViewport(e)):(e.removeListener("render",this.updateViewport),e.removeListener("resize",this.resize)),this.shouldResize=t)}},{key:"getViewport",value:function(){var t=this.cy;return{position:t.pan(),zoom:t.zoom(),renderedBB:Object.assign({},t.elements().renderedBoundingBox()),height:t.height(),width:t.width()}}},{key:"updateViewport",value:function(){var t=this.cy;this.prev=this.getViewport(t)}},{key:"_xConstrainedZoom",value:function(t){var e=this.curr,n=this.prev,r=this.marginPercentage.left*e.width;e.position.x=r+(n.position.x-n.renderedBB.x1);var i=e.renderedBB.y1+e.renderedBB.h/2-e.renderedBB.h/n.zoom*t/2;i+=(e.height-n.height)/2,e.position.y=i+(n.position.y-n.renderedBB.y1)}},{key:"_xChangeMargin",value:function(t){var e=this.curr,n=this.prev,r=n.renderedBB.x1+n.renderedBB.w/2,i=r/n.width*t;e.position.x=e.position.x+(i-r)}},{key:"_yConstrainedZoom",value:function(t){var e=this.curr,n=this.prev,r=this.marginPercentage.top*e.height;e.position.y=r+(n.position.y-n.renderedBB.y1);var i=e.renderedBB.x1+e.renderedBB.w/2-e.renderedBB.w/n.zoom*t/2;i+=(e.width-n.width)/2,e.position.x=i+(n.position.x-n.renderedBB.x1)}},{key:"_yChangeMargin",value:function(){var t=this.curr,e=this.prev,n=e.renderedBB.y1+e.renderedBB.h/2,r=n/e.height*t.height;t.position.y=t.position.y+(r-n)}},{key:"resize",value:function(){var t=this.cy;this.curr=this.getViewport(t);var e=this.curr,n=this.prev,r=n.renderedBB.x1>=0&&n.renderedBB.y1>=0&&n.renderedBB.x2<=n.width&&n.renderedBB.y2<=n.height;if(this.marginPercentage={left:n.renderedBB.x1/n.width,top:n.renderedBB.y1/n.height},Math.abs(1-e.width/n.width)>Math.abs(1-e.height/n.height)){var i=n.zoom/n.width*e.width;if(r)for(var a=Math.min((e.renderedBB.y1+e.renderedBB.h/2)*n.zoom*2/e.renderedBB.h,-(e.renderedBB.y1+e.renderedBB.h/2-n.height)*n.zoom*2/e.renderedBB.h)-this.containedZoomMargin,o=n.width/n.zoom*a,s=e.zoom<a?-1:1,u=i<a?-1:1;Math.abs(s)<=1;){if(-1===s){var l=1===u?a:i;this._xConstrainedZoom(l),e.zoom=l,1===u&&(this.prev.position=this.curr.position,this.prev.width=o)}else{var h=-1===u?o:e.width;this._xChangeMargin(h),-1===u&&(this.prev.position=this.curr.position,this.prev.width=o)}s+=2*u}else e.zoom=i,this._xConstrainedZoom(e.zoom)}else{var c=n.zoom/n.height*e.height;if(r)for(var d=Math.min((e.renderedBB.x1+e.renderedBB.w/2)*n.zoom*2/e.renderedBB.w,-(e.renderedBB.x1+e.renderedBB.w/2-n.width)*n.zoom*2/e.renderedBB.w)-this.containedZoomMargin,f=n.height/n.zoom*d,p=e.zoom<d?-1:1,v=c<d?-1:1;Math.abs(p)<=1;){if(-1===p){var g=1===v?d:c;this._yConstrainedZoom(g),e.zoom=g,1===v&&(this.prev.position=this.curr.position,this.prev.height=f)}else{var y=-1===v?f:e.height;this._yChangeMargin(y),-1===v&&(this.prev.position=this.curr.position,this.prev.height=f)}p+=2*v}else e.zoom=c,this._yConstrainedZoom(e.zoom)}return t.zoom({level:e.zoom}),t.pan(e.position),this.prev=this.curr,e}}],n&&Y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();n(686);var H=1,Z=2,K=3,$=5,Q=6378137,J=6356752.314,tt=.0066943799901413165,et=484813681109536e-20,nt=Math.PI/2,rt=1e-10,it=.017453292519943295,at=57.29577951308232,ot=Math.PI/4,st=2*Math.PI,ut=3.14159265359,lt={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const ht={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var ct=/[\s_\-\/\(\)]/g;function dt(t,e){if(t[e])return t[e];for(var n,r=Object.keys(t),i=e.toLowerCase().replace(ct,""),a=-1;++a<r.length;)if((n=r[a]).toLowerCase().replace(ct,"")===i)return t[n]}function ft(t){var e,n,r,i={},a=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){i.rf=parseFloat(t)},lat_0:function(t){i.lat0=t*it},lat_1:function(t){i.lat1=t*it},lat_2:function(t){i.lat2=t*it},lat_ts:function(t){i.lat_ts=t*it},lon_0:function(t){i.long0=t*it},lon_1:function(t){i.long1=t*it},lon_2:function(t){i.long2=t*it},alpha:function(t){i.alpha=parseFloat(t)*it},gamma:function(t){i.rectified_grid_angle=parseFloat(t)},lonc:function(t){i.longc=t*it},x_0:function(t){i.x0=parseFloat(t)},y_0:function(t){i.y0=parseFloat(t)},k_0:function(t){i.k0=parseFloat(t)},k:function(t){i.k0=parseFloat(t)},a:function(t){i.a=parseFloat(t)},b:function(t){i.b=parseFloat(t)},r_a:function(){i.R_A=!0},zone:function(t){i.zone=parseInt(t,10)},south:function(){i.utmSouth=!0},towgs84:function(t){i.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){i.to_meter=parseFloat(t)},units:function(t){i.units=t;var e=dt(ht,t);e&&(i.to_meter=e.to_meter)},from_greenwich:function(t){i.from_greenwich=t*it},pm:function(t){var e=dt(lt,t);i.from_greenwich=(e||parseFloat(t))*it},nadgrids:function(t){"@null"===t?i.datumCode="none":i.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(i.axis=t)},approx:function(){i.approx=!0}};for(e in a)n=a[e],e in o?"function"==typeof(r=o[e])?r(n):i[r]=n:i[e]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i}const pt=function(t){return new wt(t).output()};var vt=1,gt=/\s/,yt=/[A-Za-z]/,mt=/[A-Za-z84_]/,bt=/[,\]]/,xt=/[\d\.E\-\+]/;function wt(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=vt}function _t(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,i=n.reduce((function(t,e){return Mt(e,t),t}),r);e&&(t[e]=i)}function Mt(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void Mt(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var r;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&Mt(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&Mt(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void _t(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return Mt(t,e[n]);return _t(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}wt.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;gt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case vt:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},wt.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(bt.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},wt.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=vt)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=vt,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},wt.prototype.number=function(t){if(!xt.test(t)){if(bt.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},wt.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},wt.prototype.keyword=function(t){if(mt.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=vt)}if(!bt.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},wt.prototype.neutral=function(t){if(yt.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(xt.test(t))return this.word=t,void(this.state=3);if(!bt.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},wt.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Et=.017453292519943295;function kt(t){return t*Et}function Ct(t){var e=pt(t),n=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",n]);var i={};return Mt(e,i),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,r=t.AXIS.length;n<r;++n){var i=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==i[0].indexOf("north")||("y"===i[0]||"lat"===i[0])&&"north"===i[1]?e+="n":-1!==i[0].indexOf("south")||("y"===i[0]||"lat"===i[0])&&"south"===i[1]?e+="s":-1!==i[0].indexOf("east")||("x"===i[0]||"lon"===i[0])&&"east"===i[1]?e+="e":-1===i[0].indexOf("west")&&("x"!==i[0]&&"lon"!==i[0]||"west"!==i[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;function o(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",kt],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",kt],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",kt],["lat0","latitude_of_origin",kt],["lat0","standard_parallel_1",kt],["lat1","standard_parallel_1",kt],["lat2","standard_parallel_2",kt],["azimuth","Azimuth"],["alpha","azimuth",kt],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=kt(t.lat0>0?90:-90)):(t.lat0=kt(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i}function St(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?St[t]=ft(arguments[1]):St[t]=Ct(arguments[1]):St[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?St.apply(e,t):St(t)}));if("string"==typeof t){if(t in St)return St[t]}else"EPSG"in t?St["EPSG:"+t.EPSG]=t:"ESRI"in t?St["ESRI:"+t.ESRI]=t:"IAU2000"in t?St["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(St);const Pt=St;var Tt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],Dt=["3857","900913","3785","102113"];function It(t,e){var n,r;if(t=t||{},!e)return t;for(r in e)void 0!==(n=e[r])&&(t[r]=n);return t}function Bt(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function Nt(t){return t<0?-1:1}function Ot(t){return Math.abs(t)<=ut?t:t-Nt(t)*st}function At(t,e,n){var r=t*n,i=.5*t;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(nt-e))/r}function zt(t,e){for(var n,r,i=.5*t,a=nt-2*Math.atan(e),o=0;o<=15;o++)if(n=t*Math.sin(a),a+=r=nt-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-a,Math.abs(r)<=1e-10)return a;return-9999}const Lt={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Bt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,r=t.x,i=t.y;if(i*at>90&&i*at<-90&&r*at>180&&r*at<-180)return null;if(Math.abs(Math.abs(i)-nt)<=rt)return null;if(this.sphere)e=this.x0+this.a*this.k0*Ot(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(ot+.5*i));else{var a=Math.sin(i),o=At(this.e,i,a);e=this.x0+this.a*this.k0*Ot(r-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r=t.x-this.x0,i=t.y-this.y0;if(this.sphere)n=nt-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var a=Math.exp(-i/(this.a*this.k0));if(-9999===(n=zt(this.e,a)))return null}return e=Ot(this.long0+r/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]};function Rt(t){return t}var jt=[Lt,{init:function(){},forward:Rt,inverse:Rt,names:["longlat","identity"]}],qt={},Ft=[];function Vt(t,e){var n=Ft.length;return t.names?(Ft[n]=t,t.names.forEach((function(t){qt[t.toLowerCase()]=n})),this):(console.log(e),!0)}const Wt={start:function(){jt.forEach(Vt)},add:Vt,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==qt[e]&&Ft[qt[e]]?Ft[qt[e]]:void 0}};var Gt={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Xt=Gt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Gt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Yt={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};var Ut={};function Ht(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Ut[t]||null,isNull:!1}}function Zt(t){return t/3600*Math.PI/180}function Kt(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function $t(t){return t.map((function(t){return[Zt(t.longitudeShift),Zt(t.latitudeShift)]}))}function Qt(t,e,n){return{name:Kt(t,e+8,e+16).trim(),parent:Kt(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Jt(t,e,n,r){for(var i=e+176,a=[],o=0;o<n.gridNodeCount;o++){var s={latitudeShift:t.getFloat32(i+16*o,r),longitudeShift:t.getFloat32(i+16*o+4,r),latitudeAccuracy:t.getFloat32(i+16*o+8,r),longitudeAccuracy:t.getFloat32(i+16*o+12,r)};a.push(s)}return a}function te(t,e){if(!(this instanceof te))return new te(t);e=e||function(t){if(t)throw t};var n=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in Pt}(t))return Pt[t];if(function(t){return Tt.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=Ct(t);if(function(t){var e=dt(t,"authority");if(e){var n=dt(e,"epsg");return n&&Dt.indexOf(n)>-1}}(e))return Pt["EPSG:3857"];var n=function(t){var e=dt(t,"extension");if(e)return dt(e,"proj4")}(e);return n?ft(n):e}return function(t){return"+"===t[0]}(t)?ft(t):void 0}(t);if("object"==typeof n){var r=te.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=dt(Yt,n.datumCode);i&&(n.datum_params=n.datum_params||(i.towgs84?i.towgs84.split(","):null),n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var a=function(t,e,n,r,i){if(!t){var a=dt(Gt,r);a||(a=Xt),t=a.a,e=a.b,n=a.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<rt)&&(i=!0,e=t),{a:t,b:e,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),o=function(t,e,n,r){var i=t*t,a=e*e,o=(i-a)/i,s=0;return r?(i=(t*=1-o*(.16666666666666666+o*(.04722222222222222+.022156084656084655*o)))*t,o=0):s=Math.sqrt(o),{es:o,e:s,ep2:(i-a)/a}}(a.a,a.b,a.rf,n.R_A),s=function(t){return void 0===t?null:t.split(",").map(Ht)}(n.nadgrids),u=n.datum||function(t,e,n,r,i,a,o){var s={};return s.datum_type=void 0===t||"none"===t?$:4,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=H),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=Z,s.datum_params[3]*=et,s.datum_params[4]*=et,s.datum_params[5]*=et,s.datum_params[6]=s.datum_params[6]/1e6+1))),o&&(s.datum_type=K,s.grids=o),s.a=n,s.b=r,s.es=i,s.ep2=a,s}(n.datumCode,n.datum_params,a.a,a.b,o.es,o.ep2,s);It(this,n),It(this,r),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=u,this.init(),e(null,this)}else e(t)}else e(t)}te.projections=Wt,te.projections.start();const ee=te;function ne(t,e,n){var r,i,a,o,s=t.x,u=t.y,l=t.z?t.z:0;if(u<-nt&&u>-1.001*nt)u=-nt;else if(u>nt&&u<1.001*nt)u=nt;else{if(u<-nt)return{x:-1/0,y:-1/0,z:t.z};if(u>nt)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(u),o=Math.cos(u),a=i*i,{x:((r=n/Math.sqrt(1-e*a))+l)*o*Math.cos(s),y:(r+l)*o*Math.sin(s),z:(r*(1-e)+l)*i}}function re(t,e,n,r){var i,a,o,s,u,l,h,c,d,f,p,v,g,y,m,b=t.x,x=t.y,w=t.z?t.z:0;if(i=Math.sqrt(b*b+x*x),a=Math.sqrt(b*b+x*x+w*w),i/n<1e-12){if(y=0,a/n<1e-12)return m=-r,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(x,b);o=w/a,c=(s=i/a)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),d=o*u,g=0;do{g++,l=e*(h=n/Math.sqrt(1-e*d*d))/(h+(m=i*c+w*d-h*(1-e*d*d))),v=(p=o*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*c-(f=s*(1-l)*u)*d,c=f,d=p}while(v*v>1e-24&&g<30);return{x:y,y:Math.atan(p/Math.abs(f)),z:m}}function ie(t){return t===H||t===Z}function ae(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},i={x:Number.NaN,y:Number.NaN},a=[];t:for(var o=0;o<t.grids.length;o++){var s=t.grids[o];if(a.push(s.name),s.isNull){i=r;break}if(s.mandatory,null!==s.grid)for(var u=s.grid.subgrids,l=0,h=u.length;l<h;l++){var c=u[l],d=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,f=c.ll[0]-d,p=c.ll[1]-d,v=c.ll[0]+(c.lim[0]-1)*c.del[0]+d,g=c.ll[1]+(c.lim[1]-1)*c.del[1]+d;if(!(p>r.y||f>r.x||g<r.y||v<r.x||(i=oe(r,e,c),isNaN(i.x))))break t}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*at+" "+r.y*at+" tried: '"+a+"'"),-1):(n.x=-i.x,n.y=i.y,0)}function oe(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var i={x:t.x,y:t.y};i.x-=n.ll[0],i.y-=n.ll[1],i.x=Ot(i.x-Math.PI)+Math.PI;var a=se(i,n);if(e){if(isNaN(a.x))return r;a.x=i.x-a.x,a.y=i.y-a.y;var o,s,u=9;do{if(s=se(a,n),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:i.x-(s.x+a.x),y:i.y-(s.y+a.y)},a.x+=o.x,a.y+=o.y}while(u--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(u<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=Ot(a.x+n.ll[0]),r.y=a.y+n.ll[1]}else isNaN(a.x)||(r.x=t.x+a.x,r.y=t.y+a.y);return r}function se(t,e){var n,r={x:t.x/e.del[0],y:t.y/e.del[1]},i=Math.floor(r.x),a=Math.floor(r.y),o=r.x-1*i,s=r.y-1*a,u={x:Number.NaN,y:Number.NaN};if(i<0||i>=e.lim[0])return u;if(a<0||a>=e.lim[1])return u;n=a*e.lim[0]+i;var l=e.cvs[n][0],h=e.cvs[n][1];n++;var c=e.cvs[n][0],d=e.cvs[n][1];n+=e.lim[0];var f=e.cvs[n][0],p=e.cvs[n][1];n--;var v=e.cvs[n][0],g=e.cvs[n][1],y=o*s,m=o*(1-s),b=(1-o)*(1-s),x=(1-o)*s;return u.x=b*l+m*c+x*v+y*f,u.y=b*h+m*d+x*g+y*p,u}function ue(t,e,n){var r,i,a,o=n.x,s=n.y,u=n.z||0,l={};for(a=0;a<3;a++)if(!e||2!==a||void 0!==n.z)switch(0===a?(r=o,i=-1!=="ew".indexOf(t.axis[a])?"x":"y"):1===a?(r=s,i=-1!=="ns".indexOf(t.axis[a])?"y":"x"):(r=u,i="z"),t.axis[a]){case"e":case"n":l[i]=r;break;case"w":case"s":l[i]=-r;break;case"u":void 0!==n[i]&&(l.z=r);break;case"d":void 0!==n[i]&&(l.z=-r);break;default:return null}return l}function le(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function he(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ce(t,e,n,r){var i,a=void 0!==(n=Array.isArray(n)?le(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if(function(t){he(t.x),he(t.y)}(n),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===H||t.datum.datum_type===Z||t.datum.datum_type===K)&&"WGS84"!==e.datumCode||(e.datum.datum_type===H||e.datum.datum_type===Z||e.datum.datum_type===K)&&"WGS84"!==t.datumCode}(t,e)&&(n=ce(t,i=new ee("WGS84"),n,r),t=i),r&&"enu"!==t.axis&&(n=ue(t,!1,n)),"longlat"===t.projName)n={x:n.x*it,y:n.y*it,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=function(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===H?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==Z||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(t.datum_type===$||e.datum_type===$)return n;var r=t.a,i=t.es;if(t.datum_type===K){if(0!==ae(t,!1,n))return;r=Q,i=tt}var a=e.a,o=e.b,s=e.es;return e.datum_type===K&&(a=Q,o=J,s=tt),i!==s||r!==a||ie(t.datum_type)||ie(e.datum_type)?(n=ne(n,i,r),ie(t.datum_type)&&(n=function(t,e,n){if(e===H)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===Z){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6];return{x:l*(t.x-u*t.y+s*t.z)+r,y:l*(u*t.x+t.y-o*t.z)+i,z:l*(-s*t.x+o*t.y+t.z)+a}}}(n,t.datum_type,t.datum_params)),ie(e.datum_type)&&(n=function(t,e,n){if(e===H)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===Z){var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],h=(t.x-r)/l,c=(t.y-i)/l,d=(t.z-a)/l;return{x:h+u*c-s*d,y:-u*h+c+o*d,z:s*h-o*c+d}}}(n,e.datum_type,e.datum_params)),n=re(n,s,a,o),e.datum_type!==K||0===ae(e,!0,n)?n:void 0):n}(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*at,y:n.y*at,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&"enu"!==e.axis?ue(e,!0,n):(n&&!a&&delete n.z,n)}var de=ee("WGS84");function fe(t,e,n,r){var i,a,o;return Array.isArray(n)?(i=ce(t,e,n,r)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(n.splice(3)):[i.x,i.y,n[2]].concat(n.splice(3)):[i.x,i.y].concat(n.splice(2)):[i.x,i.y]):(a=ce(t,e,n,r),2===(o=Object.keys(n)).length||o.forEach((function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;a[r]=n[r]})),a)}function pe(t){return t instanceof ee?t:t.oProj?t.oProj:ee(t)}const ve=function(t,e,n){t=pe(t);var r,i=!1;return void 0===e?(e=t,t=de,i=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=de,i=!0),e=pe(e),n?fe(t,e,n):(r={forward:function(n,r){return fe(t,e,n,r)},inverse:function(n,r){return fe(e,t,n,r)}},i&&(r.oProj=e),r)};var ge=6,ye="AJSAJS",me="AFAFAF",be=65,xe=73,we=79,_e=86,Me=90;const Ee={forward:ke,inverse:function(t){var e=Te(Ie(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:Ce};function ke(t,e){return e=e||5,function(t,e){var n,r,i,a,o,s,u,l,h,c,d,f="00000"+t.easting,p="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(h=t.easting,c=t.northing,d=De(t.zoneNumber),n=Math.floor(h/1e5),r=Math.floor(c/1e5)%20,i=d-1,a=ye.charCodeAt(i),o=me.charCodeAt(i),l=!1,(s=a+n-1)>Me&&(s=s-Me+be-1,l=!0),(s===xe||a<xe&&s>xe||(s>xe||a<xe)&&l)&&s++,(s===we||a<we&&s>we||(s>we||a<we)&&l)&&++s===xe&&s++,s>Me&&(s=s-Me+be-1),(u=o+r)>_e?(u=u-_e+be-1,l=!0):l=!1,(u===xe||o<xe&&u>xe||(u>xe||o<xe)&&l)&&u++,(u===we||o<we&&u>we||(u>we||o<we)&&l)&&++u===xe&&u++,u>_e&&(u=u-_e+be-1),String.fromCharCode(s)+String.fromCharCode(u))+f.substr(f.length-5,e)+p.substr(p.length-5,e)}(function(t){var e,n,r,i,a,o,s,u=t.lat,l=t.lon,h=6378137,c=.00669438,d=.9996,f=Se(u),p=Se(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60),u>=56&&u<64&&l>=3&&l<12&&(s=32),u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37)),o=Se(6*(s-1)-180+3),e=.006739496752268451,n=h/Math.sqrt(1-c*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),i=e*Math.cos(f)*Math.cos(f);var v,g,y=d*n*((a=Math.cos(f)*(p-o))+(1-r+i)*a*a*a/6+(5-18*r+r*r+72*i-58*e)*a*a*a*a*a/120)+5e5,m=d*(h*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f))+n*Math.tan(f)*(a*a/2+(5-r+9*i+4*i*i)*a*a*a*a/24+(61-58*r+r*r+600*i-2.2240339282485886)*a*a*a*a*a*a/720));return u<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(y),zoneNumber:s,zoneLetter:(v=u,g="Z",84>=v&&v>=72?g="X":72>v&&v>=64?g="W":64>v&&v>=56?g="V":56>v&&v>=48?g="U":48>v&&v>=40?g="T":40>v&&v>=32?g="S":32>v&&v>=24?g="R":24>v&&v>=16?g="Q":16>v&&v>=8?g="P":8>v&&v>=0?g="N":0>v&&v>=-8?g="M":-8>v&&v>=-16?g="L":-16>v&&v>=-24?g="K":-24>v&&v>=-32?g="J":-32>v&&v>=-40?g="H":-40>v&&v>=-48?g="G":-48>v&&v>=-56?g="F":-56>v&&v>=-64?g="E":-64>v&&v>=-72?g="D":-72>v&&v>=-80&&(g="C"),g)}}({lat:t[1],lon:t[0]}),e)}function Ce(t){var e=Te(Ie(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Se(t){return t*(Math.PI/180)}function Pe(t){return t/Math.PI*180}function Te(t){var e=t.northing,n=t.easting,r=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var a,o,s,u,l,h,c,d,f,p=.9996,v=6378137,g=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=n-5e5,b=e;r<"N"&&(b-=1e7),c=6*(i-1)-180+3,a=.006739496752268451,f=(d=b/p/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*d)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*d)+151*y*y*y/96*Math.sin(6*d),o=v/Math.sqrt(1-g*Math.sin(f)*Math.sin(f)),s=Math.tan(f)*Math.tan(f),u=a*Math.cos(f)*Math.cos(f),l=.99330562*v/Math.pow(1-g*Math.sin(f)*Math.sin(f),1.5),h=m/(o*p);var x=f-o*Math.tan(f)/l*(h*h/2-(5+3*s+10*u-4*u*u-9*a)*h*h*h*h/24+(61+90*s+298*u+45*s*s-1.6983531815716497-3*u*u)*h*h*h*h*h*h/720);x=Pe(x);var w,_=(h-(1+2*s+u)*h*h*h/6+(5-2*u+28*s-3*u*u+8*a+24*s*s)*h*h*h*h*h/120)/Math.cos(f);if(_=c+Pe(_),t.accuracy){var M=Te({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});w={top:M.lat,right:M.lon,bottom:x,left:_}}else w={lat:x,lon:_};return w}function De(t){var e=t%ge;return 0===e&&(e=ge),e}function Ie(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,r=null,i="",a=0;!/[A-Z]/.test(e=t.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,a++}var o=parseInt(i,10);if(0===a||a+3>n)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(a++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;r=t.substring(a,a+=2);for(var u=De(o),l=function(t,e){for(var n=ye.charCodeAt(e-1),r=1e5,i=!1;n!==t.charCodeAt(0);){if(++n===xe&&n++,n===we&&n++,n>Me){if(i)throw"Bad character: "+t;n=be,i=!0}r+=1e5}return r}(r.charAt(0),u),h=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=me.charCodeAt(e-1),r=0,i=!1;n!==t.charCodeAt(0);){if(++n===xe&&n++,n===we&&n++,n>_e){if(i)throw"Bad character: "+t;n=be,i=!0}r+=1e5}return r}(r.charAt(1),u);h<Be(s);)h+=2e6;var c=n-a;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,f,p,v=c/2,g=0,y=0;return v>0&&(d=1e5/Math.pow(10,v),f=t.substring(a,a+v),g=parseFloat(f)*d,p=t.substring(a+v),y=parseFloat(p)*d),{easting:g+l,northing:y+h,zoneLetter:s,zoneNumber:o,accuracy:d}}function Be(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Ne(t,e,n){if(!(this instanceof Ne))return new Ne(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ne.fromMGRS=function(t){return new Ne(Ce(t))},Ne.prototype.toMGRS=function(t){return ke([this.x,this.y],t)};const Oe=Ne;var Ae=.046875,ze=.01953125,Le=.01068115234375;function Re(t){var e=[];e[0]=1-t*(.25+t*(Ae+t*(ze+t*Le))),e[1]=t*(.75-t*(Ae+t*(ze+t*Le)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function je(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}function qe(t,e,n){for(var r=1/(1-e),i=t,a=20;a;--a){var o=Math.sin(i),s=1-e*o*o;if(i-=s=(je(i,o,Math.cos(i),n)-t)*(s*Math.sqrt(s))*r,Math.abs(s)<rt)return i}return i}const Fe={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Re(this.es),this.ml0=je(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,r,i=t.x,a=t.y,o=Ot(i-this.long0),s=Math.sin(a),u=Math.cos(a);if(this.es){var l=u*o,h=Math.pow(l,2),c=this.ep2*Math.pow(u,2),d=Math.pow(c,2),f=Math.abs(u)>rt?Math.tan(a):0,p=Math.pow(f,2),v=Math.pow(p,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var g=je(a,s,u,this.en);n=this.a*(this.k0*l*(1+h/6*(1-p+c+h/20*(5-18*p+v+14*c-58*p*c+h/42*(61+179*v-v*p-479*p)))))+this.x0,r=this.a*(this.k0*(g-this.ml0+s*o*l/2*(1+h/12*(5-p+9*c+4*d+h/30*(61+v-58*p+270*c-330*p*c+h/56*(1385+543*v-v*p-3111*p))))))+this.y0}else{var y=u*Math.sin(o);if(Math.abs(Math.abs(y)-1)<rt)return 93;if(n=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,r=u*Math.cos(o)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(r))>=1){if(y-1>rt)return 93;r=0}else r=Math.acos(r);a<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return t.x=n,t.y=r,t},inverse:function(t){var e,n,r,i,a=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(n=qe(e=this.ml0+o/this.k0,this.es,this.en),Math.abs(n)<nt){var s=Math.sin(n),u=Math.cos(n),l=Math.abs(u)>rt?Math.tan(n):0,h=this.ep2*Math.pow(u,2),c=Math.pow(h,2),d=Math.pow(l,2),f=Math.pow(d,2);e=1-this.es*Math.pow(s,2);var p=a*Math.sqrt(e)/this.k0,v=Math.pow(p,2);r=n-(e*=l)*v/(1-this.es)*.5*(1-v/12*(5+3*d-9*h*d+h-4*c-v/30*(61+90*d-252*h*d+45*f+46*h-v/56*(1385+3633*d+4095*f+1574*f*d)))),i=Ot(this.long0+p*(1-v/6*(1+2*d+h-v/20*(5+28*d+24*f+8*h*d+6*h-v/42*(61+662*d+1320*f+720*f*d))))/u)}else r=nt*Nt(o),i=0;else{var g=Math.exp(a/this.k0),y=.5*(g-1/g),m=this.lat0+o/this.k0,b=Math.cos(m);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(y,2))),r=Math.asin(e),o<0&&(r=-r),i=0===y&&0===b?0:Ot(Math.atan2(y,b)+this.long0)}return t.x=i,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Ve(t){var e=Math.exp(t);return(e-1/e)/2}function We(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function Ge(t,e){for(var n,r=2*Math.cos(2*e),i=t.length-1,a=t[i],o=0;--i>=0;)n=r*a-o+t[i],o=a,a=n;return e+n*Math.sin(2*e)}function Xe(t,e,n){for(var r,i,a=Math.sin(e),o=Math.cos(e),s=Ve(n),u=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),l=2*o*u,h=-2*a*s,c=t.length-1,d=t[c],f=0,p=0,v=0;--c>=0;)r=p,i=f,d=l*(p=d)-r-h*(f=v)+t[c],v=h*p-i+l*f;return[(l=a*u)*d-(h=o*s)*v,l*v+h*d]}const Ye={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Fe.init.apply(this),this.forward=Fe.forward,this.inverse=Fe.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var r=Ge(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function(t,e){for(var n,r=2*Math.cos(e),i=t.length-1,a=t[i],o=0;--i>=0;)n=r*a-o+t[i],o=a,a=n;return Math.sin(e)*n}(this.gtu,2*r))},forward:function(t){var e=Ot(t.x-this.long0),n=t.y;n=Ge(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),a=Math.sin(e),o=Math.cos(e);n=Math.atan2(r,o*i),e=Math.atan2(a*i,We(r,i*o)),e=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(We(1,e)+1))),t<0?-e:e}(Math.tan(e));var s,u,l=Xe(this.gtu,2*n,2*e);return n+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,n,r=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var a=Xe(this.utg,2*i,2*r);i+=a[0],r+=a[1],r=Math.atan(Ve(r));var o=Math.sin(i),s=Math.cos(i),u=Math.sin(r),l=Math.cos(r);i=Math.atan2(o*l,We(u,l*s)),e=Ot((r=Math.atan2(u,l*s))+this.long0),n=Ge(this.cgb,i)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]},Ue={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(Ot(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*it,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Ye.init.apply(this),this.forward=Ye.forward,this.inverse=Ye.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function He(t,e){return Math.pow((1-t)/(1+t),e)}const Ze={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ot)/(Math.pow(Math.tan(.5*this.lat0+ot),this.C)*He(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+ot),this.C)*He(this.e*Math.sin(n),this.ratexp))-nt,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+ot)/this.K,1/this.C),i=20;i>0&&(n=2*Math.atan(r*He(this.e*Math.sin(t.y),-.5*this.e))-nt,!(Math.abs(n-t.y)<1e-14));--i)t.y=n;return i?(t.x=e,t.y=n,t):null},names:["gauss"]},Ke={init:function(){Ze.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,r,i;return t.x=Ot(t.x-this.long0),Ze.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=i*n*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,r,i,a;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,a=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(a,this.R2);e=Math.sin(o),n=Math.cos(o),i=Math.asin(n*this.sinc0+t.y*e*this.cosc0/a),r=Math.atan2(t.x*e,a*this.cosc0*n-t.y*this.sinc0*e)}else i=this.phic0,r=0;return t.x=r,t.y=i,Ze.inverse.apply(this,[t]),t.x=Ot(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]},$e={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=rt&&(this.k0=.5*(1+Nt(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=rt&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=rt&&Math.abs(Math.cos(this.lat_ts))>rt&&(this.k0=.5*this.cons*Bt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/At(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Bt(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-nt,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,r,i,a,o,s=t.x,u=t.y,l=Math.sin(u),h=Math.cos(u),c=Ot(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=rt&&Math.abs(u+this.lat0)<=rt?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*l+this.coslat0*h*Math.cos(c)),t.x=this.a*e*h*Math.sin(c)+this.x0,t.y=this.a*e*(this.coslat0*l-this.sinlat0*h*Math.cos(c))+this.y0,t):(n=2*Math.atan(this.ssfn_(u,l,this.e))-nt,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=rt?(a=At(this.e,u*this.con,this.con*l),o=2*this.a*this.k0*a/this.cons,t.x=this.x0+o*Math.sin(s-this.long0),t.y=this.y0-this.con*o*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<rt?(e=2*this.a*this.k0/(1+i*Math.cos(c)),t.y=e*r):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(c))),t.y=e*(this.cosX0*r-this.sinX0*i*Math.cos(c))+this.y0),t.x=e*i*Math.sin(c)+this.x0,t))},inverse:function(t){var e,n,r,i,a;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=rt?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/o),e=Math.abs(this.coslat0)<rt?this.lat0>0?Ot(this.long0+Math.atan2(t.x,-1*t.y)):Ot(this.long0+Math.atan2(t.x,t.y)):Ot(this.long0+Math.atan2(t.x*Math.sin(s),o*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=rt){if(o<=rt)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=o*this.cons/(2*this.a*this.k0),n=this.con*zt(this.e,r),e=this.con*Ot(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else i=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=rt?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+t.y*Math.sin(i)*this.cosX0/o),e=Ot(this.long0+Math.atan2(t.x*Math.sin(i),o*this.cosX0*Math.cos(i)-t.y*this.sinX0*Math.sin(i)))),n=-1*zt(this.e,Math.tan(.5*(nt+a)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(nt+t))*Math.pow((1-e)/(1+e),.5*n)}},Qe={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),a=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*s+this.alpha*a/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),a=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),o=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+o/this.alpha,u=0,l=a,h=-1e3,c=0;Math.abs(l-h)>1e-7;){if(++c>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),h=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]};var Je=1e-7;const tn={init:function(){var t,e,n,r,i,a,o,s,u,l,h,c,d,f=0,p=0,v=0,g=0,y=0,m=0,b=0;this.no_off=(d="object"==typeof(c=this).PROJECTION?Object.keys(c.PROJECTION)[0]:c.PROJECTION,"no_uoff"in c||"no_off"in c||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(d)),this.no_rot="no_rot"in this;var x=!1;"alpha"in this&&(x=!0);var w=!1;if("rectified_grid_angle"in this&&(w=!0),x&&(b=this.alpha),w&&(f=this.rectified_grid_angle*it),x||w)p=this.longc;else if(v=this.long1,y=this.lat1,g=this.long2,m=this.lat2,Math.abs(y-m)<=Je||(t=Math.abs(y))<=Je||Math.abs(t-nt)<=Je||Math.abs(Math.abs(this.lat0)-nt)<=Je||Math.abs(Math.abs(m)-nt)<=Je)throw new Error;var _=1-this.es;e=Math.sqrt(_),Math.abs(this.lat0)>rt?(s=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*s*s,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/_),this.A=this.B*this.k0*e/t,(i=(r=this.B*e/(n*Math.sqrt(t)))*r-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(At(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=i=1),x||w?(x?(h=Math.asin(Math.sin(b)/r),w||(f=b)):(h=f,b=Math.asin(r*Math.sin(h))),this.lam0=p-Math.asin(.5*(i-1/i)*Math.tan(h))/this.B):(a=Math.pow(At(this.e,y,Math.sin(y)),this.B),o=Math.pow(At(this.e,m,Math.sin(m)),this.B),i=this.E/a,u=(o-a)/(o+a),l=((l=this.E*this.E)-o*a)/(l+o*a),(t=v-g)<-Math.pi?g-=st:t>Math.pi&&(g+=st),this.lam0=Ot(.5*(v+g)-Math.atan(l*Math.tan(.5*this.B*(v-g))/u)/this.B),h=Math.atan(2*Math.sin(this.B*Ot(v-this.lam0))/(i-1/i)),f=b=Math.asin(r*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(f),this.cosrot=Math.cos(f),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(ot-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(ot+i))},forward:function(t){var e,n,r,i,a,o,s,u,l={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-nt)>rt){if(e=.5*((a=this.E/Math.pow(At(this.e,t.y,Math.sin(t.y)),this.B))-(o=1/a)),n=.5*(a+o),i=Math.sin(this.B*t.x),r=(e*this.singam-i*this.cosgam)/n,Math.abs(Math.abs(r)-1)<rt)throw new Error;u=.5*this.ArB*Math.log((1-r)/(1+r)),o=Math.cos(this.B*t.x),s=Math.abs(o)<Je?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+i*this.singam,o)}else u=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(l.x=s,l.y=u):(s-=this.u_0,l.x=u*this.cosrot+s*this.sinrot,l.y=s*this.cosrot-u*this.sinrot),l.x=this.a*l.x+this.x0,l.y=this.a*l.y+this.y0,l},inverse:function(t){var e,n,r,i,a,o,s,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*n))-1/r),a=.5*(r+1/r),s=((o=Math.sin(this.BrA*e))*this.cosgam+i*this.singam)/a,Math.abs(Math.abs(s)-1)<rt)u.x=0,u.y=s<0?-nt:nt;else{if(u.y=this.E/Math.sqrt((1+s)/(1-s)),u.y=zt(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(i*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},en={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<rt)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=Bt(this.e,e,n),i=At(this.e,this.lat1,e),a=Math.sin(this.lat2),o=Math.cos(this.lat2),s=Bt(this.e,a,o),u=At(this.e,this.lat2,a),l=At(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>rt?this.ns=Math.log(r/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=rt&&(n=Nt(n)*(nt-2e-10));var r,i,a=Math.abs(Math.abs(n)-nt);if(a>rt)r=At(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((a=n*this.ns)<=0)return null;i=0}var o=this.ns*Ot(e-this.long0);return t.x=this.k0*(i*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(o))+this.y0,t},inverse:function(t){var e,n,r,i,a,o=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+s*s),n=1):(e=-Math.sqrt(o*o+s*s),n=-1);var u=0;if(0!==e&&(u=Math.atan2(n*o,n*s)),0!==e||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),-9999===(i=zt(this.e,r)))return null}else i=-nt;return a=Ot(u/this.ns+this.long0),t.x=a,t.y=i,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},nn={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,r,i,a,o,s,u=t.x,l=t.y,h=Ot(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),r=-h*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),a=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),o=this.n*a,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(o)/1,t.x=s*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,r,i,a,o,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(s=1),o=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]};function rn(t,e,n,r,i){return t*i-e*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)}function an(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function on(t){return.375*t*(1+.25*t*(1+.46875*t))}function sn(t){return.05859375*t*t*(1+.75*t)}function un(t){return t*t*t*(35/3072)}function ln(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function hn(t){return Math.abs(t)<nt?t:t-Nt(t)*Math.PI}function cn(t,e,n,r,i){var a,o;a=t/e;for(var s=0;s<15;s++)if(a+=o=(t-(e*a-n*Math.sin(2*a)+r*Math.sin(4*a)-i*Math.sin(6*a)))/(e-2*n*Math.cos(2*a)+4*r*Math.cos(4*a)-6*i*Math.cos(6*a)),Math.abs(o)<=1e-10)return a;return NaN}const dn={init:function(){this.sphere||(this.e0=an(this.es),this.e1=on(this.es),this.e2=sn(this.es),this.e3=un(this.es),this.ml0=this.a*rn(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,r=t.x,i=t.y;if(r=Ot(r-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var a=Math.sin(i),o=Math.cos(i),s=ln(this.a,this.e,a),u=Math.tan(i)*Math.tan(i),l=r*Math.cos(i),h=l*l,c=this.es*o*o/(1-this.es);e=s*l*(1-h*u*(1/6-(8-u+8*c)*h/120)),n=this.a*rn(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*a/o*h*(.5+(5-u+6*c)*h/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r=t.x/this.a,i=t.y/this.a;if(this.sphere){var a=i+this.lat0;e=Math.asin(Math.sin(a)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(a))}else{var o=cn(this.ml0/this.a+i,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-nt)<=rt)return t.x=this.long0,t.y=nt,i<0&&(t.y*=-1),t;var s=ln(this.a,this.e,Math.sin(o)),u=s*s*s/this.a/this.a*(1-this.es),l=Math.pow(Math.tan(o),2),h=r*this.a/s,c=h*h;e=o-s*Math.tan(o)/u*h*h*(.5-(1+3*l)*h*h/24),n=h*(1-c*(l/3+(1+3*l)*l*c/15))/Math.cos(o)}return t.x=Ot(n+this.long0),t.y=hn(e),t},names:["Cassini","Cassini_Soldner","cass"]};function fn(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}const pn={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-nt)<rt?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<rt?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=fn(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=.3333333333333333*t,e=t*t,n[0]+=.17222222222222222*e,n[1]=.06388888888888888*e,e*=t,n[0]+=.10257936507936508*e,n[1]+=.0664021164021164*e,n[2]=.016415012942191543*e,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=fn(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,r,i,a,o,s,u,l,h,c=t.x,d=t.y;if(c=Ot(c-this.long0),this.sphere){if(a=Math.sin(d),h=Math.cos(d),r=Math.cos(c),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+h*r:1+this.sinph0*a+this.cosph0*h*r)<=rt)return null;e=(n=Math.sqrt(2/n))*h*Math.sin(c),n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*h*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(d+this.lat0)<rt)return null;n=ot-.5*d,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(c),n*=r}}else{switch(s=0,u=0,l=0,r=Math.cos(c),i=Math.sin(c),a=Math.sin(d),o=fn(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=o/this.qp,u=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:l=1+this.sinb1*s+this.cosb1*u*r;break;case this.EQUIT:l=1+u*r;break;case this.N_POLE:l=nt+d,o=this.qp-o;break;case this.S_POLE:l=d-nt,o=this.qp+o}if(Math.abs(l)<rt)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:l=Math.sqrt(2/l),n=this.mode===this.OBLIQ?this.ymf*l*(this.cosb1*s-this.sinb1*u*r):(l=Math.sqrt(2/(1+u*r)))*s*this.ymf,e=this.xmf*l*u*i;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(l=Math.sqrt(o))*i,n=r*(this.mode===this.S_POLE?l:-l)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,i,a,o,s,u,l,h,c=t.x/this.a,d=t.y/this.a;if(this.sphere){var f,p=0,v=0;if((n=.5*(f=Math.sqrt(c*c+d*d)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(v=Math.sin(n),p=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(f)<=rt?0:Math.asin(d*v/f),c*=v,d=p*f;break;case this.OBLIQ:n=Math.abs(f)<=rt?this.lat0:Math.asin(p*this.sinph0+d*v*this.cosph0/f),c*=v*this.cosph0,d=(p-Math.sin(n)*this.sinph0)*f;break;case this.N_POLE:d=-d,n=nt-n;break;case this.S_POLE:n-=nt}e=0!==d||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,d):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,d*=this.dd,(o=Math.sqrt(c*c+d*d))<rt)return t.x=this.long0,t.y=this.lat0,t;i=2*Math.asin(.5*o/this.rq),r=Math.cos(i),c*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+d*i*this.cosb1/o,a=this.qp*s,d=o*this.cosb1*r-d*this.sinb1*i):(s=d*i/o,a=this.qp*s,d=o*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),!(a=c*c+d*d))return t.x=this.long0,t.y=this.lat0,t;s=1-a/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(c,d),h=(u=Math.asin(s))+u,n=u+(l=this.apa)[0]*Math.sin(h)+l[1]*Math.sin(h+h)+l[2]*Math.sin(h+h+h)}return t.x=Ot(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function vn(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}const gn={init:function(){Math.abs(this.lat1+this.lat2)<rt||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Bt(this.e3,this.sin_po,this.cos_po),this.qs1=fn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Bt(this.e3,this.sin_po,this.cos_po),this.qs2=fn(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=fn(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>rt?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=fn(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,a=this.ns0*Ot(e-this.long0),o=i*Math.sin(a)+this.x0,s=this.rh-i*Math.cos(a)+this.y0;return t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i,a,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),i=0,0!==e&&(i=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,o=this.phi1z(this.e3,n)),a=Ot(i/this.ns0+this.long0),t.x=a,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,r,i,a,o=vn(.5*e);if(t<rt)return o;for(var s=t*t,u=1;u<=25;u++)if(o+=a=.5*(i=1-(r=t*(n=Math.sin(o)))*r)*i/Math.cos(o)*(e/(1-s)-n/i+.5/t*Math.log((1-r)/(1+r))),Math.abs(a)<=1e-7)return o;return null}},yn={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,r,i,a,o,s,u=t.x,l=t.y;return r=Ot(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),(a=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(a)<=rt?(o=this.x0+1*this.a*n*Math.sin(r)/a,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)/a):(o=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*i)),t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i,a,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),n=Math.sin(i),o=vn((r=Math.cos(i))*this.sin_p14+t.y*n*this.cos_p14/e),a=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),a=Ot(this.long0+a)):(o=this.phic0,a=0),t.x=a,t.y=o,t},names:["gnom"]},mn={init:function(){this.sphere||(this.k0=Bt(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,r=t.x,i=t.y,a=Ot(r-this.long0);if(this.sphere)e=this.x0+this.a*a*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var o=fn(this.e,Math.sin(i));e=this.x0+this.a*this.k0*a,n=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Ot(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*nt:nt;for(var r,i,a,o,s=Math.asin(.5*e),u=0;u<30;u++)if(i=Math.sin(s),a=Math.cos(s),o=t*i,s+=r=Math.pow(1-o*o,2)/(2*a)*(e/(1-t*t)-i/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(r)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=Ot(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]},bn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,r=Ot(e-this.long0),i=hn(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,n=t.y;return t.x=Ot(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=hn(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},xn={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=an(this.es),this.e1=on(this.es),this.e2=sn(this.es),this.e3=un(this.es),this.ml0=this.a*rn(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,r,i=t.x,a=t.y,o=Ot(i-this.long0);if(r=o*Math.sin(a),this.sphere)Math.abs(a)<=rt?(e=this.a*o,n=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(a),n=this.a*(hn(a-this.lat0)+(1-Math.cos(r))/Math.tan(a)));else if(Math.abs(a)<=rt)e=this.a*o,n=-1*this.ml0;else{var s=ln(this.a,this.e,Math.sin(a))/Math.tan(a);e=s*Math.sin(r),n=this.a*rn(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,r,i,a,o,s,u,l;if(r=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=rt)e=Ot(r/this.a+this.long0),n=0;else{var h;for(o=this.lat0+i/this.a,s=r*r/this.a/this.a+o*o,u=o,a=20;a;--a)if(u+=l=-1*(o*(u*(h=Math.tan(u))+1)-u-.5*(u*u+s)*h)/((u-o)/h-1),Math.abs(l)<=rt){n=u;break}e=Ot(this.long0+Math.asin(r*Math.tan(u)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=rt)n=0,e=Ot(this.long0+r/this.a);else{var c,d,f,p,v;for(o=(this.ml0+i)/this.a,s=r*r/this.a/this.a+o*o,u=o,a=20;a;--a)if(v=this.e*Math.sin(u),c=Math.sqrt(1-v*v)*Math.tan(u),d=this.a*rn(this.e0,this.e1,this.e2,this.e3,u),f=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(o*(c*(p=d/this.a)+1)-p-.5*c*(p*p+s))/(this.es*Math.sin(2*u)*(p*p+s-2*o*p)/(4*c)+(o-p)*(c*f-2/Math.sin(2*u))-f),Math.abs(l)<=rt){n=u;break}c=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=Ot(this.long0+Math.asin(r*c/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]},wn={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,r=t.y-this.lat0,i=n-this.long0,a=r/et*1e-5,o=i,s=1,u=0;for(e=1;e<=10;e++)s*=a,u+=this.A[e]*s;var l,h=u,c=o,d=1,f=0,p=0,v=0;for(e=1;e<=6;e++)l=f*h+d*c,d=d*h-f*c,f=l,p=p+this.B_re[e]*d-this.B_im[e]*f,v=v+this.B_im[e]*d+this.B_re[e]*f;return t.x=v*this.a+this.x0,t.y=p*this.a+this.y0,t},inverse:function(t){var e,n,r=t.x,i=t.y,a=r-this.x0,o=(i-this.y0)/this.a,s=a/this.a,u=1,l=0,h=0,c=0;for(e=1;e<=6;e++)n=l*o+u*s,u=u*o-l*s,l=n,h=h+this.C_re[e]*u-this.C_im[e]*l,c=c+this.C_im[e]*u+this.C_re[e]*l;for(var d=0;d<this.iterations;d++){var f,p=h,v=c,g=o,y=s;for(e=2;e<=6;e++)f=v*h+p*c,p=p*h-v*c,v=f,g+=(e-1)*(this.B_re[e]*p-this.B_im[e]*v),y+=(e-1)*(this.B_im[e]*p+this.B_re[e]*v);p=1,v=0;var m=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)f=v*h+p*c,p=p*h-v*c,v=f,m+=e*(this.B_re[e]*p-this.B_im[e]*v),b+=e*(this.B_im[e]*p+this.B_re[e]*v);var x=m*m+b*b;h=(g*m+y*b)/x,c=(y*m-g*b)/x}var w=h,_=c,M=1,E=0;for(e=1;e<=9;e++)M*=w,E+=this.D[e]*M;var k=this.lat0+E*et*1e5,C=this.long0+_;return t.x=C,t.y=k,t},names:["New_Zealand_Map_Grid","nzmg"]},_n={init:function(){},forward:function(t){var e=t.x,n=t.y,r=Ot(e-this.long0),i=this.x0+this.a*r,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=i,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=Ot(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]},Mn={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Re(this.es)},forward:function(t){var e,n,r=t.x,i=t.y;if(r=Ot(r-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(i),o=20;o;--o){var s=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<rt)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);n=this.a*je(i,u,l,this.en),e=this.a*r*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=vn((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=vn(Math.sin(e)/this.n)),n=Ot(n+this.long0),e=hn(e)):(e=qe(t.y/this.a,this.es,this.en),(r=Math.abs(e))<nt?(r=Math.sin(e),n=Ot(this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)))):r-rt<nt&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]},En={init:function(){},forward:function(t){for(var e=t.x,n=t.y,r=Ot(e-this.long0),i=n,a=Math.PI*Math.sin(n);;){var o=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=o,Math.abs(o)<rt)break}i/=2,Math.PI/2-Math.abs(n)<rt&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=Ot(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return t.x=r,t.y=i,t},names:["Mollweide","moll"]},kn={init:function(){Math.abs(this.lat1+this.lat2)<rt||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=an(this.es),this.e1=on(this.es),this.e2=sn(this.es),this.e3=un(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Bt(this.e,this.sinphi,this.cosphi),this.ml1=rn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<rt?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Bt(this.e,this.sinphi,this.cosphi),this.ml2=rn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=rn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var i=rn(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-i)}var a=this.ns*Ot(n-this.long0),o=this.x0+e*Math.sin(a),s=this.y0+this.rh-e*Math.cos(a);return t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var a=0;return 0!==n&&(a=Math.atan2(e*t.x,e*t.y)),this.sphere?(i=Ot(this.long0+a/this.ns),r=hn(this.g-n/this.a),t.x=i,t.y=r,t):(r=cn(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),i=Ot(this.long0+a/this.ns),t.x=i,t.y=r,t)},names:["Equidistant_Conic","eqdc"]},Cn={init:function(){this.R=this.a},forward:function(t){var e,n,r=t.x,i=t.y,a=Ot(r-this.long0);Math.abs(i)<=rt&&(e=this.x0+this.R*a,n=this.y0);var o=vn(2*Math.abs(i/Math.PI));(Math.abs(a)<=rt||Math.abs(Math.abs(i)-nt)<=rt)&&(e=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var s=.5*Math.abs(Math.PI/a-a/Math.PI),u=s*s,l=Math.sin(o),h=Math.cos(o),c=h/(l+h-1),d=c*c,f=c*(2/l-1),p=f*f,v=Math.PI*this.R*(s*(c-p)+Math.sqrt(u*(c-p)*(c-p)-(p+u)*(d-p)))/(p+u);a<0&&(v=-v),e=this.x0+v;var g=u+c;return v=Math.PI*this.R*(f*g-s*Math.sqrt((p+u)*(u+1)-g*g))/(p+u),n=i>=0?this.y0+v:this.y0-v,t.x=e,t.y=n,t},inverse:function(t){var e,n,r,i,a,o,s,u,l,h,c,d;return t.x-=this.x0,t.y-=this.y0,c=Math.PI*this.R,a=(r=t.x/c)*r+(i=t.y/c)*i,c=3*(i*i/(u=-2*(o=-Math.abs(i)*(1+a))+1+2*i*i+a*a)+(2*(s=o-2*i*i+r*r)*s*s/u/u/u-9*o*s/u/u)/27)/(l=(o-s*s/3/u)/u)/(h=2*Math.sqrt(-l/3)),Math.abs(c)>1&&(c=c>=0?1:-1),d=Math.acos(c)/3,n=t.y>=0?(-h*Math.cos(d+Math.PI/3)-s/3/u)*Math.PI:-(-h*Math.cos(d+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(r)<rt?this.long0:Ot(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(r*r-i*i)+a*a))/2/r),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},Sn={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,a,o,s,u,l,h,c,d,f,p,v,g,y,m,b,x,w,_,M=t.x,E=t.y,k=Math.sin(t.y),C=Math.cos(t.y),S=Ot(M-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=rt?(t.x=this.x0+this.a*(nt-E)*Math.sin(S),t.y=this.y0-this.a*(nt-E)*Math.cos(S),t):Math.abs(this.sin_p12+1)<=rt?(t.x=this.x0+this.a*(nt+E)*Math.sin(S),t.y=this.y0+this.a*(nt+E)*Math.cos(S),t):(m=this.sin_p12*k+this.cos_p12*C*Math.cos(S),y=(g=Math.acos(m))?g/Math.sin(g):1,t.x=this.x0+this.a*y*C*Math.sin(S),t.y=this.y0+this.a*y*(this.cos_p12*k-this.sin_p12*C*Math.cos(S)),t):(e=an(this.es),n=on(this.es),r=sn(this.es),i=un(this.es),Math.abs(this.sin_p12-1)<=rt?(a=this.a*rn(e,n,r,i,nt),o=this.a*rn(e,n,r,i,E),t.x=this.x0+(a-o)*Math.sin(S),t.y=this.y0-(a-o)*Math.cos(S),t):Math.abs(this.sin_p12+1)<=rt?(a=this.a*rn(e,n,r,i,nt),o=this.a*rn(e,n,r,i,E),t.x=this.x0+(a+o)*Math.sin(S),t.y=this.y0+(a+o)*Math.cos(S),t):(s=k/C,u=ln(this.a,this.e,this.sin_p12),l=ln(this.a,this.e,k),h=Math.atan((1-this.es)*s+this.es*u*this.sin_p12/(l*C)),b=0===(c=Math.atan2(Math.sin(S),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(S)))?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(c)-Math.PI)<=rt?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(S)*Math.cos(h)/Math.sin(c)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),g=u*b*(1-(x=b*b)*(v=(f=this.e*this.cos_p12*Math.cos(c)/Math.sqrt(1-this.es))*f)*(1-v)/6+(w=x*b)/8*(p=d*f)*(1-2*v)+(_=w*b)/120*(v*(4-7*v)-3*d*d*(1-7*v))-_*b/48*p),t.x=this.x0+g*Math.sin(c),t.y=this.y0+g*Math.cos(c),t))},inverse:function(t){var e,n,r,i,a,o,s,u,l,h,c,d,f,p,v,g,y,m,b,x,w,_,M;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*nt*this.a)return;return n=e/this.a,r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(e)<=rt?o=this.lat0:(o=vn(i*this.sin_p12+t.y*r*this.cos_p12/e),s=Math.abs(this.lat0)-nt,a=Math.abs(s)<=rt?this.lat0>=0?Ot(this.long0+Math.atan2(t.x,-t.y)):Ot(this.long0-Math.atan2(-t.x,t.y)):Ot(this.long0+Math.atan2(t.x*r,e*this.cos_p12*i-t.y*this.sin_p12*r))),t.x=a,t.y=o,t}return u=an(this.es),l=on(this.es),h=sn(this.es),c=un(this.es),Math.abs(this.sin_p12-1)<=rt?(o=cn(((d=this.a*rn(u,l,h,c,nt))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,l,h,c),a=Ot(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=o,t):Math.abs(this.sin_p12+1)<=rt?(d=this.a*rn(u,l,h,c,nt),o=cn(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,u,l,h,c),a=Ot(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),v=Math.atan2(t.x,t.y),f=ln(this.a,this.e,this.sin_p12),g=Math.cos(v),m=-(y=this.e*this.cos_p12*g)*y/(1-this.es),b=3*this.es*(1-m)*this.sin_p12*this.cos_p12*g/(1-this.es),_=1-m*(w=(x=e/f)-m*(1+m)*Math.pow(x,3)/6-b*(1+3*m)*Math.pow(x,4)/24)*w/2-x*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*g),a=Ot(this.long0+Math.asin(Math.sin(v)*Math.sin(w)/Math.cos(p))),M=Math.sin(p),o=Math.atan2((M-this.es*_*this.sin_p12)*Math.tan(p),M*(1-this.es)),t.x=a,t.y=o,t)},names:["Azimuthal_Equidistant","aeqd"]},Pn={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,r,i,a,o,s,u=t.x,l=t.y;return r=Ot(u-this.long0),e=Math.sin(l),n=Math.cos(l),i=Math.cos(r),((a=this.sin_p14*e+this.cos_p14*n*i)>0||Math.abs(a)<=rt)&&(o=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*i)),t.x=o,t.y=s,t},inverse:function(t){var e,n,r,i,a,o,s;return t.x-=this.x0,t.y-=this.y0,n=vn((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(e)<=rt?(s=this.lat0,t.x=o,t.y=s,t):(s=vn(i*this.sin_p14+t.y*r*this.cos_p14/e),a=Math.abs(this.lat0)-nt,Math.abs(a)<=rt?(o=this.lat0>=0?Ot(this.long0+Math.atan2(t.x,-t.y)):Ot(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=s,t):(o=Ot(this.long0+Math.atan2(t.x*r,e*this.cos_p14*i-t.y*this.sin_p14*r)),t.x=o,t.y=s,t))},names:["ortho"]};var Tn=1,Dn=2,In=3,Bn=4;function Nn(t,e,n,r){var i;return t<rt?(r.value=Tn,i=0):(i=Math.atan2(e,n),Math.abs(i)<=ot?r.value=Tn:i>ot&&i<=nt+ot?(r.value=Dn,i-=nt):i>nt+ot||i<=-(nt+ot)?(r.value=In,i=i>=0?i-ut:i+ut):(r.value=Bn,i+=nt)),i}function On(t,e){var n=t+e;return n<-ut?n+=st:n>+ut&&(n-=st),n}const An={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=nt-ot/2?this.face=5:this.lat0<=-(nt-ot/2)?this.face=6:Math.abs(this.long0)<=ot?this.face=1:Math.abs(this.long0)<=nt+ot?this.face=this.long0>0?2:4:this.face=3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,r,i,a,o,s={x:0,y:0},u={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,5===this.face)i=nt-e,n>=ot&&n<=nt+ot?(u.value=Tn,r=n-nt):n>nt+ot||n<=-(nt+ot)?(u.value=Dn,r=n>0?n-ut:n+ut):n>-(nt+ot)&&n<=-ot?(u.value=In,r=n+nt):(u.value=Bn,r=n);else if(6===this.face)i=nt+e,n>=ot&&n<=nt+ot?(u.value=Tn,r=-n+nt):n<ot&&n>=-ot?(u.value=Dn,r=-n):n<-ot&&n>=-(nt+ot)?(u.value=In,r=-n-nt):(u.value=Bn,r=n>0?-n+ut:-n-ut);else{var l,h,c,d,f,p;2===this.face?n=On(n,+nt):3===this.face?n=On(n,+ut):4===this.face&&(n=On(n,-nt)),d=Math.sin(e),f=Math.cos(e),p=Math.sin(n),l=f*Math.cos(n),h=f*p,c=d,1===this.face?r=Nn(i=Math.acos(l),c,h,u):2===this.face?r=Nn(i=Math.acos(h),c,-l,u):3===this.face?r=Nn(i=Math.acos(-l),c,-h,u):4===this.face?r=Nn(i=Math.acos(-h),c,l,u):(i=r=0,u.value=Tn)}return o=Math.atan(12/ut*(r+Math.acos(Math.sin(r)*Math.cos(ot))-nt)),a=Math.sqrt((1-Math.cos(i))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(r))))),u.value===Dn?o+=nt:u.value===In?o+=ut:u.value===Bn&&(o+=1.5*ut),s.x=a*Math.cos(o),s.y=a*Math.sin(o),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,n,r,i,a,o,s,u,l,h,c,d,f={lam:0,phi:0},p={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?p.value=Tn:t.y>=0&&t.y>=Math.abs(t.x)?(p.value=Dn,e-=nt):t.x<0&&-t.x>=Math.abs(t.y)?(p.value=In,e=e<0?e+ut:e-ut):(p.value=Bn,e+=nt),l=ut/12*Math.tan(e),a=Math.sin(l)/(Math.cos(l)-1/Math.sqrt(2)),o=Math.atan(a),(s=1-(r=Math.cos(e))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?s=-1:s>1&&(s=1),5===this.face)u=Math.acos(s),f.phi=nt-u,p.value===Tn?f.lam=o+nt:p.value===Dn?f.lam=o<0?o+ut:o-ut:p.value===In?f.lam=o-nt:f.lam=o;else if(6===this.face)u=Math.acos(s),f.phi=u-nt,p.value===Tn?f.lam=-o+nt:p.value===Dn?f.lam=-o:p.value===In?f.lam=-o-nt:f.lam=o<0?-o-ut:-o+ut;else{var v,g,y;l=(v=s)*v,g=(l+=(y=l>=1?0:Math.sqrt(1-l)*Math.sin(o))*y)>=1?0:Math.sqrt(1-l),p.value===Dn?(l=g,g=-y,y=l):p.value===In?(g=-g,y=-y):p.value===Bn&&(l=g,g=y,y=-l),2===this.face?(l=v,v=-g,g=l):3===this.face?(v=-v,g=-g):4===this.face&&(l=v,v=g,g=-l),f.phi=Math.acos(-y)-nt,f.lam=Math.atan2(g,v),2===this.face?f.lam=On(f.lam,-nt):3===this.face?f.lam=On(f.lam,-ut):4===this.face&&(f.lam=On(f.lam,+nt))}return 0!==this.es&&(h=f.phi<0?1:0,c=Math.tan(f.phi),d=this.b/Math.sqrt(c*c+this.one_minus_f_squared),f.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),h&&(f.phi=-f.phi)),f.lam+=this.long0,t.x=f.lam,t.y=f.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var zn=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ln=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Rn=.8487,jn=1.3523,qn=at/5,Fn=1/qn,Vn=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};const Wn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=Ot(t.x-this.long0),n=Math.abs(t.y),r=Math.floor(n*qn);r<0?r=0:r>=18&&(r=17);var i={x:Vn(zn[r],n=at*(n-Fn*r))*e,y:Vn(Ln[r],n)};return t.y<0&&(i.y=-i.y),i.x=i.x*this.a*Rn+this.x0,i.y=i.y*this.a*jn+this.y0,i},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*Rn),y:Math.abs(t.y-this.y0)/(this.a*jn)};if(e.y>=1)e.x/=zn[18][0],e.y=t.y<0?-nt:nt;else{var n=Math.floor(18*e.y);for(n<0?n=0:n>=18&&(n=17);;)if(Ln[n][0]>e.y)--n;else{if(!(Ln[n+1][0]<=e.y))break;++n}var r=Ln[n],i=5*(e.y-r[0])/(Ln[n+1][0]-r[0]);i=function(t,e,n,r){for(var i=e;r;--r){var a=t(i);if(i-=a,Math.abs(a)<1e-10)break}return i}((function(t){return(Vn(r,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(r,t)}),i,0,100),e.x/=Vn(zn[n],i),e.y=(5*n+i)*it,t.y<0&&(e.y=-e.y)}return e.x=Ot(e.x+this.long0),e},names:["Robinson","robin"]},Gn={init:function(){this.name="geocent"},forward:function(t){return ne(t,this.es,this.a)},inverse:function(t){return re(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var Xn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const Yn={init:function(){if(Object.keys(Xn).forEach(function(t){if(void 0===this[t])this[t]=Xn[t].def;else{if(Xn[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Xn[t].num&&(this[t]=parseFloat(this[t]))}Xn[t].degrees&&(this[t]=this[t]*it)}.bind(this)),Math.abs(Math.abs(this.lat0)-nt)<rt?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<rt?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,r,i,a=Math.sin(t.y),o=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case 3:n=this.sinph0*a+this.cosph0*o*s;break;case 2:n=o*s;break;case 1:n=-a;break;case 0:n=a}switch(e=(n=this.pn1/(this.p-n))*o*Math.sin(t.x),this.mode){case 3:n*=this.cosph0*a-this.sinph0*o*s;break;case 2:n*=a;break;case 0:n*=-o*s;break;case 1:n*=o*s}return i=1/((r=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*i,n=r*i,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,r,i={x:t.x,y:t.y};r=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var a=We(t.x,t.y);if(Math.abs(a)<rt)i.x=0,i.y=t.y;else{var o,s;switch(s=1-a*a*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/a+a/this.pn1),o=Math.sqrt(1-s*s),this.mode){case 3:i.y=Math.asin(o*this.sinph0+t.y*s*this.cosph0/a),t.y=(o-this.sinph0*Math.sin(i.y))*a,t.x*=s*this.cosph0;break;case 2:i.y=Math.asin(t.y*s/a),t.y=o*a,t.x*=s;break;case 0:i.y=Math.asin(o),t.y=-t.y;break;case 1:i.y=-Math.asin(o)}i.x=Math.atan2(t.x,t.y)}return t.x=i.x+this.long0,t.y=i.y,t},names:["Tilted_Perspective","tpers"]},Un={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,r,i,a=t.x,o=t.y;if(a-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var s=this.radius_p/We(this.radius_p*Math.cos(o),Math.sin(o));if(n=s*Math.cos(a)*Math.cos(o),r=s*Math.sin(a)*Math.cos(o),i=s*Math.sin(o),(this.radius_g-n)*n-r*r-i*i*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/We(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/We(r,e)))}else"sphere"===this.shape&&(e=Math.cos(o),n=Math.cos(a)*e,r=Math.sin(a)*e,i=Math.sin(o),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/We(i,e)),t.y=this.radius_g_1*Math.atan(i/e)):(t.x=this.radius_g_1*Math.atan(r/e),t.y=this.radius_g_1*Math.atan(i/We(r,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,r,i,a=-1,o=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*We(1,s)):(o=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*We(1,o));var u=s/this.radius_p;if(e=o*o+u*u+a*a,(r=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),a=this.radius_g+i*a,o*=i,s*=i,t.x=Math.atan2(o,a),t.y=Math.atan(s*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(o=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+s*s+a*a,(r=(n=2*this.radius_g*a)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=(-n-Math.sqrt(r))/(2*e),a=this.radius_g+i*a,o*=i,s*=i,t.x=Math.atan2(o,a),t.y=Math.atan(s*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var Hn;ve.defaultDatum="WGS84",ve.Proj=ee,ve.WGS84=new ve.Proj("WGS84"),ve.Point=Oe,ve.toPoint=le,ve.defs=Pt,ve.nadgrid=function(t,e){var n=new DataView(e),r=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(n),i=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Kt(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,r),a=function(t,e,n){for(var r=176,i=[],a=0;a<e.nSubgrids;a++){var o=Qt(t,r,n),s=Jt(t,r,o,n),u=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),l=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);i.push({ll:[Zt(o.lowerLongitude),Zt(o.lowerLatitude)],del:[Zt(o.longitudeInterval),Zt(o.latitudeInterval)],lim:[u,l],count:o.gridNodeCount,cvs:$t(s)}),r+=176+16*o.gridNodeCount}return i}(n,i,r),o={header:i,subgrids:a};return Ut[t]=o,o},ve.transform=ce,ve.mgrs=Ee,ve.version="__VERSION__",(Hn=ve).Proj.projections.add(Fe),Hn.Proj.projections.add(Ye),Hn.Proj.projections.add(Ue),Hn.Proj.projections.add(Ke),Hn.Proj.projections.add($e),Hn.Proj.projections.add(Qe),Hn.Proj.projections.add(tn),Hn.Proj.projections.add(en),Hn.Proj.projections.add(nn),Hn.Proj.projections.add(dn),Hn.Proj.projections.add(pn),Hn.Proj.projections.add(gn),Hn.Proj.projections.add(yn),Hn.Proj.projections.add(mn),Hn.Proj.projections.add(bn),Hn.Proj.projections.add(xn),Hn.Proj.projections.add(wn),Hn.Proj.projections.add(_n),Hn.Proj.projections.add(Mn),Hn.Proj.projections.add(En),Hn.Proj.projections.add(kn),Hn.Proj.projections.add(Cn),Hn.Proj.projections.add(Sn),Hn.Proj.projections.add(Pn),Hn.Proj.projections.add(An),Hn.Proj.projections.add(Wn),Hn.Proj.projections.add(Gn),Hn.Proj.projections.add(Yn),Hn.Proj.projections.add(Un);const Zn=ve;function Kn(t){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(t)}function $n(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Qn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,i=function(t,e){if("object"!==Kn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!==Kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key),"symbol"===Kn(i)?i:String(i)),r)}var i}function tr(t,e){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tr(t,e)}function er(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nr(t){return nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nr(t)}window.dash_clientside||(window.dash_clientside={}),window.dash_clientside.cyleaflet_utils={_proj4js_converter:Zn("EPSG:4326","EPSG:3857"),lonLatToXY:function(t,e){var n=this._proj4js_converter.forward([t,e]);return[n[0],-n[1]]},xYToLonLat:function(t,e){var n=this._proj4js_converter.inverse([t,-e]);return[n[0],n[1]]},transformElements:function(t){var e=this;return t.map((function(t){if(t.data.hasOwnProperty("lat")){var n=e.lonLatToXY(t.data.lon,t.data.lat);return{data:t.data,position:{y:n[1],x:n[0]}}}return t}))}},window.dash_clientside.cyleaflet={updateLeafBoundsAIO:function(t){if(!t)return window.dash_clientside.no_update;var e=window.dash_clientside.cyleaflet_utils,n=e.xYToLonLat(t.x1,t.y1),r=n[0],i=n[1],a=e.xYToLonLat(t.x2,t.y2),o=a[0],s=a[1];return[(new Date).getTime(),{bounds:[[s,r],[i,o]],options:{animate:!0}}]},transformElements:function(t){return window.dash_clientside.cyleaflet_utils.transformElements(t)}};var rr=n(58);n(474)(rr);var ir=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tr(t,e)}(o,t);var e,n,r,i,a=(r=o,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=nr(r);if(i){var n=nr(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===Kn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return er(t)}(this,t)});function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this,t)).handleCy=e.handleCy.bind(er(e)),e._handleCyCalled=!1,e.handleImageGeneration=e.handleImageGeneration.bind(er(e)),e.cyResponsiveClass=!1,e}return e=o,n=[{key:"generateNode",value:function(t){var e=t.target,n=e.isParent(),r=e.isChildless(),i=e.isChild(),a=e.isOrphan(),o=e.renderedPosition(),s=e.relativePosition(),u=e.parent(),l=e.style(),h=e.connectedEdges().map((function(t){return t.data()})),c=e.children().map((function(t){return t.data()})),d=e.ancestors().map((function(t){return t.data()})),f=e.descendants().map((function(t){return t.data()})),p=e.siblings().map((function(t){return t.data()})),v=t.timeStamp,g=e.json(),y=g.classes,m=g.data,b=g.grabbable,x=g.group,w=g.locked,_=g.position,M=g.selected;return{edgesData:h,renderedPosition:o,timeStamp:v,classes:y,data:m,grabbable:b,group:x,locked:w,position:_,selectable:g.selectable,selected:M,ancestorsData:d,childrenData:c,descendantsData:f,parentData:u?u.data():null,siblingsData:p,isParent:n,isChildless:r,isChild:i,isOrphan:a,relativePosition:s,style:l}}},{key:"generateEdge",value:function(t){var e=t.target,n=e.midpoint(),r=e.isLoop(),i=e.isSimple(),a=e.source().data(),o=e.sourceEndpoint(),s=e.style(),u=e.target().data(),l=e.targetEndpoint(),h=t.timeStamp,c=e.json();return{isLoop:r,isSimple:i,midpoint:n,sourceData:a,sourceEndpoint:o,targetData:u,targetEndpoint:l,timeStamp:h,classes:c.classes,data:c.data,grabbable:c.grabbable,group:c.group,locked:c.locked,selectable:c.selectable,selected:c.selected,style:s}}},{key:"handleCy",value:function(t){var e=this;if(t!==this._cy||!this._handleCyCalled){this._cy=t,window.cy=t,this._handleCyCalled=!0;var n=t.collection(),r=t.collection(),i=R().debounce((function(){var n=e.props,r=n.autoRefreshLayout,i=n.layout;r&&t.layout(i).run()}),100),a=R().debounce((function(){var t=n.map((function(t){return t.data()}));e.props.setProps({selectedNodeData:t})}),100),o=R().debounce((function(){var t=r.map((function(t){return t.data()}));e.props.setProps({selectedEdgeData:t})}),100),s=R().debounce((function(t){e.props.setProps({extent:t})}),5);t.on("tap","node",(function(t){var n=e.generateNode(t);e.props.setProps({tapNode:n,tapNodeData:Object.assign({},n.data,{timeStamp:n.timeStamp})})})),t.on("tap","edge",(function(t){var n=e.generateEdge(t);e.props.setProps({tapEdge:n,tapEdgeData:Object.assign({},n.data,{timeStamp:n.timeStamp})})})),t.on("mouseover","node",(function(t){e.props.setProps({mouseoverNodeData:Object.assign({},t.target.data(),{timeStamp:t.timeStamp})})})),t.on("mouseover","edge",(function(t){e.props.setProps({mouseoverEdgeData:Object.assign({},t.target.data(),{timeStamp:t.timeStamp})})})),t.on("mouseout","node",(function(t){!0===e.props.clearOnUnhover&&e.props.setProps({mouseoverNodeData:null})})),t.on("mouseout","edge",(function(t){!0===e.props.clearOnUnhover&&e.props.setProps({mouseoverEdgeData:null})})),t.on("select","node",(function(t){var e=t.target;n.merge(e),a()})),t.on("unselect remove","node",(function(t){var e=t.target;n.unmerge(e),a()})),t.on("select","edge",(function(t){var e=t.target;r.merge(e),o()})),t.on("unselect remove","edge",(function(t){var e=t.target;r.unmerge(e),o()})),t.on("add remove",(function(){i()})),t.on("dragfree add remove",(function(n){e.props.setProps({elements:t.elements("").map((function(t){return"nodes"===t.json().group?{data:t.json().data,position:t.json().position}:{data:t.json().data,position:void 0}}))})})),this.createMenuItems=function(r){var i,a={remove:function(t){(t.target||t.cyTarget).remove()},add_node:function(e){var n=e.position||e.cyPosition;t.add({data:{group:"nodes"},position:{x:n.x,y:n.y}})},add_edge:function(){var e=n.map((function(t){return t.id()}));0===n.length?console.error("Error: No nodes selected, cannot add edge"):1===n.length?t.add({data:{id:G(),group:"edges",source:e[0],target:e[0]}}):2===n.length?t.add({data:{id:G(),group:"edges",source:e[0],target:e[1]}}):console.error("Error: more than 2 nodes selected, cannot add edge")}},o=[],s=$n(r);try{var u=function(){var t,n=i.value;t=function(t){var r;r={menuItemId:n.id,x:t.position.x,y:t.position.y,timeStamp:t.timeStamp,elementId:t.target.data().id,edgeSource:t.target.data().source,edgeTarget:t.target.data().target},e.props.setProps({contextMenuData:r})},Object.prototype.hasOwnProperty.call(n,"onClick")?Object.prototype.hasOwnProperty.call(a,n.onClick)?t=a[n.onClick]:console.error("onClick function ".concat(n.onClick," is not defined")):Object.prototype.hasOwnProperty.call(n,"onClickCustom")&&(Object.prototype.hasOwnProperty.call(window,"dashCytoscapeFunctions")&&Object.prototype.hasOwnProperty.call(window.dashCytoscapeFunctions,n.onClickCustom)?t=window.dashCytoscapeFunctions[n.onClickCustom]:console.error("onClickCustom function ".concat(n.onClickCustom," is not defined")));var r={id:n.id,content:n.label,tooltipText:n.tooltipText,selector:"",onClickFunction:t,coreAsWell:!1};if(Object.prototype.hasOwnProperty.call(n,"availableOn")){var s,u=$n(n.availableOn);try{for(u.s();!(s=u.n()).done;){var l=s.value;"edge"===l?(r.selector.length>0&&(r.selector=r.selector+", "),r.selector=r.selector+"edge"):"node"===l?(r.selector.length>0&&(r.selector=r.selector+", "),r.selector=r.selector+"node"):"canvas"===l?r.coreAsWell=!0:console.error("Error: selector ".concat(l," is not available. Choose one of 'node', 'edge' or 'canvas'."))}}catch(t){u.e(t)}finally{u.f()}}o.push(r)};for(s.s();!(i=s.n()).done;)u()}catch(t){s.e(t)}finally{s.f()}return o},this.cyResponsiveClass=new U(t),this.cyResponsiveClass.toggle(this.props.responsive),t.on("viewport resize",(function(){s(t.extent())})),this.cyResponsiveClass=new U(t),this.cyResponsiveClass.toggle(this.props.responsive),s(t.extent())}}},{key:"handleImageGeneration",value:function(t,e,n,r){var i=this,a={};e&&(a=e);var o,s,u,l=a.output;switch(a.output="blob",n){case"store":default:o=!1,s=!0;break;case"download":o=!0,s=!1;break;case"both":o=!0,s=!0}if("png"===t&&(u=this._cy.png(a)),"jpg"!==t&&"jpeg"!==t||(u=this._cy.jpg(a)),"svg"===t&&(u=this._cy.svg(a)),u&&o){var h=r;if(r||(h="cyto"),"svg"!==t)this.downloadBlob(u,h+"."+t);else{var c=new Blob([u],{type:"image/svg+xml;charset=utf-8"});this.downloadBlob(c,h+"."+t)}}if(u&&s){if(l||(l="base64uri"),"base64uri"!==l&&"base64"!==l)return;var d=new FileReader;d.onload=function(){var t=d.result;"base64"===l&&(t=t.replace(/^data:.+;base64,/,"")),i.props.setProps({imageData:t})},d.readAsDataURL(u)}}},{key:"downloadBlob",value:function(t,e){var n=document.createElement("a");n.style="display: none",document.body.appendChild(n);var r=window.URL.createObjectURL(t);n.href=r,n.download=e,n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n)}},{key:"updateContextMenu",value:function(t){this._cy.contextMenus({menuItems:this.createMenuItems(t),menuItemClasses:["custom-menu-item"]})}},{key:"graphOutOfView",value:function(){var t=this._cy.width(),e=this._cy.height(),n=this._cy.elements().renderedBoundingbox();return n.x1<0||n.y1<0||n.x2>t||n.y2>e}},{key:"componentDidUpdate",value:function(t){var e=this.props,n=e.contextMenu,r=e.elements;!R().isEqual(t.contextMenu,n)&&this._cy&&this.updateContextMenu(n),!R().isEqual(t.elements,r)&&this._cy&&this.graphOutOfView()&&this._cy.fit()}},{key:"componentDidMount",value:function(){var t=this.props.contextMenu;this._cy&&t.length>0&&this.updateContextMenu(t)}},{key:"render",value:function(){var t=this.props,e=t.id,n=t.style,r=t.className,i=t.elements,a=t.stylesheet,o=t.layout,s=t.contextMenu,u=t.contextMenuData,l=t.pan,h=t.zoom,c=t.panningEnabled,d=t.userPanningEnabled,f=t.minZoom,p=t.maxZoom,v=t.zoomingEnabled,g=t.userZoomingEnabled,m=t.boxSelectionEnabled,b=t.autoungrabify,x=t.autolock,w=t.autounselectify,_=t.generateImage,M=t.responsive;return Object.keys(_).length>0&&(this.props.setProps({generateImage:{}}),this._cy&&this.handleImageGeneration(_.type,_.options,_.action,_.filename)),this.cyResponsiveClass&&this.cyResponsiveClass.toggle(M),y().createElement(z,{id:e,cy:this.handleCy,className:r,style:n,elements:z.normalizeElements(i),stylesheet:a,layout:o,contextMenu:s,contextMenuData:u,pan:l,zoom:h,panningEnabled:c,userPanningEnabled:d,minZoom:f,maxZoom:p,zoomingEnabled:v,userZoomingEnabled:g,boxSelectionEnabled:m,autoungrabify:b,autolock:x,autounselectify:w})}}],n&&Jn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(g.Component);ir.propTypes={id:b().string,className:b().string,style:b().object,setProps:b().func,elements:b().oneOfType([b().arrayOf(b().shape({group:b().string,data:b().shape({id:b().string,label:b().string,parent:b().string,source:b().string,target:b().string}),position:b().shape({x:b().number,y:b().number}),selected:b().bool,selectable:b().bool,locked:b().bool,grabbable:b().bool,classes:b().string})),b().exact({nodes:b().array,edges:b().array})]),stylesheet:b().arrayOf(b().exact({selector:b().string.isRequired,style:b().object.isRequired})),layout:b().shape({name:b().oneOf(["random","preset","circle","concentric","grid","breadthfirst","cose","cose-bilkent","fcose","cola","euler","spread","dagre","klay"]).isRequired,fit:b().bool,padding:b().number,animate:b().bool,animationDuration:b().number,boundingBox:b().object}),contextMenu:b().arrayOf(b().exact({id:b().string.isRequired,label:b().string.isRequired,tooltipText:b().string,availableOn:b().array,onClick:b().string,onClickCustom:b().string})),contextMenuData:b().exact({menuItemId:b().string,x:b().number,y:b().number,timeStamp:b().number,elementId:b().string,edgeSource:b().string,edgeTarget:b().string}),pan:b().exact({x:b().number,y:b().number}),zoom:b().number,panningEnabled:b().bool,userPanningEnabled:b().bool,minZoom:b().number,maxZoom:b().number,zoomingEnabled:b().bool,userZoomingEnabled:b().bool,boxSelectionEnabled:b().bool,autoungrabify:b().bool,autolock:b().bool,autounselectify:b().bool,autoRefreshLayout:b().bool,tapNode:b().exact({edgesData:b().array,renderedPosition:b().object,timeStamp:b().number,classes:b().string,data:b().object,grabbable:b().bool,group:b().string,locked:b().bool,position:b().object,selectable:b().bool,selected:b().bool,style:b().object,ancestorsData:b().oneOfType([b().object,b().array]),childrenData:b().oneOfType([b().object,b().array]),descendantsData:b().oneOfType([b().object,b().array]),parentData:b().oneOfType([b().object,b().array]),siblingsData:b().oneOfType([b().object,b().array]),isParent:b().bool,isChildless:b().bool,isChild:b().bool,isOrphan:b().bool,relativePosition:b().object}),tapNodeData:b().object,tapEdge:b().exact({isLoop:b().bool,isSimple:b().bool,midpoint:b().object,sourceData:b().object,sourceEndpoint:b().object,targetData:b().object,targetEndpoint:b().object,timeStamp:b().number,classes:b().string,data:b().object,grabbable:b().bool,group:b().string,locked:b().bool,selectable:b().bool,selected:b().bool,style:b().object}),tapEdgeData:b().object,mouseoverNodeData:b().object,mouseoverEdgeData:b().object,selectedNodeData:b().array,selectedEdgeData:b().array,generateImage:b().shape({type:b().oneOf(["svg","png","jpg","jpeg"]),options:b().object,action:b().oneOf(["store","download","both"]),filename:b().string}),imageData:b().string,responsive:b().bool,extent:b().object,clearOnUnhover:b().bool},ir.defaultProps={style:{width:"600px",height:"600px"},layout:{name:"grid"},pan:{x:0,y:0},zoom:1,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:!0,userZoomingEnabled:!0,panningEnabled:!0,userPanningEnabled:!0,boxSelectionEnabled:!1,autolock:!1,autoungrabify:!1,autounselectify:!1,autoRefreshLayout:!0,generateImage:{},imageData:null,responsive:!1,clearOnUnhover:!1,elements:[],contextMenu:[]};const ar=ir})(),window.dash_cytoscape=r})();